exports.id=452,exports.ids=[452],exports.modules={1388:()=>{},7629:(a,b,c)=>{"use strict";c.d(b,{p:()=>g});var d=c(21124),e=c(38301),f=c(15514);let g=e.forwardRef(({className:a,type:b,...c},e)=>(0,d.jsx)("input",{type:b,className:(0,f.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));g.displayName="Input"},15514:(a,b,c)=>{"use strict";c.d(b,{cn:()=>f});var d=c(43249),e=c(58829);function f(...a){return(0,e.QP)((0,d.$)(a))}},16953:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>j,metadata:()=>i});var d=c(75338),e=c(81883),f=c.n(e),g=c(13135),h=c.n(g);c(82704);let i={title:"Professional HVAC Services | 24/7 Emergency Repair & Installation",description:"Expert HVAC services with 20+ years of experience. Same-day repairs, energy-efficient installations, and preventive maintenance. Licensed & insured. Book online or call (555) 123-4567."};function j({children:a}){return(0,d.jsx)("html",{lang:"en",children:(0,d.jsx)("body",{className:`${f().variable} ${h().variable} antialiased`,suppressHydrationWarning:!0,children:a})})}},19217:(a,b,c)=>{"use strict";c.d(b,{$:()=>j});var d=c(21124),e=c(38301),f=c(96425),g=c(26691),h=c(15514);let i=(0,g.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),j=e.forwardRef(({className:a,variant:b,size:c,asChild:e=!1,...g},j)=>{let k=e?f.DX:"button";return(0,d.jsx)(k,{className:(0,h.cn)(i({variant:b,size:c,className:a})),ref:j,...g})});j.displayName="Button"},22544:(a,b,c)=>{"use strict";c.d(b,{E:()=>h});var d=c(21124);c(38301);var e=c(26691),f=c(15514);let g=(0,e.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function h({className:a,variant:b,...c}){return(0,d.jsx)("div",{className:(0,f.cn)(g({variant:b}),a),...c})}},28241:(a,b,c)=>{"use strict";c.d(b,{bq:()=>m,eb:()=>q,gC:()=>p,l6:()=>k,yv:()=>l});var d=c(21124),e=c(38301),f=c(91801),g=c(85351),h=c(82042),i=c(71613),j=c(15514);let k=f.bL;f.YJ;let l=f.WT,m=e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(f.l9,{ref:e,className:(0,j.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...c,children:[b,(0,d.jsx)(f.In,{asChild:!0,children:(0,d.jsx)(g.A,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=f.l9.displayName;let n=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.PP,{ref:c,className:(0,j.cn)("flex cursor-default items-center justify-center py-1",a),...b,children:(0,d.jsx)(h.A,{className:"h-4 w-4"})}));n.displayName=f.PP.displayName;let o=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.wn,{ref:c,className:(0,j.cn)("flex cursor-default items-center justify-center py-1",a),...b,children:(0,d.jsx)(g.A,{className:"h-4 w-4"})}));o.displayName=f.wn.displayName;let p=e.forwardRef(({className:a,children:b,position:c="popper",...e},g)=>(0,d.jsx)(f.ZL,{children:(0,d.jsxs)(f.UC,{ref:g,className:(0,j.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===c&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:c,...e,children:[(0,d.jsx)(n,{}),(0,d.jsx)(f.LM,{className:(0,j.cn)("p-1","popper"===c&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:b}),(0,d.jsx)(o,{})]})}));p.displayName=f.UC.displayName,e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.JU,{ref:c,className:(0,j.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...b})).displayName=f.JU.displayName;let q=e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(f.q7,{ref:e,className:(0,j.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...c,children:[(0,d.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,d.jsx)(f.VF,{children:(0,d.jsx)(i.A,{className:"h-4 w-4"})})}),(0,d.jsx)(f.p4,{children:b})]}));q.displayName=f.q7.displayName,e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.wv,{ref:c,className:(0,j.cn)("-mx-1 my-1 h-px bg-muted",a),...b})).displayName=f.wv.displayName},33847:(a,b,c)=>{"use strict";c.d(b,{T:()=>g});var d=c(21124),e=c(38301),f=c(15514);let g=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("textarea",{className:(0,f.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:c,...b}));g.displayName="Textarea"},37332:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))},45119:(a,b,c)=>{"use strict";c.d(b,{BT:()=>j,Wu:()=>k,ZB:()=>i,Zp:()=>g,aR:()=>h,wL:()=>l});var d=c(21124),e=c(38301),f=c(15514);let g=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...b}));g.displayName="Card";let h=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex flex-col space-y-1.5 p-6",a),...b}));h.displayName="CardHeader";let i=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("text-2xl font-semibold leading-none tracking-tight",a),...b}));i.displayName="CardTitle";let j=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("text-sm text-muted-foreground",a),...b}));j.displayName="CardDescription";let k=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("p-6 pt-0",a),...b}));k.displayName="CardContent";let l=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex items-center p-6 pt-0",a),...b}));l.displayName="CardFooter"},46055:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>e});var d=c(97523);let e=async a=>[{type:"image/x-icon",sizes:"16x16",url:(0,d.fillMetadataSegment)(".",await a.params,"favicon.ico")+""}]},77921:(a,b,c)=>{"use strict";c.d(b,{A:()=>at});var d=c(21124),e=c(38301),f=c.n(e),g=c(47089),h=c(19217);class i{constructor(){this.stepStartTimes={},this.conversionData={},this.events=[],this.sessionId=this.generateSessionId(),this.sessionStartTime=Date.now(),this.conversionData.sessionId=this.sessionId}trackStep(a,b,c){let d=Date.now(),e={event:`booking_${a}_${b}`,properties:{step:a,action:b,sessionId:this.sessionId,timestamp:new Date().toISOString(),sessionDuration:Math.round((d-this.sessionStartTime)/1e3),...c},timestamp:new Date().toISOString(),sessionId:this.sessionId};if(this.events.push(e),"view"===b)this.stepStartTimes[a]=d;else if("next"===b||"back"===b||"abandon"===b){let b=this.stepStartTimes[a];if(b){let c=Math.round((d-b)/1e3);e.properties.stepDuration=c,this.conversionData.stepDurations||(this.conversionData.stepDurations={}),this.conversionData.stepDurations[a]=c}}this.updateConversionData(a,b,c),this.sendEvent(e)}trackZipValidation(a,b,c,d){this.conversionData.zipCode=a,this.conversionData.countryCode=b,this.conversionData.isSupported=c,this.trackStep("zip_gate",c?"next":"error",{zipCode:a,countryCode:b,isSupported:c,suggestionsCount:d?.length||0})}trackServiceSelection(a,b){this.conversionData.serviceCategory=a,this.conversionData.serviceId=b,this.trackStep("category","next",{serviceCategory:a,serviceId:b})}trackBookingComplete(a,b){let c=Date.now();this.conversionData.completedAt=new Date().toISOString(),this.conversionData.totalDuration=Math.round((c-this.sessionStartTime)/1e3),this.trackStep("confirmation","complete",{bookingId:a,totalDuration:this.conversionData.totalDuration,...b})}trackBookingAbandon(a,b){this.conversionData.abandonedAt=new Date().toISOString(),this.conversionData.totalDuration=Math.round((Date.now()-this.sessionStartTime)/1e3),this.trackStep(a,"abandon",{reason:b,totalDuration:this.conversionData.totalDuration})}trackBookingError(a,b){let c="string"==typeof b?b:b.message;this.conversionData.errorStep=a,this.conversionData.errorMessage=c,this.trackStep(a,"error",{error:c,errorType:"string"==typeof b?"validation":"api"})}trackCustomEvent(a,b){let c={event:a,properties:{sessionId:this.sessionId,timestamp:new Date().toISOString(),...b},timestamp:new Date().toISOString(),sessionId:this.sessionId};this.events.push(c),this.sendEvent(c)}getSessionSummary(){return{sessionId:this.sessionId,sessionDuration:Math.round((Date.now()-this.sessionStartTime)/1e3),eventsCount:this.events.length,conversionData:this.conversionData,events:this.events}}getFunnelMetrics(){let a=this.events.reduce((a,b)=>{let c=b.properties.step,d=b.properties.action;return c&&d&&(a[c]||(a[c]={}),a[c][d]||(a[c][d]=0),a[c][d]++),a},{});return{sessionId:this.sessionId,stepCounts:a,stepDurations:this.conversionData.stepDurations,totalDuration:this.conversionData.totalDuration,completed:!!this.conversionData.completedAt,abandoned:!!this.conversionData.abandonedAt}}updateConversionData(a,b,c){!this.conversionData.businessId&&c?.businessId&&(this.conversionData.businessId=c.businessId)}sendEvent(a){console.log("\uD83D\uDCCA Booking Analytics:",a)}generateSessionId(){return`booking_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}let j=null,k=()=>(j||(j=new i),j),l=(0,e.createContext)(void 0),m={ZIP_CHECK:0,CATEGORY:1,ADDRESS:2,DATETIME:3,CONTACT:4,DETAILS:5,REVIEW:6,CONFIRMATION:7},n=Object.keys(m).length;function o({children:a,businessId:b,onComplete:c,onError:f}){let[g,h]=(0,e.useState)({currentStep:m.ZIP_CHECK,dispatchFeeAccepted:!1,termsAccepted:!1,isLoading:!1}),i=k(),j=(0,e.useCallback)(()=>{if(g.currentStep<n-1){let a=["zip_gate","category","address","datetime","contact","details","review","confirmation"][g.currentStep];i.trackStep(a,"next",{businessId:b}),h(a=>({...a,currentStep:a.currentStep+1,error:void 0}))}},[g.currentStep,i,b]),o=(0,e.useCallback)(()=>{if(g.currentStep>0){let a=["zip_gate","category","address","datetime","contact","details","review","confirmation"][g.currentStep];i.trackStep(a,"back",{businessId:b}),h(a=>({...a,currentStep:a.currentStep-1,error:void 0}))}},[g.currentStep,i,b]),p=(0,e.useCallback)(a=>{if(a>=0&&a<n){let c=["zip_gate","category","address","datetime","contact","details","review","confirmation"][a];i.trackStep(c,"view",{businessId:b}),h(b=>({...b,currentStep:a,error:void 0}))}},[i,b]),q=(0,e.useCallback)(()=>{switch(g.currentStep){case m.ZIP_CHECK:return g.zipInfo?.supported===!0;case m.CATEGORY:return!!(g.categoryId&&g.serviceId);case m.ADDRESS:return!!(g.address?.line1&&g.address?.city&&g.address?.region);case m.DATETIME:return!!(g.slot?.start&&g.slot?.end);case m.CONTACT:return!!(g.contact?.firstName&&g.contact?.lastName&&g.contact?.phoneE164&&g.contact?.email);case m.DETAILS:return!0;case m.REVIEW:return g.termsAccepted;default:return!1}},[g]),r=(0,e.useCallback)(a=>{h(b=>({...b,zipInfo:a,error:void 0}))},[]),s=(0,e.useCallback)((a,b)=>{h(c=>({...c,categoryId:a,serviceId:b,error:void 0}))},[]),t=(0,e.useCallback)(a=>{h(b=>({...b,address:a,error:void 0}))},[]),u=(0,e.useCallback)(a=>{h(b=>({...b,slot:a,error:void 0}))},[]),v=(0,e.useCallback)(a=>{h(b=>({...b,contact:a,error:void 0}))},[]),w=(0,e.useCallback)(a=>{h(b=>({...b,details:a,error:void 0}))},[]),x=(0,e.useCallback)(a=>{h(b=>({...b,...a,error:void 0}))},[]),y=(0,e.useCallback)(a=>{h(b=>({...b,isLoading:a}))},[]),z=(0,e.useCallback)(a=>{h(b=>({...b,error:a})),a&&f&&f(a)},[f]),A=(0,e.useCallback)(()=>{h({currentStep:m.ZIP_CHECK,dispatchFeeAccepted:!1,termsAccepted:!1,isLoading:!1})},[]);return(0,d.jsx)(l.Provider,{value:{state:g,nextStep:j,prevStep:o,goToStep:p,canProceed:q,updateZipInfo:r,updateService:s,updateAddress:t,updateSlot:u,updateContact:v,updateDetails:w,updateFlags:x,setLoading:y,setError:z,resetWizard:A},children:a})}function p(){let a=(0,e.useContext)(l);if(!a)throw Error("useBookingWizard must be used within a BookingWizardProvider");return a}function q(a,b){switch(b){case m.ZIP_CHECK:return a.zipInfo?.supported===!0;case m.CATEGORY:return!!(a.categoryId&&a.serviceId);case m.ADDRESS:return!!(a.address?.line1&&a.address?.city);case m.DATETIME:return!!a.slot?.start;case m.CONTACT:return!!(a.contact?.firstName&&a.contact?.email);case m.DETAILS:return!0;case m.REVIEW:return a.termsAccepted;default:return!1}}var r=c(69957),s=c(4268),t=c(78733),u=c(72567),v=c(10578),w=c(3663),x=c(3368),y=c(75219),z=c(71613);function A({className:a="",showLabels:b=!0}){let{state:c,goToStep:e}=p(),{currentStep:g}=c,h=[{key:m.ZIP_CHECK,icon:r.A,label:"Location"},{key:m.CATEGORY,icon:s.A,label:"Service"},{key:m.ADDRESS,icon:t.A,label:"Address"},{key:m.DATETIME,icon:u.A,label:"Date & Time"},{key:m.CONTACT,icon:v.A,label:"Contact"},{key:m.DETAILS,icon:w.A,label:"Details"},{key:m.REVIEW,icon:x.A,label:"Review"},{key:m.CONFIRMATION,icon:y.A,label:"Done"}],i=a=>a<g?q(c,a)?"completed":"skipped":a===g?"current":"upcoming";return(0,d.jsx)("div",{className:`w-full bg-white border-b border-gray-200 ${a}`,children:(0,d.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:[(0,d.jsx)("div",{className:"flex items-center justify-between",children:h.map((a,j)=>{let k=i(j),l=a.icon,m=j<=g||q(c,j);return(0,d.jsxs)(f().Fragment,{children:[(0,d.jsxs)("div",{className:"flex flex-col items-center",children:[(0,d.jsxs)("button",{onClick:()=>m&&e(j),disabled:!m,className:`
                      relative w-10 h-10 md:w-12 md:h-12 rounded-full border-2 
                      flex items-center justify-center transition-all duration-200
                      ${(a=>{switch(a){case"completed":return"bg-green-500 text-white border-green-500";case"current":return"bg-blue-500 text-white border-blue-500";case"skipped":return"bg-gray-300 text-gray-600 border-gray-300";default:return"bg-white text-gray-400 border-gray-300"}})(k)}
                      ${m?"cursor-pointer hover:scale-105":"cursor-not-allowed"}
                      focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2
                    `,"aria-label":`${a.label} - ${k}`,children:["completed"===k?(0,d.jsx)(z.A,{className:"w-5 h-5 md:w-6 md:h-6"}):(0,d.jsx)(l,{className:"w-5 h-5 md:w-6 md:h-6"}),(0,d.jsx)("span",{className:"absolute -top-2 -right-2 w-5 h-5 bg-gray-100 text-gray-600 text-xs rounded-full flex items-center justify-center md:hidden",children:j+1})]}),b&&(0,d.jsxs)("div",{className:"mt-2 text-center",children:[(0,d.jsx)("div",{className:`
                        text-xs md:text-sm font-medium
                        ${"current"===k?"text-blue-600":"completed"===k?"text-green-600":"text-gray-500"}
                      `,children:a.label}),"current"===k&&(0,d.jsxs)("div",{className:"text-xs text-gray-500 mt-1 hidden md:block",children:["Step ",j+1," of ",h.length]})]})]}),j<h.length-1&&(0,d.jsx)("div",{className:"flex-1 mx-2 md:mx-4",children:(0,d.jsx)("div",{className:`
                      h-0.5 md:h-1 rounded transition-colors duration-300
                      ${(a=>{let b=i(a);return"completed"===b||"current"===b?"bg-green-500":"bg-gray-300"})(j)}
                    `})})]},a.key)})}),(0,d.jsxs)("div",{className:"mt-4 md:hidden",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-2",children:[(0,d.jsx)("span",{children:"Progress"}),(0,d.jsxs)("span",{children:[g+1," of ",h.length]})]}),(0,d.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,d.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${(g+1)/h.length*100}%`}})})]}),(0,d.jsxs)("div",{className:"mt-4 text-center",children:[(0,d.jsx)("h2",{className:"text-lg md:text-xl font-semibold text-gray-900",children:["ZIP Code","Service","Address","Date & Time","Contact","Details","Review","Confirmation"][g]||"Unknown"}),c.error&&(0,d.jsx)("div",{className:"mt-2 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2",children:c.error})]})]})})}var B=c(15303),C=c(7922),D=c(18310),E=c(71213),F=c(15982),G=c(82149);class H{constructor(){this.config=(0,G.Jh)()}async checkServiceAreaSupport(a){let b=new URLSearchParams({business_id:a.business_id,postal_code:a.postal_code,country_code:a.country_code||"US"}),c=(0,G.dz)(`service-areas/check?${b}`),d=await fetch(c,{method:"GET",headers:(0,G.KZ)()});if(!d.ok){if(404===d.status)return{supported:!1,message:"Service area not found"};throw Error((await d.json().catch(()=>({detail:"Failed to check service area"}))).detail||"Failed to check service area")}return d.json()}async createAvailabilityRequest(a){let b=(0,G.dz)("availability/request"),c=await fetch(b,{method:"POST",headers:(0,G.KZ)(),body:JSON.stringify({...a,source:a.source||"booking_widget",referrer_url:a.referrer_url||void 0,user_agent:a.user_agent||("undefined"!=typeof navigator?navigator.userAgent:void 0)})});if(!c.ok)throw Error((await c.json().catch(()=>({detail:"Failed to create availability request"}))).detail||"Failed to create availability request");return c.json()}async getAvailableSlots(a){let b=(0,G.dz)("availability/slots"),c=await fetch(b,{method:"POST",headers:(0,G.KZ)(),body:JSON.stringify({...a,country_code:a.country_code||"US"})});if(!c.ok)throw Error((await c.json().catch(()=>({detail:"Failed to get available slots"}))).detail||"Failed to get available slots");return c.json()}normalizePostalCode(a,b="US"){let c=a.replace(/[^A-Za-z0-9]/g,"").toUpperCase();switch(b.toUpperCase()){case"US":c.length>=5&&(c=c.substring(0,5));break;case"CA":c.length>=6&&(c=c.substring(0,6))}return c}validatePostalCode(a,b="US"){let c=this.normalizePostalCode(a,b);switch(b.toUpperCase()){case"US":return/^\d{5}$/.test(c);case"CA":return/^[A-Z]\d[A-Z]\d[A-Z]\d$/.test(c);case"GB":return/^[A-Z]{1,2}\d[A-Z\d]?\s?\d[A-Z]{2}$/i.test(a);default:return c.length>=3}}getPostalCodePlaceholder(a="US"){switch(a.toUpperCase()){case"US":return"12345";case"CA":return"A1A 1A1";case"GB":return"SW1A 1AA";case"AU":return"2000";default:return"Enter postal code"}}getPostalCodeLabel(a="US"){return"US"===a.toUpperCase()?"ZIP Code":"Postal Code"}}let I=new H;var J=c(7629),K=c(28241),L=c(45119),M=c(22544);let N=[{code:"US",name:"United States",flag:"\uD83C\uDDFA\uD83C\uDDF8"},{code:"CA",name:"Canada",flag:"\uD83C\uDDE8\uD83C\uDDE6"},{code:"GB",name:"United Kingdom",flag:"\uD83C\uDDEC\uD83C\uDDE7"},{code:"AU",name:"Australia",flag:"\uD83C\uDDE6\uD83C\uDDFA"}];function O({businessId:a,businessName:b="our team",businessPhone:c,businessEmail:f}){let{state:g,updateZipInfo:i,nextStep:j,setLoading:l,setError:m}=p(),n=k(),[o,q]=(0,e.useState)(g.zipInfo?.postalCode||""),[s,t]=(0,e.useState)(g.zipInfo?.countryCode||"US"),[u,v]=(0,e.useState)(null),[w,x]=(0,e.useState)(!1),z=async()=>{if(!o.trim())return void m("Please enter a postal code");if(!I.validatePostalCode(o,s))return void m(`Please enter a valid ${I.getPostalCodeLabel(s).toLowerCase()}`);x(!0),l(!0),m();try{let b=I.normalizePostalCode(o,s),c=await I.checkServiceAreaSupport({business_id:a,postal_code:b,country_code:s});if(v(c),n.trackZipValidation(b,s,c.supported,c.suggestions),c.supported&&c.normalized){let a={postalCode:c.normalized.postal_code,countryCode:c.normalized.country_code,city:c.normalized.city,region:c.normalized.region,timezone:c.normalized.timezone,supported:!0,dispatchFeeCents:c.normalized.dispatch_fee_cents,minResponseTimeHours:c.normalized.min_response_time_hours,maxResponseTimeHours:c.normalized.max_response_time_hours,emergencyAvailable:c.normalized.emergency_available,regularAvailable:c.normalized.regular_available};i(a)}else i({postalCode:b,countryCode:s,timezone:"America/New_York",supported:!1})}catch(a){console.error("Error checking service area:",a),m("Unable to check service area. Please try again.")}finally{x(!1),l(!1)}},A=async()=>{if(!f&&!c)return void m("Contact information not available");m("Please contact us directly to request service in your area")},G=N.find(a=>a.code===s);return(0,d.jsxs)("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,d.jsx)(r.A,{className:"w-8 h-8 text-blue-600"})}),(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"What's your location?"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Enter your postal code so we can check if we provide service in your area"})]}),(0,d.jsx)(L.Zp,{children:(0,d.jsx)(L.Wu,{className:"p-6",children:(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),(0,d.jsxs)(K.l6,{value:s,onValueChange:t,children:[(0,d.jsx)(K.bq,{children:(0,d.jsx)(K.yv,{children:G&&(0,d.jsxs)("span",{className:"flex items-center",children:[(0,d.jsx)("span",{className:"mr-2",children:G.flag}),G.name]})})}),(0,d.jsx)(K.gC,{children:N.map(a=>(0,d.jsx)(K.eb,{value:a.code,children:(0,d.jsxs)("span",{className:"flex items-center",children:[(0,d.jsx)("span",{className:"mr-2",children:a.flag}),a.name]})},a.code))})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[I.getPostalCodeLabel(s)," *"]}),(0,d.jsxs)("div",{className:"flex space-x-3",children:[(0,d.jsx)(J.p,{value:o,onChange:a=>{q(a.target.value.toUpperCase()),v(null),m()},placeholder:I.getPostalCodePlaceholder(s),className:"flex-1",maxLength:10,onKeyPress:a=>{"Enter"===a.key&&z()}}),(0,d.jsx)(h.$,{onClick:z,disabled:!o.trim()||w,className:"px-6",children:w?"Checking...":"Check"})]})]})]})})}),u&&(0,d.jsx)("div",{className:"space-y-4",children:u.supported?(0,d.jsx)(L.Zp,{className:"border-green-200 bg-green-50",children:(0,d.jsx)(L.Wu,{className:"p-6",children:(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)(y.A,{className:"w-6 h-6 text-green-600 mt-1"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("h3",{className:"font-semibold text-green-900 mb-2",children:"Great! We service your area"}),u.normalized&&(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"text-sm text-green-800",children:[(0,d.jsx)("strong",{children:"Service Area:"})," ",u.normalized.city,", ",u.normalized.region," ",u.normalized.postal_code]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(B.A,{className:"w-4 h-4 text-green-600"}),(0,d.jsxs)("span",{children:["Response: ",u.normalized.min_response_time_hours,"-",u.normalized.max_response_time_hours," hours"]})]}),u.normalized.dispatch_fee_cents>0&&(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)(C.A,{className:"w-4 h-4 text-green-600"}),(0,d.jsxs)("span",{children:["Service fee: $",(u.normalized.dispatch_fee_cents/100).toFixed(2)]})]})]}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-2",children:[u.normalized.emergency_available&&(0,d.jsx)(M.E,{variant:"secondary",className:"bg-red-100 text-red-800",children:"24/7 Emergency"}),u.normalized.regular_available&&(0,d.jsx)(M.E,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:"Regular Service"})]})]}),(0,d.jsx)(h.$,{onClick:()=>{g.zipInfo?.supported&&j()},className:"mt-4 w-full md:w-auto",children:"Continue Booking"})]})]})})}):(0,d.jsx)(L.Zp,{className:"border-orange-200 bg-orange-50",children:(0,d.jsx)(L.Wu,{className:"p-6",children:(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)(D.A,{className:"w-6 h-6 text-orange-600 mt-1"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("h3",{className:"font-semibold text-orange-900 mb-2",children:"Service not yet available in your area"}),(0,d.jsx)("p",{className:"text-sm text-orange-800 mb-4",children:"We're expanding our service area and would love to help you in the future."}),u.suggestions&&u.suggestions.length>0&&(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-orange-900 mb-2",children:"We do service these nearby areas:"}),(0,d.jsx)("div",{className:"space-y-1",children:u.suggestions.map((a,b)=>(0,d.jsxs)("div",{className:"text-sm text-orange-800",children:["â€¢ ",a.city,", ",a.region," ",a.postal_code]},b))})]}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("p",{className:"text-sm font-medium text-orange-900",children:["Get in touch with ",b,":"]}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[c&&(0,d.jsx)(h.$,{variant:"outline",size:"sm",className:"border-orange-300 text-orange-700 hover:bg-orange-100",asChild:!0,children:(0,d.jsxs)("a",{href:`tel:${c}`,children:[(0,d.jsx)(E.A,{className:"w-4 h-4 mr-2"}),"Call ",c]})}),f&&(0,d.jsx)(h.$,{variant:"outline",size:"sm",className:"border-orange-300 text-orange-700 hover:bg-orange-100",asChild:!0,children:(0,d.jsxs)("a",{href:`mailto:${f}`,children:[(0,d.jsx)(F.A,{className:"w-4 h-4 mr-2"}),"Email Us"]})})]}),(0,d.jsx)(h.$,{onClick:A,size:"sm",className:"w-full sm:w-auto",children:"Request Service Notification"})]})]})]})})})}),u&&!u.supported&&(0,d.jsxs)(L.Zp,{className:"border-red-200",children:[(0,d.jsx)(L.aR,{children:(0,d.jsxs)(L.ZB,{className:"text-red-900 flex items-center",children:[(0,d.jsx)(D.A,{className:"w-5 h-5 mr-2"}),"Emergency Service"]})}),(0,d.jsxs)(L.Wu,{children:[(0,d.jsx)("p",{className:"text-sm text-red-800 mb-4",children:"If this is an emergency, please call us directly. We may be able to provide emergency service even outside our regular service area."}),c&&(0,d.jsx)(h.$,{variant:"destructive",asChild:!0,className:"w-full sm:w-auto",children:(0,d.jsxs)("a",{href:`tel:${c}`,children:[(0,d.jsx)(E.A,{className:"w-4 h-4 mr-2"}),"Emergency: ",c]})})]})]})]})}var P=c(43787),Q=c(46486),R=c(46422),S=c(98688),T=c(68324),U=c(80646),V=c(16385),W=c(4115),X=c(9063),Y=c(59405);let Z={HVAC:{icon:P.A,color:"blue",bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-900",description:"Heating, ventilation, and air conditioning services"},Plumbing:{icon:Q.A,color:"blue",bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-900",description:"Water systems, pipes, and fixtures"},Electrical:{icon:R.A,color:"yellow",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",textColor:"text-yellow-900",description:"Electrical systems, wiring, and fixtures"},Mechanical:{icon:S.A,color:"gray",bgColor:"bg-gray-50",borderColor:"border-gray-200",textColor:"text-gray-900",description:"Mechanical systems and equipment"},Refrigeration:{icon:P.A,color:"cyan",bgColor:"bg-cyan-50",borderColor:"border-cyan-200",textColor:"text-cyan-900",description:"Cooling and refrigeration systems"},"Security Systems":{icon:T.A,color:"red",bgColor:"bg-red-50",borderColor:"border-red-200",textColor:"text-red-900",description:"Security and surveillance systems"},Landscaping:{icon:U.A,color:"green",bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-900",description:"Outdoor maintenance and landscaping"},Roofing:{icon:t.A,color:"orange",bgColor:"bg-orange-50",borderColor:"border-orange-200",textColor:"text-orange-900",description:"Roof installation, repair, and maintenance"},"Kitchen Equipment":{icon:V.A,color:"brown",bgColor:"bg-amber-50",borderColor:"border-amber-200",textColor:"text-amber-900",description:"Commercial kitchen equipment services"},"Water Treatment":{icon:W.A,color:"blue",bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-900",description:"Water filtration and treatment systems"},"Pool & Spa":{icon:W.A,color:"teal",bgColor:"bg-teal-50",borderColor:"border-teal-200",textColor:"text-teal-900",description:"Pool and spa maintenance and repair"},Chimney:{icon:t.A,color:"red",bgColor:"bg-red-50",borderColor:"border-red-200",textColor:"text-red-900",description:"Chimney cleaning and maintenance"},"Garage Door":{icon:t.A,color:"gray",bgColor:"bg-gray-50",borderColor:"border-gray-200",textColor:"text-gray-900",description:"Garage door installation and repair"},Septic:{icon:Q.A,color:"brown",bgColor:"bg-amber-50",borderColor:"border-amber-200",textColor:"text-amber-900",description:"Septic system services"},"Pest Control":{icon:T.A,color:"green",bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-900",description:"Pest prevention and elimination"},Irrigation:{icon:Q.A,color:"green",bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-900",description:"Irrigation system installation and maintenance"},Painting:{icon:X.A,color:"purple",bgColor:"bg-purple-50",borderColor:"border-purple-200",textColor:"text-purple-900",description:"Interior and exterior painting services"}};function $({businessId:a,services:b=[]}){let{state:c,updateService:f,nextStep:g,setLoading:i,setError:j}=p(),[k,l]=(0,e.useState)(c.categoryId||""),[m,n]=(0,e.useState)(c.serviceId||""),[o,q]=(0,e.useState)(b),r=o.reduce((a,b)=>{let c=b.category||"Other";return a[c]||(a[c]=[]),a[c].push(b),a},{}),s=Object.keys(r),t=o.find(a=>a.id===m),u=k&&r[k]||[];return(0,d.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"What do you need help with?"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Select the type of service you need"})]}),!k&&(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(a=>{let b=Z[a]||Z.Mechanical,c=b.icon,e=r[a]?.length||0;return(0,d.jsx)(L.Zp,{className:`cursor-pointer transition-all duration-200 hover:shadow-md ${b.borderColor} hover:border-blue-400`,onClick:()=>{l(a),n("")},children:(0,d.jsx)(L.Wu,{className:`p-6 ${b.bgColor}`,children:(0,d.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,d.jsx)("div",{className:`p-3 rounded-full ${b.bgColor} border ${b.borderColor}`,children:(0,d.jsx)(c,{className:`w-6 h-6 ${b.textColor}`})}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("h3",{className:`font-semibold ${b.textColor} mb-1`,children:a}),(0,d.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:b.description}),(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)(M.E,{variant:"secondary",className:"text-xs",children:[e," service",1!==e?"s":""]}),(0,d.jsx)(Y.A,{className:"w-4 h-4 text-gray-400"})]})]})]})})},a)})}),k&&(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("div",{className:"flex items-center space-x-3",children:(()=>{let a=Z[k]||Z.Mechanical,b=a.icon;return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:`p-2 rounded-full ${a.bgColor} border ${a.borderColor}`,children:(0,d.jsx)(b,{className:`w-5 h-5 ${a.textColor}`})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:k}),(0,d.jsx)("p",{className:"text-sm text-gray-600",children:a.description})]})]})})()}),(0,d.jsx)(h.$,{variant:"ghost",onClick:()=>{l(""),n("")},className:"text-gray-500 hover:text-gray-700",children:"Change Category"})]}),(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(a=>{let b=m===a.id;return(0,d.jsx)(L.Zp,{className:`cursor-pointer transition-all duration-200 hover:shadow-md ${b?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"}`,onClick:()=>{n(a.id)},children:(0,d.jsx)(L.Wu,{className:"p-4",children:(0,d.jsx)("div",{className:"flex items-start justify-between",children:(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,d.jsx)("h3",{className:"font-medium text-gray-900",children:a.name}),b&&(0,d.jsx)(y.A,{className:"w-5 h-5 text-blue-500"})]}),a.description&&(0,d.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:a.description}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a.duration_minutes&&(0,d.jsxs)(M.E,{variant:"outline",className:"text-xs",children:[Math.round(a.duration_minutes/60),"h ",a.duration_minutes%60,"min"]}),a.price_cents&&(0,d.jsxs)(M.E,{variant:"outline",className:"text-xs",children:["Starting at $",(a.price_cents/100).toLocaleString()]}),a.is_emergency&&(0,d.jsx)(M.E,{variant:"destructive",className:"text-xs",children:"24/7 Emergency"})]})]})})})},a.id)})}),m&&(0,d.jsx)("div",{className:"flex justify-center pt-6",children:(0,d.jsxs)(h.$,{onClick:()=>{k&&m&&(f(k,m),g())},size:"lg",className:"px-8",children:["Continue with ",t?.name,(0,d.jsx)(Y.A,{className:"w-4 h-4 ml-2"})]})})]}),0===s.length&&!c.isLoading&&(0,d.jsxs)("div",{className:"text-center py-12",children:[(0,d.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,d.jsx)(S.A,{className:"w-8 h-8 text-gray-400"})}),(0,d.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No services available"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Please contact us directly to discuss your service needs."})]})]})}var _=c(33847);function aa({businessId:a}){let{state:b,updateAddress:c,nextStep:f,setLoading:g,setError:i}=p(),[j,k]=(0,e.useState)({line1:b.address?.line1||"",line2:b.address?.line2||"",city:b.zipInfo?.city||b.address?.city||"",region:b.zipInfo?.region||b.address?.region||"",postalCode:b.zipInfo?.postalCode||b.address?.postalCode||"",countryCode:b.zipInfo?.countryCode||b.address?.countryCode||"US",accessNotes:b.address?.accessNotes||""}),[l,m]=(0,e.useState)(!1),[n,o]=(0,e.useState)(null),q=(a,b)=>{k(c=>({...c,[a]:b})),o(null),i()},s=async()=>{if(!j.line1?.trim())return i("Street address is required"),!1;if(!j.city?.trim())return i("City is required"),!1;if(!j.region?.trim())return i("State/Province is required"),!1;if(!j.postalCode?.trim())return i("Postal code is required"),!1;m(!0),g(!0);try{if(await new Promise(a=>setTimeout(a,1e3)),Math.random()>.2)return o({valid:!0,message:"Address validated successfully"}),!0;return o({valid:!1,message:"Address could not be verified. Please check and try again.",suggestions:[{line1:`${j.line1} (Suggested)`,city:j.city,region:j.region,postalCode:j.postalCode}]}),!1}catch(a){return console.error("Address validation error:",a),i("Unable to validate address. Please check your input."),!1}finally{m(!1),g(!1)}},u=async()=>{await s()&&j.line1&&j.city&&j.region&&j.postalCode&&(c({line1:j.line1,line2:j.line2,city:j.city,region:j.region,postalCode:j.postalCode,countryCode:j.countryCode||"US",accessNotes:j.accessNotes}),f())},v=j.line1?.trim()&&j.city?.trim()&&j.region?.trim()&&j.postalCode?.trim();return(0,d.jsxs)("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,d.jsx)(t.A,{className:"w-8 h-8 text-blue-600"})}),(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Where do you need service?"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Please provide the address where our technician should visit"})]}),b.zipInfo&&(0,d.jsx)(L.Zp,{className:"border-green-200 bg-green-50",children:(0,d.jsx)(L.Wu,{className:"p-4",children:(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)(y.A,{className:"w-5 h-5 text-green-600"}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("p",{className:"text-sm font-medium text-green-900",children:["Service confirmed for ",b.zipInfo.city,", ",b.zipInfo.region]}),(0,d.jsxs)("p",{className:"text-xs text-green-700",children:["Response time: ",b.zipInfo.minResponseTimeHours,"-",b.zipInfo.maxResponseTimeHours," hours"]})]})]})})}),(0,d.jsxs)(L.Zp,{children:[(0,d.jsx)(L.aR,{children:(0,d.jsxs)(L.ZB,{className:"flex items-center space-x-2",children:[(0,d.jsx)(r.A,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:"Service Address"})]})}),(0,d.jsxs)(L.Wu,{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address *"}),(0,d.jsx)(J.p,{value:j.line1||"",onChange:a=>q("line1",a.target.value),placeholder:"123 Main Street",className:"w-full"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Apartment, Suite, etc. (Optional)"}),(0,d.jsx)(J.p,{value:j.line2||"",onChange:a=>q("line2",a.target.value),placeholder:"Apt 4B, Suite 200, etc.",className:"w-full"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),(0,d.jsx)(J.p,{value:j.city||"",onChange:a=>q("city",a.target.value),placeholder:"City",className:"w-full"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State/Province *"}),(0,d.jsx)(J.p,{value:j.region||"",onChange:a=>q("region",a.target.value),placeholder:"State",className:"w-full"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP/Postal Code *"}),(0,d.jsx)(J.p,{value:j.postalCode||"",onChange:a=>q("postalCode",a.target.value),placeholder:"12345",className:"w-full"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Access Instructions (Optional)"}),(0,d.jsx)(_.T,{value:j.accessNotes||"",onChange:a=>q("accessNotes",a.target.value),placeholder:"Gate code, parking instructions, pet information, etc.",rows:3,className:"w-full"}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Help our technician find and access your property easily"})]})]})]}),n&&(0,d.jsx)(L.Zp,{className:n.valid?"border-green-200 bg-green-50":"border-orange-200 bg-orange-50",children:(0,d.jsx)(L.Wu,{className:"p-4",children:(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[n.valid?(0,d.jsx)(y.A,{className:"w-5 h-5 text-green-600 mt-0.5"}):(0,d.jsx)(D.A,{className:"w-5 h-5 text-orange-600 mt-0.5"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("p",{className:`text-sm font-medium ${n.valid?"text-green-900":"text-orange-900"}`,children:n.message}),n.suggestions&&n.suggestions.length>0&&(0,d.jsxs)("div",{className:"mt-3",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-orange-900 mb-2",children:"Did you mean:"}),(0,d.jsx)("div",{className:"space-y-2",children:n.suggestions.map((a,b)=>(0,d.jsx)("div",{className:"p-3 bg-white border border-orange-200 rounded-md cursor-pointer hover:bg-orange-25 transition-colors",onClick:()=>{k(b=>({...b,line1:a.line1,city:a.city,region:a.region,postalCode:a.postalCode})),o(null)},children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900",children:a.line1}),(0,d.jsxs)("p",{className:"text-xs text-gray-600",children:[a.city,", ",a.region," ",a.postalCode]})]}),(0,d.jsx)(h.$,{variant:"outline",size:"sm",children:"Use This"})]})},b))})]})]})]})})}),(0,d.jsx)("div",{className:"flex justify-center pt-4",children:(0,d.jsx)(h.$,{onClick:u,disabled:!v||l,size:"lg",className:"px-8",children:l?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Validating Address..."]}):"Continue to Date & Time"})}),(0,d.jsx)("div",{className:"text-center",children:(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"We'll validate this address to ensure our technician can reach you"})})]})}var ab=c(8294);function ac({businessId:a}){let{state:b,updateSlot:c,nextStep:f,setLoading:g,setError:i}=p(),[j,k]=(0,e.useState)(""),[l,m]=(0,e.useState)(null),[n,o]=(0,e.useState)("first_available"),[q,r]=(0,e.useState)(new Date),[s,t]=(0,e.useState)({}),[v,w]=(0,e.useState)(!1),x=a=>new Date(a).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),y=a=>new Date(a).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),z=(j&&s[j]||[]).filter(a=>a.available);return(0,d.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,d.jsx)(u.A,{className:"w-8 h-8 text-blue-600"})}),(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"When do you need us?"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Choose your preferred appointment time"})]}),(0,d.jsx)("div",{className:"flex justify-center",children:(0,d.jsxs)("div",{className:"bg-gray-100 rounded-lg p-1 flex",children:[(0,d.jsxs)(h.$,{variant:"first_available"===n?"default":"ghost",size:"sm",onClick:()=>o("first_available"),className:"rounded-md",children:[(0,d.jsx)(R.A,{className:"w-4 h-4 mr-2"}),"First Available"]}),(0,d.jsxs)(h.$,{variant:"calendar"===n?"default":"ghost",size:"sm",onClick:()=>o("calendar"),className:"rounded-md",children:[(0,d.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"All Appointments"]})]})}),v&&(0,d.jsx)(L.Zp,{children:(0,d.jsxs)(L.Wu,{className:"p-8 text-center",children:[(0,d.jsx)("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Loading available time slots..."})]})}),"first_available"===n&&!v&&(0,d.jsx)("div",{className:"space-y-4",children:l&&j?(0,d.jsxs)(L.Zp,{className:"border-green-200 bg-green-50",children:[(0,d.jsx)(L.aR,{children:(0,d.jsxs)(L.ZB,{className:"text-green-900 flex items-center",children:[(0,d.jsx)(R.A,{className:"w-5 h-5 mr-2"}),"Next Available Appointment"]})}),(0,d.jsx)(L.Wu,{children:(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-semibold text-green-900",children:x(j)}),(0,d.jsxs)("p",{className:"text-green-700",children:[y(l.start)," - ",y(l.end)]})]}),l.price&&(0,d.jsxs)(M.E,{variant:"secondary",className:"bg-green-100 text-green-800",children:["$",(l.price/100).toFixed(0)," starting"]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-green-700",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)(B.A,{className:"w-4 h-4 mr-1"}),"2 hours estimated"]}),b.zipInfo?.emergencyAvailable&&(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)(R.A,{className:"w-4 h-4 mr-1"}),"Emergency available"]})]})]})})]}):(0,d.jsx)(L.Zp,{className:"border-orange-200 bg-orange-50",children:(0,d.jsxs)(L.Wu,{className:"p-6 text-center",children:[(0,d.jsx)(D.A,{className:"w-8 h-8 text-orange-600 mx-auto mb-3"}),(0,d.jsx)("h3",{className:"font-semibold text-orange-900 mb-2",children:"No immediate availability"}),(0,d.jsx)("p",{className:"text-orange-700 mb-4",children:'Switch to "All Appointments" to see available times'}),(0,d.jsx)(h.$,{variant:"outline",onClick:()=>o("calendar"),className:"border-orange-300 text-orange-700 hover:bg-orange-100",children:"View Calendar"})]})})}),"calendar"===n&&!v&&(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,d.jsxs)(L.Zp,{children:[(0,d.jsx)(L.aR,{children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)(L.ZB,{children:q.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,d.jsxs)("div",{className:"flex space-x-2",children:[(0,d.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>r(new Date(q.getFullYear(),q.getMonth()-1)),children:(0,d.jsx)(ab.A,{className:"w-4 h-4"})}),(0,d.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>r(new Date(q.getFullYear(),q.getMonth()+1)),children:(0,d.jsx)(Y.A,{className:"w-4 h-4"})})]})]})}),(0,d.jsxs)(L.Wu,{children:[(0,d.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(a=>(0,d.jsx)("div",{className:"p-2 text-center text-sm font-medium text-gray-500",children:a},a))}),(0,d.jsx)("div",{className:"grid grid-cols-7 gap-1",children:(a=>{let b=a.getFullYear(),c=a.getMonth(),d=new Date(b,c,1),e=new Date(b,c+1,0).getDate(),f=d.getDay(),g=[];for(let a=0;a<f;a++)g.push(null);for(let a=1;a<=e;a++)g.push(new Date(b,c,a));return g})(q).map((a,b)=>{if(!a)return(0,d.jsx)("div",{className:"p-2"},b);let c=a.toISOString().split("T")[0],e=(s[a.toISOString().split("T")[0]]||[]).some(a=>a.available),f=j===c,g=(a=>{let b=new Date;return b.setHours(0,0,0,0),a<b})(a)||!e;return(0,d.jsxs)("button",{onClick:()=>!g&&void(k(c),m(null)),disabled:g,className:`
                        p-2 text-sm rounded-md transition-colors relative
                        ${g?"text-gray-300 cursor-not-allowed":"text-gray-900 hover:bg-blue-50 cursor-pointer"}
                        ${f?"bg-blue-500 text-white hover:bg-blue-600":""}
                        ${(a=>{let b=new Date;return a.toDateString()===b.toDateString()})(a)&&!f?"bg-blue-100 font-semibold":""}
                      `,children:[a.getDate(),e&&!f&&(0,d.jsx)("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-green-500 rounded-full"})]},b)})})]})]}),(0,d.jsxs)(L.Zp,{children:[(0,d.jsx)(L.aR,{children:(0,d.jsxs)(L.ZB,{className:"flex items-center",children:[(0,d.jsx)(B.A,{className:"w-5 h-5 mr-2"}),"Available Times"]})}),(0,d.jsx)(L.Wu,{children:j?z.length>0?(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:x(j)}),z.map((a,b)=>(0,d.jsx)("button",{onClick:()=>{m(a)},className:`
                          w-full p-3 rounded-md border text-left transition-colors
                          ${l===a?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-blue-25"}
                        `,children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("p",{className:"font-medium",children:[y(a.start)," - ",y(a.end)]}),a.isEmergency&&(0,d.jsx)(M.E,{variant:"destructive",className:"text-xs mt-1",children:"After Hours"})]}),a.price&&(0,d.jsxs)(M.E,{variant:"outline",className:"text-xs",children:["$",(a.price/100).toFixed(0)]})]})},b))]}):(0,d.jsxs)("div",{className:"text-center py-8",children:[(0,d.jsx)(B.A,{className:"w-8 h-8 text-gray-400 mx-auto mb-3"}),(0,d.jsx)("p",{className:"text-gray-500",children:"No available times on this date"})]}):(0,d.jsxs)("div",{className:"text-center py-8",children:[(0,d.jsx)(u.A,{className:"w-8 h-8 text-gray-400 mx-auto mb-3"}),(0,d.jsx)("p",{className:"text-gray-500",children:"Select a date to see available times"})]})})]})]}),l&&j&&(0,d.jsx)("div",{className:"flex justify-center pt-4",children:(0,d.jsx)(h.$,{onClick:()=>{l&&j&&(c({start:l.start,end:l.end,timezone:b.zipInfo?.timezone||"America/New_York"}),f())},size:"lg",className:"px-8",children:"Continue to Contact Info"})}),b.zipInfo?.emergencyAvailable&&(0,d.jsx)(L.Zp,{className:"border-red-200 bg-red-50",children:(0,d.jsx)(L.Wu,{className:"p-4",children:(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)(R.A,{className:"w-5 h-5 text-red-600"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-red-900",children:"Need emergency service?"}),(0,d.jsxs)("p",{className:"text-xs text-red-700",children:["Call us directly for immediate assistance: ",b.zipInfo.emergencyAvailable?"Available 24/7":"Available during business hours"]})]})]})})})]})}var ad=c(44688),ae=c(74703),af=c(15514);let ag=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(ae.bL,{ref:c,className:(0,af.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...b,children:(0,d.jsx)(ae.C1,{className:(0,af.cn)("flex items-center justify-center text-current"),children:(0,d.jsx)(z.A,{className:"h-4 w-4"})})}));function ah({businessId:a,businessName:b="our team"}){let{state:c,updateContact:f,nextStep:g,setError:i}=p(),[j,k]=(0,e.useState)({firstName:c.contact?.firstName||"",lastName:c.contact?.lastName||"",phoneE164:c.contact?.phoneE164||"",email:c.contact?.email||"",smsConsent:c.contact?.smsConsent||!1,marketingConsent:c.contact?.marketingConsent||!1}),[l,m]=(0,e.useState)(""),[n,o]=(0,e.useState)({}),q=(a,b)=>{k(c=>({...c,[a]:b})),n[a]&&o(b=>({...b,[a]:""})),i()},r=j.firstName?.trim()&&j.lastName?.trim()&&j.phoneE164&&j.email?.trim();return(0,d.jsxs)("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,d.jsx)(v.A,{className:"w-8 h-8 text-blue-600"})}),(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"How can we reach you?"}),(0,d.jsx)("p",{className:"text-gray-600",children:"We'll use this information to confirm your appointment and send updates"})]}),(0,d.jsxs)(L.Zp,{children:[(0,d.jsx)(L.aR,{children:(0,d.jsxs)(L.ZB,{className:"flex items-center space-x-2",children:[(0,d.jsx)(v.A,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:"Contact Information"})]})}),(0,d.jsxs)(L.Wu,{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),(0,d.jsx)(J.p,{value:j.firstName||"",onChange:a=>q("firstName",a.target.value),placeholder:"John",className:n.firstName?"border-red-500":""}),n.firstName&&(0,d.jsx)("p",{className:"text-sm text-red-600 mt-1",children:n.firstName})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),(0,d.jsx)(J.p,{value:j.lastName||"",onChange:a=>q("lastName",a.target.value),placeholder:"Doe",className:n.lastName?"border-red-500":""}),n.lastName&&(0,d.jsx)("p",{className:"text-sm text-red-600 mt-1",children:n.lastName})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(E.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,d.jsx)(J.p,{value:l,onChange:a=>(a=>{m((a=>{let b=a.replace(/\D/g,"");return b.length<=3?b:b.length<=6?`(${b.slice(0,3)}) ${b.slice(3)}`:`(${b.slice(0,3)}) ${b.slice(3,6)}-${b.slice(6,10)}`})(a));let b=a.replace(/\D/g,"");10===b.length?q("phoneE164",`+1${b}`):11===b.length&&b.startsWith("1")?q("phoneE164",`+${b}`):q("phoneE164","")})(a.target.value),placeholder:"(555) 123-4567",className:`pl-10 ${n.phoneE164?"border-red-500":""}`,maxLength:14})]}),n.phoneE164&&(0,d.jsx)("p",{className:"text-sm text-red-600 mt-1",children:n.phoneE164}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"We'll use this to confirm your appointment and provide updates"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(F.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,d.jsx)(J.p,{type:"email",value:j.email||"",onChange:a=>q("email",a.target.value),placeholder:"john.doe@example.com",className:`pl-10 ${n.email?"border-red-500":""}`})]}),n.email&&(0,d.jsx)("p",{className:"text-sm text-red-600 mt-1",children:n.email}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"For appointment confirmations and service receipts"})]})]})]}),(0,d.jsxs)(L.Zp,{children:[(0,d.jsx)(L.aR,{children:(0,d.jsxs)(L.ZB,{className:"flex items-center space-x-2",children:[(0,d.jsx)(ad.A,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:"Communication Preferences"})]})}),(0,d.jsxs)(L.Wu,{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)(ag,{id:"sms-consent",checked:j.smsConsent,onCheckedChange:a=>q("smsConsent",a),className:"mt-1"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("label",{htmlFor:"sms-consent",className:"text-sm font-medium text-gray-900 cursor-pointer",children:"Send me text message updates about my appointment"}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Get real-time updates about your technician's arrival time and service status. Standard message rates may apply. You can opt out anytime."})]})]}),(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)(ag,{id:"marketing-consent",checked:j.marketingConsent,onCheckedChange:a=>q("marketingConsent",a),className:"mt-1"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("label",{htmlFor:"marketing-consent",className:"text-sm font-medium text-gray-900 cursor-pointer",children:"Send me promotional offers and maintenance reminders"}),(0,d.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Receive seasonal maintenance tips, special offers, and service reminders from ",b,". You can unsubscribe anytime."]})]})]}),(0,d.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-3",children:(0,d.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,d.jsx)(T.A,{className:"w-4 h-4 text-gray-500 mt-0.5"}),(0,d.jsx)("div",{children:(0,d.jsxs)("p",{className:"text-xs text-gray-600",children:[(0,d.jsx)("strong",{children:"Privacy Notice:"})," Your information is secure and will only be used to provide service and communicate about your appointment. We never sell or share your data with third parties."]})})]})})]})]}),c.zipInfo&&c.slot&&(0,d.jsx)(L.Zp,{className:"border-blue-200 bg-blue-50",children:(0,d.jsx)(L.Wu,{className:"p-4",children:(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)(y.A,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Appointment Summary"}),(0,d.jsxs)("div",{className:"text-xs text-blue-700 space-y-1",children:[(0,d.jsxs)("p",{children:["\uD83D\uDCCD ",c.address?.line1,", ",c.address?.city,", ",c.address?.region]}),(0,d.jsxs)("p",{children:["\uD83D\uDCC5 ",new Date(c.slot.start).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),(0,d.jsxs)("p",{children:["\uD83D\uDD50 ",new Date(c.slot.start).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})," - ",new Date(c.slot.end).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]})]})]})]})})}),(0,d.jsx)("div",{className:"flex justify-center pt-4",children:(0,d.jsx)(h.$,{onClick:()=>{(()=>{let a={};return j.firstName?.trim()||(a.firstName="First name is required"),j.lastName?.trim()||(a.lastName="Last name is required"),j.phoneE164?j.phoneE164.match(/^\+1\d{10}$/)||(a.phoneE164="Please enter a valid US phone number"):a.phoneE164="Phone number is required",j.email?.trim()?j.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)||(a.email="Please enter a valid email address"):a.email="Email address is required",o(a),0===Object.keys(a).length})()&&(f({firstName:j.firstName,lastName:j.lastName,phoneE164:j.phoneE164,email:j.email,smsConsent:j.smsConsent,marketingConsent:j.marketingConsent}),g())},disabled:!r,size:"lg",className:"px-8",children:"Continue to Details"})}),(0,d.jsx)("div",{className:"text-center",children:(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"All fields marked with * are required to complete your booking"})})]})}ag.displayName=ae.bL.displayName;var ai=c(36734),aj=c(43700);function ak({businessId:a,businessName:b="our team"}){let{state:c,updateDetails:f,nextStep:i,setError:j}=p(),[k,l]=(0,e.useState)({notes:c.details?.notes||"",attachments:c.details?.attachments||[],urgencyLevel:c.details?.urgencyLevel||"normal"}),m=(0,e.useRef)(null),[n,o]=(0,e.useState)(!1),[q,r]=(0,e.useState)([]),s=[{value:"flexible",label:"Flexible",description:"No rush, schedule when convenient",color:"bg-green-50 border-green-200 text-green-900",icon:"\uD83D\uDCC5"},{value:"normal",label:"Normal",description:"Standard service timing",color:"bg-blue-50 border-blue-200 text-blue-900",icon:"\uD83D\uDD27"},{value:"urgent",label:"Urgent",description:"Need service soon, willing to pay priority fee",color:"bg-orange-50 border-orange-200 text-orange-900",icon:"âš¡"},{value:"emergency",label:"Emergency",description:"Immediate attention required",color:"bg-red-50 border-red-200 text-red-900",icon:"\uD83D\uDEA8"}],t=async a=>{let b=Array.from(a.target.files||[]);if(0===b.length)return;o(!0),r([]);let c=["image/jpeg","image/png","image/gif","video/mp4","video/quicktime"],d=k.attachments||[],e=[],f=[];for(let a of b){if(d.length+f.length>=5){e.push("Maximum 5 files allowed");break}if(a.size>0xa00000){e.push(`${a.name} is too large (max 10MB)`);continue}if(!c.includes(a.type)){e.push(`${a.name} is not a supported file type`);continue}f.push(a)}e.length>0&&r(e),f.length>0&&(await new Promise(a=>setTimeout(a,1e3)),l(a=>({...a,attachments:[...a.attachments||[],...f]}))),o(!1),m.current&&(m.current.value="")},u=s.find(a=>a.value===k.urgencyLevel);return(0,d.jsxs)("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,d.jsx)(w.A,{className:"w-8 h-8 text-blue-600"})}),(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Tell us about the problem"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Help our technician prepare by describing the issue and sharing photos if helpful"})]}),(0,d.jsxs)(L.Zp,{children:[(0,d.jsx)(L.aR,{children:(0,d.jsxs)(L.ZB,{className:"flex items-center space-x-2",children:[(0,d.jsx)(w.A,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:"Problem Description"})]})}),(0,d.jsx)(L.Wu,{className:"space-y-4",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Describe the issue (Optional)"}),(0,d.jsx)(_.T,{value:k.notes||"",onChange:a=>{var b;return b=a.target.value,void(l(a=>({...a,notes:b})),j())},placeholder:"Tell us what's happening... For example: 'Air conditioner not cooling', 'Strange noise from water heater', 'Electrical outlet not working', etc.",rows:4,className:"w-full"}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"The more details you provide, the better we can prepare for your service call"})]})})]}),(0,d.jsxs)(L.Zp,{children:[(0,d.jsx)(L.aR,{children:(0,d.jsxs)(L.ZB,{className:"flex items-center space-x-2",children:[(0,d.jsx)(R.A,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:"How urgent is this?"})]})}),(0,d.jsxs)(L.Wu,{children:[(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.map(a=>(0,d.jsx)("button",{onClick:()=>{var b;return b=a.value,void l(a=>({...a,urgencyLevel:b}))},className:`
                  p-4 rounded-lg border-2 text-left transition-all duration-200
                  ${k.urgencyLevel===a.value?a.color+" border-current":"bg-white border-gray-200 hover:border-gray-300"}
                `,children:(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)("span",{className:"text-2xl",children:a.icon}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"font-semibold text-sm mb-1",children:a.label}),(0,d.jsx)("p",{className:"text-xs text-gray-600",children:a.description})]})]})},a.value))}),"emergency"===k.urgencyLevel&&(0,d.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,d.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,d.jsx)(D.A,{className:"w-4 h-4 text-red-600 mt-0.5"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-red-900",children:"Emergency Service"}),(0,d.jsx)("p",{className:"text-xs text-red-700 mt-1",children:"Emergency calls may include additional fees and will be prioritized for immediate response."})]})]})})]})]}),(0,d.jsxs)(L.Zp,{children:[(0,d.jsx)(L.aR,{children:(0,d.jsxs)(L.ZB,{className:"flex items-center space-x-2",children:[(0,d.jsx)(ai.A,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:"Photos & Videos (Optional)"})]})}),(0,d.jsx)(L.Wu,{className:"space-y-4",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Share photos or videos to help our technician understand the problem better"}),(0,d.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[(0,d.jsx)("input",{ref:m,type:"file",multiple:!0,accept:"image/*,video/*",onChange:t,className:"hidden"}),(0,d.jsx)(aj.A,{className:"w-8 h-8 text-gray-400 mx-auto mb-3"}),(0,d.jsx)(h.$,{onClick:()=>{m.current?.click()},disabled:n,variant:"outline",className:"mb-2",children:n?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin mr-2"}),"Uploading..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(ai.A,{className:"w-4 h-4 mr-2"}),"Choose Files"]})}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Images and videos up to 10MB each â€¢ Max 5 files"})]}),q.length>0&&(0,d.jsx)("div",{className:"mt-3 space-y-1",children:q.map((a,b)=>(0,d.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-red-600",children:[(0,d.jsx)(D.A,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:a})]},b))}),k.attachments&&k.attachments.length>0&&(0,d.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,d.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:["Uploaded Files (",k.attachments.length,"/5)"]}),k.attachments.map((a,b)=>(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("span",{className:"text-lg",children:a.type.startsWith("image/")?"\uD83D\uDDBCï¸":a.type.startsWith("video/")?"\uD83C\uDFA5":"\uD83D\uDCC4"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900",children:a.name}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:(a=>{if(0===a)return"0 Bytes";let b=Math.floor(Math.log(a)/Math.log(1024));return parseFloat((a/Math.pow(1024,b)).toFixed(2))+" "+["Bytes","KB","MB","GB"][b]})(a.size)})]})]}),(0,d.jsx)(h.$,{onClick:()=>{l(a=>({...a,attachments:a.attachments?.filter((a,c)=>c!==b)||[]}))},variant:"ghost",size:"sm",className:"text-gray-400 hover:text-red-600",children:(0,d.jsx)(g.A,{className:"w-4 h-4"})})]},b))]})]})})]}),c.contact&&c.slot&&(0,d.jsx)(L.Zp,{className:"border-blue-200 bg-blue-50",children:(0,d.jsx)(L.Wu,{className:"p-4",children:(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)(y.A,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Ready to Review"}),(0,d.jsxs)("div",{className:"text-xs text-blue-700 space-y-1",children:[(0,d.jsxs)("p",{children:["\uD83D\uDC64 ",c.contact.firstName," ",c.contact.lastName]}),(0,d.jsxs)("p",{children:["\uD83D\uDCDE ",c.contact.phoneE164]}),(0,d.jsxs)("p",{children:["\uD83D\uDCE7 ",c.contact.email]}),u&&(0,d.jsxs)("div",{className:"flex items-center space-x-1 mt-2",children:[(0,d.jsx)("span",{children:u.icon}),(0,d.jsxs)(M.E,{variant:"outline",className:"text-xs",children:[u.label," Priority"]})]})]})]})]})})}),(0,d.jsx)("div",{className:"flex justify-center pt-4",children:(0,d.jsx)(h.$,{onClick:()=>{f({notes:k.notes||"",attachments:k.attachments||[],urgencyLevel:k.urgencyLevel||"normal"}),i()},size:"lg",className:"px-8",children:"Review Booking"})}),(0,d.jsx)("div",{className:"text-center",children:(0,d.jsx)("p",{className:"text-sm text-gray-500",children:"Photos and descriptions help our technicians come prepared with the right tools and parts"})})]})}var al=c(14343);class am{constructor(){this.config=(0,G.Jh)()}async getAvailability(a){let b=(0,G.M7)("bookings/availability"),c=await fetch(b,{method:"POST",headers:(0,G.KZ)(),body:JSON.stringify(a)});if(!c.ok)throw Error((await c.json().catch(()=>({detail:"Failed to get availability"}))).detail||"Failed to get availability");return c.json()}async getNextAvailableSlot(a,b,c){let d=new URLSearchParams({business_id:a,service_id:b});c&&d.append("preferred_date",c);let e=(0,G.M7)(`bookings/availability/next-slot?${d}`),f=await fetch(e,{method:"GET",headers:(0,G.KZ)()});if(!f.ok)throw Error((await f.json().catch(()=>({detail:"No available slots found"}))).detail||"No available slots found");return f.json()}async createBooking(a,b=!1){let c=new URLSearchParams;b&&c.append("auto_confirm","true");let d=`bookings${c.toString()?"?"+c.toString():""}`,e=(0,G.M7)(d),f=await fetch(e,{method:"POST",headers:(0,G.KZ)(),body:JSON.stringify(a)});if(!f.ok)throw Error((await f.json().catch(()=>({detail:"Failed to create booking"}))).detail||"Failed to create booking");return f.json()}async getBooking(a){let b=(0,G.M7)(`bookings/${a}`),c=await fetch(b,{method:"GET",headers:(0,G.KZ)()});if(!c.ok)throw Error((await c.json().catch(()=>({detail:"Booking not found"}))).detail||"Booking not found");return c.json()}async rescheduleBooking(a,b,c,d=!0){let e=(0,G.M7)(`bookings/${a}/reschedule`),f=await fetch(e,{method:"PATCH",headers:(0,G.KZ)(),body:JSON.stringify({booking_id:a,new_scheduled_at:b,reason:c,notify_customer:d})});if(!f.ok)throw Error((await f.json().catch(()=>({detail:"Failed to reschedule booking"}))).detail||"Failed to reschedule booking");return f.json()}async cancelBooking(a,b,c="customer",d,e=!0){let f=(0,G.M7)(`bookings/${a}/cancel`),g=await fetch(f,{method:"PATCH",headers:(0,G.KZ)(),body:JSON.stringify({booking_id:a,reason:b,cancelled_by:c,refund_amount:d,notify_customer:e})});if(!g.ok)throw Error((await g.json().catch(()=>({detail:"Failed to cancel booking"}))).detail||"Failed to cancel booking");return g.json()}generateIdempotencyKey(){return`booking_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}formatDate(a){return a.toISOString().split("T")[0]}formatDateTime(a){return a.toISOString()}parseDateTime(a){return new Date(a)}async getUserIpAddress(){try{let a=await fetch("https://api.ipify.org?format=json");return(await a.json()).ip}catch(a){console.warn("Failed to get user IP address:",a);return}}getUserAgent(){return"undefined"!=typeof navigator?navigator.userAgent:""}}let an=new am;function ao({businessId:a,businessName:b="Professional Services",businessPhone:c,businessEmail:f}){let{state:g,updateFlags:i,nextStep:j,setLoading:k,setError:l}=p(),[m,n]=(0,e.useState)(!1),o=async()=>{if(!g.termsAccepted)return void l("Please accept the terms of service to continue");if(g.zipInfo?.dispatchFeeCents&&g.zipInfo.dispatchFeeCents>0&&!g.dispatchFeeAccepted)return void l("Please accept the dispatch fee to continue");n(!0),k(!0),l();try{let b={business_id:a,service_id:g.serviceId,requested_at:new Date().toISOString(),customer_name:`${g.contact?.firstName||""} ${g.contact?.lastName||""}`.trim(),customer_email:g.contact?.email||"",customer_phone:g.contact?.phoneE164||"",service_address:[g.address?.line1||"",g.address?.line2,`${g.address?.city||""}, ${g.address?.region||""} ${g.address?.postalCode||""}`].filter(Boolean).join(", "),service_city:g.address?.city,service_state:g.address?.region,service_zip:g.address?.postalCode,problem_description:g.details?.notes||"",special_instructions:void 0,access_instructions:g.address?.accessNotes,preferred_contact_method:"phone",sms_consent:!!g.contact?.smsConsent,email_consent:!0,source:"website",user_agent:"undefined"!=typeof navigator?navigator.userAgent:void 0,ip_address:void 0,idempotency_key:an.generateIdempotencyKey()};try{let a=await an.createBooking(b,!0);console.log("Booking created successfully:",a)}catch(c){console.warn("API not available, using mock booking:",c);let b=`BK-${Date.now().toString().slice(-6)}`;console.log("Mock booking created:",b),console.log("Mock booking created:",{bookingId:b,businessId:a,zipInfo:g.zipInfo,serviceId:g.serviceId,address:g.address,slot:g.slot,contact:g.contact,details:g.details,termsAccepted:g.termsAccepted,dispatchFeeAccepted:g.dispatchFeeAccepted})}j()}catch(a){console.error("Booking error:",a),l("Failed to submit booking. Please try again.")}finally{n(!1),k(!1)}},q=a=>new Date(a).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),s=(a=>{let b={flexible:{label:"Flexible",icon:"\uD83D\uDCC5",color:"bg-green-100 text-green-800"},normal:{label:"Normal",icon:"\uD83D\uDD27",color:"bg-blue-100 text-blue-800"},urgent:{label:"Urgent",icon:"âš¡",color:"bg-orange-100 text-orange-800"},emergency:{label:"Emergency",icon:"\uD83D\uDEA8",color:"bg-red-100 text-red-800"}};return b[a]||b.normal})(g.details?.urgencyLevel||"normal"),t=g.zipInfo?.dispatchFeeCents||0;return(0,d.jsxs)("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,d.jsx)(x.A,{className:"w-8 h-8 text-blue-600"})}),(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Review Your Booking"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Please review all details before confirming your service appointment"})]}),(0,d.jsxs)(L.Zp,{children:[(0,d.jsx)(L.aR,{children:(0,d.jsxs)(L.ZB,{className:"flex items-center space-x-2",children:[(0,d.jsx)(u.A,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:"Service Details"})]})}),(0,d.jsxs)(L.Wu,{className:"space-y-4",children:[g.slot&&(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)(B.A,{className:"w-5 h-5 text-gray-500 mt-0.5"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-gray-900",children:new Date(g.slot.start).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,d.jsxs)("p",{className:"text-sm text-gray-600",children:[q(g.slot.start)," - ",q(g.slot.end)]}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:g.slot.timezone})]})]}),g.address&&(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)(r.A,{className:"w-5 h-5 text-gray-500 mt-0.5"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-gray-900",children:"Service Address"}),(0,d.jsxs)("p",{className:"text-sm text-gray-600",children:[g.address.line1,g.address.line2&&`, ${g.address.line2}`]}),(0,d.jsxs)("p",{className:"text-sm text-gray-600",children:[g.address.city,", ",g.address.region," ",g.address.postalCode]}),g.address.accessNotes&&(0,d.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[(0,d.jsx)("strong",{children:"Access Notes:"})," ",g.address.accessNotes]})]})]}),(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)(w.A,{className:"w-5 h-5 text-gray-500 mt-0.5"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-gray-900",children:"Service Category"}),(0,d.jsx)("p",{className:"text-sm text-gray-600",children:g.categoryId}),g.details?.notes&&(0,d.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[(0,d.jsx)("strong",{children:"Notes:"})," ",g.details.notes]})]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)(R.A,{className:"w-5 h-5 text-gray-500"}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("span",{className:"font-medium text-gray-900",children:"Priority:"}),(0,d.jsxs)(M.E,{className:s.color,children:[s.icon," ",s.label]})]})]}),g.details?.attachments&&g.details.attachments.length>0&&(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)(w.A,{className:"w-5 h-5 text-gray-500 mt-0.5"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-gray-900",children:"Attachments"}),(0,d.jsxs)("p",{className:"text-sm text-gray-600",children:[g.details.attachments.length," file",1!==g.details.attachments.length?"s":""," uploaded"]})]})]})]})]}),(0,d.jsxs)(L.Zp,{children:[(0,d.jsx)(L.aR,{children:(0,d.jsxs)(L.ZB,{className:"flex items-center space-x-2",children:[(0,d.jsx)(v.A,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:"Contact Information"})]})}),(0,d.jsx)(L.Wu,{className:"space-y-3",children:g.contact&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)(v.A,{className:"w-4 h-4 text-gray-500"}),(0,d.jsxs)("span",{className:"text-sm",children:[g.contact.firstName," ",g.contact.lastName]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)(E.A,{className:"w-4 h-4 text-gray-500"}),(0,d.jsx)("span",{className:"text-sm",children:g.contact.phoneE164}),g.contact.smsConsent&&(0,d.jsx)(M.E,{variant:"outline",className:"text-xs",children:"SMS Updates"})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)(F.A,{className:"w-4 h-4 text-gray-500"}),(0,d.jsx)("span",{className:"text-sm",children:g.contact.email})]})]})})]}),(0,d.jsxs)(L.Zp,{children:[(0,d.jsx)(L.aR,{children:(0,d.jsxs)(L.ZB,{className:"flex items-center space-x-2",children:[(0,d.jsx)(al.A,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:"Service Fees"})]})}),(0,d.jsxs)(L.Wu,{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)("span",{className:"text-sm text-gray-600",children:"Service Call"}),(0,d.jsx)("span",{className:"text-sm font-medium",children:"Quoted on-site"})]}),t>0&&(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)("span",{className:"text-sm text-gray-600",children:"Dispatch Fee"}),(0,d.jsxs)("span",{className:"text-sm font-medium",children:["$",(t/100).toFixed(2)]})]}),(0,d.jsxs)("div",{className:"border-t pt-2",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsx)("span",{className:"font-medium",children:"Total Due Today"}),(0,d.jsxs)("span",{className:"font-bold text-lg",children:["$",t>0?(t/100).toFixed(2):"0.00"]})]}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Service charges will be quoted after diagnosis"})]})]})]}),(0,d.jsxs)(L.Zp,{children:[(0,d.jsx)(L.aR,{children:(0,d.jsxs)(L.ZB,{className:"flex items-center space-x-2",children:[(0,d.jsx)(T.A,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:"Confirmations"})]})}),(0,d.jsxs)(L.Wu,{className:"space-y-4",children:[t>0&&(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)(ag,{id:"dispatch-fee",checked:g.dispatchFeeAccepted,onCheckedChange:a=>{i({dispatchFeeAccepted:a})},className:"mt-1"}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{htmlFor:"dispatch-fee",className:"text-sm font-medium text-gray-900 cursor-pointer",children:["I agree to pay the $",(t/100).toFixed(2)," dispatch fee"]}),(0,d.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This fee covers the cost of sending a technician to your location and may be applied toward service charges."})]})]}),(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)(ag,{id:"terms",checked:g.termsAccepted,onCheckedChange:a=>{i({termsAccepted:a})},className:"mt-1"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"terms",className:"text-sm font-medium text-gray-900 cursor-pointer",children:"I accept the terms of service and privacy policy"}),(0,d.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["By booking this service, you agree to our"," ",(0,d.jsx)("a",{href:"#",className:"text-blue-600 hover:underline",children:"terms of service"})," and"," ",(0,d.jsx)("a",{href:"#",className:"text-blue-600 hover:underline",children:"privacy policy"}),"."]})]})]})]})]}),(0,d.jsx)(L.Zp,{className:"border-blue-200 bg-blue-50",children:(0,d.jsx)(L.Wu,{className:"p-4",children:(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)(y.A,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Questions about your booking?"}),(0,d.jsxs)("div",{className:"text-xs text-blue-700 space-y-1",children:[c&&(0,d.jsxs)("p",{children:["\uD83D\uDCDE Call us: ",c]}),f&&(0,d.jsxs)("p",{children:["\uD83D\uDCE7 Email: ",f]}),(0,d.jsxs)("p",{children:["We'll send confirmation details to ",g.contact?.email]})]})]})]})})}),(0,d.jsx)("div",{className:"flex justify-center pt-4",children:(0,d.jsx)(h.$,{onClick:o,disabled:!g.termsAccepted||m||t>0&&!g.dispatchFeeAccepted,size:"lg",className:"px-8",children:m?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Confirming Booking..."]}):"Confirm Booking"})}),(0,d.jsx)("div",{className:"text-center",children:(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"\uD83D\uDD12 Your information is secure and encrypted. We never store payment details."})})]})}var ap=c(30733),aq=c(72310);function ar({businessId:a,businessName:b="Professional Services",businessPhone:c,businessEmail:f,onClose:g}){let{state:i,resetWizard:j}=p(),[k]=(0,e.useState)(()=>"BK-"+Math.random().toString(36).substr(2,9).toUpperCase()),[l,m]=(0,e.useState)(!1),n=a=>new Date(a).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o=a=>new Date(a).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),q=async()=>{let a={title:`${b} Service Appointment`,text:`I have a service appointment scheduled for ${n(i.slot?.start||"")} at ${o(i.slot?.start||"")}`,url:window.location.href};if(navigator.share)try{await navigator.share(a)}catch(a){console.log("Error sharing:",a)}else navigator.clipboard.writeText(`${a.title}
${a.text}
Booking ID: ${k}`),alert("Booking details copied to clipboard!")};return(0,d.jsxs)("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,d.jsx)(y.A,{className:"w-12 h-12 text-green-600"})}),(0,d.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Booking Confirmed!"}),(0,d.jsx)("p",{className:"text-lg text-gray-600 mb-4",children:"Your service appointment has been scheduled"}),(0,d.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 inline-block",children:(0,d.jsxs)("p",{className:"text-sm font-medium text-green-900",children:["Booking ID: ",(0,d.jsx)("span",{className:"font-mono",children:k})]})})]}),(0,d.jsxs)(L.Zp,{className:"border-green-200",children:[(0,d.jsx)(L.aR,{className:"bg-green-50",children:(0,d.jsxs)(L.ZB,{className:"flex items-center space-x-2 text-green-900",children:[(0,d.jsx)(u.A,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:"Your Appointment"})]})}),(0,d.jsxs)(L.Wu,{className:"p-6 space-y-4",children:[i.slot&&(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)(B.A,{className:"w-5 h-5 text-gray-500 mt-0.5"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-semibold text-gray-900 text-lg",children:n(i.slot.start)}),(0,d.jsxs)("p",{className:"text-gray-600",children:[o(i.slot.start)," - ",o(i.slot.end)]}),(0,d.jsx)(M.E,{variant:"outline",className:"mt-1",children:i.slot.timezone})]})]}),i.address&&(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)(r.A,{className:"w-5 h-5 text-gray-500 mt-0.5"}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("p",{className:"font-medium text-gray-900",children:[i.address.line1,i.address.line2&&`, ${i.address.line2}`]}),(0,d.jsxs)("p",{className:"text-gray-600",children:[i.address.city,", ",i.address.region," ",i.address.postalCode]})]})]}),(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)(ap.A,{className:"w-5 h-5 text-gray-500 mt-0.5"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-gray-900",children:"Service Type"}),(0,d.jsx)("p",{className:"text-gray-600",children:i.categoryId}),i.details?.urgencyLevel&&"normal"!==i.details.urgencyLevel&&(0,d.jsxs)(M.E,{variant:"outline",className:"mt-1 capitalize",children:[i.details.urgencyLevel," Priority"]})]})]})]})]}),(0,d.jsxs)(L.Zp,{children:[(0,d.jsx)(L.aR,{children:(0,d.jsxs)(L.ZB,{className:"flex items-center space-x-2",children:[(0,d.jsx)(ad.A,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:"What Happens Next"})]})}),(0,d.jsx)(L.Wu,{className:"space-y-4",children:(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,d.jsx)("span",{className:"text-xs font-bold text-blue-600",children:"1"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-gray-900",children:"Confirmation Email"}),(0,d.jsxs)("p",{className:"text-sm text-gray-600",children:["We've sent confirmation details to ",i.contact?.email]})]})]}),(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,d.jsx)("span",{className:"text-xs font-bold text-blue-600",children:"2"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-gray-900",children:"Technician Assignment"}),(0,d.jsxs)("p",{className:"text-sm text-gray-600",children:["A qualified technician will be assigned ",i.zipInfo?`${i.zipInfo.minResponseTimeHours}-${i.zipInfo.maxResponseTimeHours} hours`:"within 24 hours"]})]})]}),(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,d.jsx)("span",{className:"text-xs font-bold text-blue-600",children:"3"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-gray-900",children:"Pre-Arrival Contact"}),(0,d.jsx)("p",{className:"text-sm text-gray-600",children:i.contact?.smsConsent?"You'll receive SMS updates and a call 30 minutes before arrival":"You'll receive a call 30 minutes before arrival"})]})]}),(0,d.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,d.jsx)("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,d.jsx)("span",{className:"text-xs font-bold text-blue-600",children:"4"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"font-medium text-gray-900",children:"Service Completion"}),(0,d.jsx)("p",{className:"text-sm text-gray-600",children:"After service, you'll receive a detailed report and invoice"})]})]})]})})]}),(0,d.jsx)(L.Zp,{className:"border-blue-200 bg-blue-50",children:(0,d.jsx)(L.Wu,{className:"p-4",children:(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Need to make changes or have questions?"}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-2 sm:space-y-0 sm:space-x-4 text-sm text-blue-700",children:[c&&(0,d.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,d.jsx)(E.A,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:c})]}),f&&(0,d.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,d.jsx)(F.A,{className:"w-4 h-4"}),(0,d.jsx)("span",{children:f})]})]}),(0,d.jsxs)("p",{className:"text-xs text-blue-600 mt-2",children:["Reference Booking ID: ",k]})]})})}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[(0,d.jsxs)(h.$,{onClick:()=>{let a=(()=>{if(!i.slot)return"";let a=new Date(i.slot.start),d=new Date(i.slot.end),e=a=>a.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",g=encodeURIComponent(`${b} Service Appointment`),h=encodeURIComponent(`Service: ${i.categoryId}
Address: ${i.address?.line1}, ${i.address?.city}, ${i.address?.region}
Booking ID: ${k}
Contact: ${c||f||""}`),j=encodeURIComponent(`${i.address?.line1}, ${i.address?.city}, ${i.address?.region} ${i.address?.postalCode}`);return`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${g}&dates=${e(a)}/${e(d)}&details=${h}&location=${j}`})();window.open(a,"_blank")},variant:"outline",className:"flex-1",children:[(0,d.jsx)(u.A,{className:"w-4 h-4 mr-2"}),"Add to Calendar"]}),(0,d.jsxs)(h.$,{onClick:q,variant:"outline",className:"flex-1",children:[(0,d.jsx)(aq.A,{className:"w-4 h-4 mr-2"}),"Share Details"]})]}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,d.jsx)(h.$,{onClick:()=>{j()},variant:"outline",className:"flex-1",children:"Book Another Service"}),(0,d.jsxs)(h.$,{onClick:()=>{j(),g?.()},className:"flex-1",children:[(0,d.jsx)(t.A,{className:"w-4 h-4 mr-2"}),"Back to Website"]})]}),(0,d.jsxs)("div",{className:"text-center pt-6 border-t",children:[(0,d.jsxs)("p",{className:"text-sm text-gray-500",children:["Thank you for choosing ",b,"!"]}),(0,d.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"We look forward to serving you."})]})]})}function as({businessId:a,businessName:b,businessPhone:c,businessEmail:e,services:f,onClose:i,onComplete:j}){let{state:k,prevStep:l,canProceed:n,resetWizard:o}=p(),{currentStep:q,isLoading:r}=k;return(0,d.jsxs)("div",{className:"flex flex-col h-full bg-white",children:[(0,d.jsxs)("div",{className:"flex-shrink-0",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"Book Service"}),b&&(0,d.jsxs)("span",{className:"text-sm text-gray-500",children:["with ",b]})]}),(0,d.jsx)(h.$,{variant:"ghost",size:"sm",onClick:()=>{o(),i?.()},className:"text-gray-400 hover:text-gray-600",children:(0,d.jsx)(g.A,{className:"w-5 h-5"})})]}),(0,d.jsx)(A,{showLabels:!1})]}),(0,d.jsx)("div",{className:"flex-1 overflow-y-auto",children:(()=>{switch(q){case m.ZIP_CHECK:return(0,d.jsx)(O,{businessId:a,businessName:b,businessPhone:c,businessEmail:e});case m.CATEGORY:return(0,d.jsx)($,{businessId:a,services:f?.map(a=>({id:a.id,name:a.name,category:a.category??"General",description:a.description,duration_minutes:a.estimated_duration_minutes,price_cents:"number"==typeof a.base_price?Math.round(100*a.base_price):void 0,is_emergency:!1}))});case m.ADDRESS:return(0,d.jsx)(aa,{businessId:a});case m.DATETIME:return(0,d.jsx)(ac,{businessId:a});case m.CONTACT:return(0,d.jsx)(ah,{businessId:a,businessName:b});case m.DETAILS:return(0,d.jsx)(ak,{businessId:a,businessName:b});case m.REVIEW:return(0,d.jsx)(ao,{businessId:a,businessName:b,businessPhone:c,businessEmail:e});case m.CONFIRMATION:return(0,d.jsx)(ar,{businessId:a,businessName:b,businessPhone:c,businessEmail:e,onClose:i});default:return(0,d.jsx)("div",{className:"p-6 text-center",children:"Unknown step"})}})()}),(0,d.jsx)("div",{className:"flex-shrink-0 border-t border-gray-200 p-4",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("div",{children:q>m.ZIP_CHECK&&(0,d.jsx)(h.$,{variant:"outline",onClick:l,disabled:r,children:"Back"})}),(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[r&&(0,d.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,d.jsx)("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"}),(0,d.jsx)("span",{children:"Loading..."})]}),(0,d.jsxs)("div",{className:"text-sm text-gray-500",children:["Step ",q+1," of ",Object.keys(m).length]})]})]})})]})}function at(a){let{businessId:b,onComplete:c,onClose:e,className:f=""}=a;return(0,d.jsx)("div",{className:`w-full h-full ${f}`,children:(0,d.jsx)(o,{businessId:b,onComplete:a=>{console.log("Booking completed:",a),c?.(a)},onError:a=>{console.error("Booking error:",a)},children:(0,d.jsx)(as,{...a})})})}},82149:(a,b,c)=>{"use strict";function d(){return"undefined"!=typeof process&&1?"staging":"production"}function e(a){if("undefined"!=typeof process&&1)return"https://73d34a85b4db.ngrok-free.app";if("undefined"!=typeof process){if(process.env.NEXT_PUBLIC_STAGING_API_URL&&"staging"===a)return process.env.NEXT_PUBLIC_STAGING_API_URL;if(process.env.NEXT_PUBLIC_PRODUCTION_API_URL&&"production"===a)return process.env.NEXT_PUBLIC_PRODUCTION_API_URL}switch(a){case"development":case"staging":default:return"http://localhost:8000";case"production":return"https://api.hero365.ai"}}c.d(b,{Jh:()=>h,KZ:()=>m,M7:()=>k,dz:()=>j,wE:()=>l});let f=null;function g(){return f||(f=function(){let a=d(),b=e(a);return{api:{baseUrl:b.includes("/api/v1")?b:`${b}/api/v1`,apiVersion:"v1",timeout:"development"===a?3e4:15e3,retries:"development"===a?1:3,environment:a},features:{analytics:!0,voiceAgent:"true"===process.env.NEXT_PUBLIC_VOICE_AGENT_ENABLED,bookingWidget:!0,errorReporting:"production"===a},business:{defaultBusinessId:"550e8400-e29b-41d4-a716-446655440010",defaultBusinessName:"Elite HVAC Austin",defaultBusinessPhone:"+15125550100",defaultBusinessEmail:"info@elitehvac.com"}}}()),f}function h(){return g().api}function i(a){let b=h(),c=a.startsWith("/")?a.slice(1):a,d=`${b.baseUrl}/${c}`;return console.log("\uD83D\uDD27 [DEBUG] buildApiUrl:",{baseUrl:b.baseUrl,endpoint:a,cleanEndpoint:c,fullUrl:d,environment:b.environment}),d}function j(a){let b=a.startsWith("/")?a.slice(1):a,c=i(`public/${b}`);return console.log("\uD83D\uDD27 [DEBUG] buildPublicApiUrl:",{endpoint:a,cleanEndpoint:b,fullUrl:c}),c}function k(a){return i(a.startsWith("/")?a.slice(1):a)}function l(){return e(d())}function m(){let a={"Content-Type":"application/json"};return"development"===g().api.environment&&(a["X-Environment"]="development"),a["X-API-Version"]=h().apiVersion,h().baseUrl.includes("ngrok")&&(a["ngrok-skip-browser-warning"]="true"),a}},82704:()=>{},84596:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},95308:()=>{}};