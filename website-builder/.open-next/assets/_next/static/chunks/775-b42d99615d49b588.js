"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[775],{577:(e,t,a)=>{a.d(t,{CartProvider:()=>n,_:()=>d});var r=a(5155),s=a(2115),c=a(607);let i={cart:null,cartSummary:null,isLoading:!1,error:null};function o(e,t){switch(t.type){case"SET_LOADING":return{...e,isLoading:t.payload};case"SET_ERROR":return{...e,error:t.payload,isLoading:!1};case"SET_CART":return{...e,cart:t.payload,error:null,isLoading:!1};case"SET_CART_SUMMARY":return{...e,cartSummary:t.payload};case"CLEAR_CART":return{...e,cart:null,cartSummary:null};default:return e}}let l=(0,s.createContext)(void 0);function n(e){let{children:t,businessId:a}=e,[n,d]=(0,s.useReducer)(o,i),m=(0,c.wE)(),h=()=>localStorage.getItem("cart_id"),p=()=>{localStorage.removeItem("cart_id")},u=async()=>{d({type:"SET_LOADING",payload:!0});try{var e;let t="session_".concat(Date.now()),a=await fetch("".concat(m,"/api/v1/public/contractors/shopping-cart/create?session_id=").concat(t),{method:"POST",headers:(0,c.KZ)()});if(!a.ok){let e=await a.text();throw Error("Failed to create cart: ".concat(a.status," ").concat(e))}let r=await a.json();if(!r||!r.id)throw Error("Invalid cart response: missing cart ID");e=r.id,localStorage.setItem("cart_id",e),d({type:"SET_CART",payload:r});try{await x(r.id)}catch(e){console.warn("Failed to load cart summary:",e)}}catch(t){let e=t instanceof Error?t.message:"Failed to create cart";throw d({type:"SET_ERROR",payload:e}),Error(e)}},x=async e=>{try{let t=await fetch("".concat(m,"/api/v1/public/contractors/shopping-cart/").concat(e,"/summary"),{headers:(0,c.KZ)()});if(t.ok){let e=await t.json();d({type:"SET_CART_SUMMARY",payload:e})}}catch(e){console.error("Failed to fetch cart summary:",e)}},f=async()=>{let e=h();if(!e)return void console.log("\uD83D\uDED2 [CART-CONTEXT] refreshCart: No cart_id, skipping");console.log("\uD83D\uDED2 [CART-CONTEXT] refreshCart: Loading cart from API:",e),d({type:"SET_LOADING",payload:!0});try{var t;let a=await fetch("".concat(m,"/api/v1/public/contractors/shopping-cart/").concat(e),{headers:(0,c.KZ)()});if(!a.ok){if(404===a.status){console.log("\uD83D\uDED2 [CART-CONTEXT] Cart not found (404), clearing localStorage"),p(),d({type:"CLEAR_CART"});return}throw Error("Failed to fetch cart: ".concat(a.status," ").concat(a.statusText))}let r=await a.json();console.log("\uD83D\uDED2 [CART-CONTEXT] Cart loaded successfully:",{cartId:r.id,itemCount:r.item_count,items:(null==(t=r.items)?void 0:t.length)||0}),console.log("\uD83D\uDED2 [CART-CONTEXT] Full cart data:",r),console.log("\uD83D\uDED2 [CART-CONTEXT] Cart items:",r.items),r.items&&r.items.length>0&&r.items.forEach((e,t)=>{console.log("\uD83D\uDED2 [CART-CONTEXT] Item ".concat(t,":"),{id:e.id,product_name:e.product_name,quantity:e.quantity,unit_price:e.unit_price})}),d({type:"SET_CART",payload:r}),await x(e)}catch(e){console.error("\uD83D\uDED2 [CART-CONTEXT] refreshCart error:",e),d({type:"SET_ERROR",payload:e instanceof Error?e.message:"Failed to fetch cart"})}finally{d({type:"SET_LOADING",payload:!1})}},g=async e=>{let t=h();if(console.log("\uD83D\uDED2 [CART-CONTEXT] addToCart called:",{item:e,currentCartId:t}),!t){console.log("\uD83D\uDED2 [CART] Creating new cart...");try{if(await u(),!(t=h()))throw Error("Cart creation succeeded but cart ID is still missing from localStorage");console.log("✅ [CART] Cart created successfully:",t)}catch(e){throw console.error("❌ [CART] Failed to create cart:",e),Error("Failed to create shopping cart: ".concat(e instanceof Error?e.message:"Unknown error"))}}d({type:"SET_LOADING",payload:!0});try{console.log("\uD83D\uDED2 [CART] Adding item to cart:",t,e);let r=await fetch("".concat(m,"/api/v1/public/contractors/shopping-cart/").concat(t,"/items?business_id=").concat(a),{method:"POST",headers:(0,c.KZ)(),body:JSON.stringify(e)});if(!r.ok){let e=await r.text();throw console.error("❌ [CART] Add item failed:",r.status,e),Error("Failed to add item to cart: ".concat(r.status," ").concat(e))}console.log("✅ [CART] Item added successfully"),await f()}catch(t){console.error("❌ [CART] Failed to add item:",t);let e=t instanceof Error?t.message:"Failed to add item to cart";throw d({type:"SET_ERROR",payload:e}),Error(e)}},y=async(e,t)=>{let a=h();if(a){console.log("\uD83D\uDED2 [CART] Updating item quantity:",{cartId:a,itemId:e,quantity:t}),d({type:"SET_LOADING",payload:!0});try{let r=await fetch("".concat(m,"/api/v1/public/contractors/shopping-cart/").concat(a,"/items/").concat(e),{method:"PUT",headers:(0,c.KZ)(),body:JSON.stringify({quantity:t})});if(console.log("\uD83D\uDED2 [CART] Update response:",r.status,r.statusText),!r.ok){let e=await r.text();throw console.error("❌ [CART] Update failed:",r.status,e),Error("Failed to update cart item: ".concat(r.status," ").concat(e))}console.log("✅ [CART] Item updated successfully"),await f()}catch(t){console.error("❌ [CART] Failed to update item:",t);let e=t instanceof Error?t.message:"Failed to update cart item";throw d({type:"SET_ERROR",payload:e}),Error(e)}finally{d({type:"SET_LOADING",payload:!1})}}},v=async e=>{let t=h();if(t){d({type:"SET_LOADING",payload:!0});try{if(!(await fetch("".concat(m,"/api/v1/public/contractors/shopping-cart/").concat(t,"/items/").concat(e),{method:"DELETE",headers:(0,c.KZ)()})).ok)throw Error("Failed to remove item from cart");await f()}catch(e){d({type:"SET_ERROR",payload:e instanceof Error?e.message:"Failed to remove item"})}}},N=async()=>{let e=h();if(e){d({type:"SET_LOADING",payload:!0});try{if(!(await fetch("".concat(m,"/api/v1/public/contractors/shopping-cart/").concat(e),{method:"DELETE",headers:(0,c.KZ)()})).ok)throw Error("Failed to clear cart");p(),d({type:"CLEAR_CART"})}catch(e){d({type:"SET_ERROR",payload:e instanceof Error?e.message:"Failed to clear cart"})}}};(0,s.useEffect)(()=>{let e=h();console.log("\uD83D\uDED2 [CART-CONTEXT] Initializing cart context:",{cartId:e,businessId:a}),e?(console.log("\uD83D\uDED2 [CART-CONTEXT] Found cart_id in localStorage, refreshing cart..."),f()):console.log("\uD83D\uDED2 [CART-CONTEXT] No cart_id in localStorage, starting with empty cart")},[a]);let b={cart:n.cart,cartSummary:n.cartSummary,isLoading:n.isLoading,error:n.error,createCart:u,addToCart:g,updateCartItem:y,removeFromCart:v,clearCart:N,refreshCart:f};return(0,r.jsx)(l.Provider,{value:b,children:t})}function d(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},8775:(e,t,a)=>{a.d(t,{default:()=>p});var r=a(5155),s=a(2115),c=a(1873),i=a(4033),o=a(5229),l=a(9540),n=a(8127),d=a(952),m=a(577);function h(){let{cartSummary:e}=(0,m._)(),t=(null==e?void 0:e.item_count)||0;return(0,r.jsxs)("a",{href:"/cart",className:"relative flex items-center text-gray-700 hover:text-gray-900 font-medium",children:[(0,r.jsx)(d.A,{className:"w-5 h-5"}),t>0&&(0,r.jsx)("span",{className:"absolute -top-2 -right-2 bg-blue-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:t>9?"9+":t})]})}function p(e){let{businessName:t,city:a,state:d,phone:m,supportHours:p="24/7",logo:u,primaryColor:x="#3b82f6"}=e,[f,g]=(0,s.useState)(!1),[y,v]=(0,s.useState)(!1),[N,b]=(0,s.useState)(null),[E,j]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=()=>{g(window.scrollY>10)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);let w=e=>{E&&(clearTimeout(E),j(null)),b(e)},T=()=>{j(setTimeout(()=>{b(null)},150))},C=[{name:"Air Conditioning",description:"Complete AC services",services:[{name:"Heat Pump Installation",description:"Energy-efficient heat pump systems",href:"/services/heat-pump"},{name:"Ductless Split System",description:"Flexible cooling solutions",href:"/services/ductless"},{name:"Air Conditioner Repair",description:"Fast AC repair service",href:"/services/ac-repair"},{name:"Duct Inspection",description:"Professional ductwork inspection",href:"/services/duct-inspection"}]},{name:"Heating",description:"Heating system services",services:[{name:"Furnace Installation",description:"New furnace installation",href:"/services/furnace-install"},{name:"Heater Repair",description:"Emergency heater repair",href:"/services/heater-repair"},{name:"Rooftop Package Unit",description:"Commercial heating units",href:"/services/rooftop-unit"}]},{name:"Electrical",description:"Electrical services",services:[{name:"Panel Installation",description:"Electrical panel upgrade",href:"/services/panel-install"},{name:"EV Charger Installation",description:"Electric vehicle charging",href:"/services/ev-charger"},{name:"Electrical Repair",description:"Emergency electrical repair",href:"/services/electrical-repair"}]},{name:"Plumbing",description:"Plumbing services",services:[{name:"Water Heater Installation",description:"New water heater systems",href:"/services/water-heater"},{name:"Plumbing Repair",description:"Emergency plumbing repair",href:"/services/plumbing-repair"},{name:"Pipe Restoration",description:"Pipe repair and replacement",href:"/services/pipe-restoration"}]}],R=[{name:"About Us",href:"/about"},{name:"Service Area",href:"/service-area"},{name:"Why Choose Us",href:"/why-us"},{name:"Our Work",href:"/projects"},{name:"Customer Reviews",href:"/reviews"},{name:"Careers",href:"/careers"},{name:"Blog",href:"/blog"}];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"bg-gray-900 text-white py-2 px-4",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto flex items-center justify-between text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(c.A,{className:"w-4 h-4 mr-2 text-blue-400"}),(0,r.jsxs)("span",{className:"font-medium",children:[a,", ",d]})]}),(0,r.jsxs)("div",{className:"hidden md:flex items-center",children:[(0,r.jsxs)("span",{className:"text-green-400 font-medium",children:["Support ",p,":"]}),(0,r.jsx)("a",{href:"tel:".concat(m),className:"ml-2 text-white hover:text-blue-400 transition-colors font-bold",children:m})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("button",{className:"px-3 py-1 text-xs border border-white text-white hover:bg-white hover:text-gray-900 rounded transition-colors font-medium",children:"Get a Quote Now"}),(0,r.jsx)(n.U,{size:"sm",className:"bg-blue-600 hover:bg-blue-700 text-white text-xs px-3 py-1",children:"Book Now"})]})]})}),(0,r.jsxs)("header",{className:"sticky top-0 z-40 transition-all duration-300 ".concat(f?"bg-white shadow-lg border-b":"bg-white border-b border-gray-200"),children:[(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("a",{href:"/",className:"flex items-center",children:u?(0,r.jsx)("img",{src:u,alt:t,className:"h-10 w-auto"}):(0,r.jsx)("div",{className:"text-2xl font-bold",style:{color:x},children:t})})}),(0,r.jsxs)("nav",{className:"hidden lg:flex items-center space-x-8",children:[(0,r.jsxs)("div",{className:"relative",onMouseEnter:()=>w("services"),onMouseLeave:T,children:[(0,r.jsxs)("button",{className:"flex items-center text-gray-700 hover:text-gray-900 font-medium py-2",children:["Services",(0,r.jsx)(i.A,{className:"ml-1 h-4 w-4"})]}),"services"===N&&(0,r.jsx)("div",{className:"absolute top-full left-0 mt-0 w-screen max-w-4xl bg-white shadow-xl border rounded-lg z-50",children:(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-6",children:C.map(e=>(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,r.jsx)("ul",{className:"space-y-2",children:e.services.map(e=>(0,r.jsx)("li",{children:(0,r.jsx)("a",{href:e.href,className:"block text-sm text-gray-600 hover:text-blue-600 transition-colors",children:e.name})},e.name))})]},e.name))}),(0,r.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,r.jsx)("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900",children:"Need Help Choosing?"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Our experts are here to help - call the number above"})]})})})]})})]}),(0,r.jsx)("a",{href:"/products",className:"text-gray-700 hover:text-gray-900 font-medium py-2",children:"Products"}),(0,r.jsx)("a",{href:"/projects",className:"text-gray-700 hover:text-gray-900 font-medium py-2",children:"Projects"}),(0,r.jsxs)("div",{className:"relative",onMouseEnter:()=>w("company"),onMouseLeave:T,children:[(0,r.jsxs)("button",{className:"flex items-center text-gray-700 hover:text-gray-900 font-medium py-2",children:["Company",(0,r.jsx)(i.A,{className:"ml-1 h-4 w-4"})]}),"company"===N&&(0,r.jsx)("div",{className:"absolute top-full left-0 mt-0 w-64 bg-white shadow-xl border rounded-lg z-50",children:(0,r.jsx)("div",{className:"py-2",children:R.map(e=>(0,r.jsx)("a",{href:e.href,className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-gray-900",children:e.name},e.name))})})]}),(0,r.jsx)("a",{href:"/pricing",className:"text-gray-700 hover:text-gray-900 font-medium",children:"Pricing"}),(0,r.jsx)("a",{href:"/contact",className:"text-gray-700 hover:text-gray-900 font-medium",children:"Contact"})]}),(0,r.jsx)("div",{className:"hidden lg:flex items-center space-x-3",children:(0,r.jsx)(h,{})}),(0,r.jsxs)("div",{className:"lg:hidden flex items-center space-x-3",children:[(0,r.jsx)(h,{}),(0,r.jsx)("button",{className:"p-2",onClick:()=>v(!y),children:y?(0,r.jsx)(o.A,{className:"h-6 w-6"}):(0,r.jsx)(l.A,{className:"h-6 w-6"})})]})]})}),y&&(0,r.jsx)("div",{className:"lg:hidden bg-white border-t border-gray-200",children:(0,r.jsxs)("div",{className:"px-4 py-6 space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-900 font-semibold mb-2",children:"Services"}),C.map(e=>(0,r.jsxs)("div",{className:"ml-4 mb-3",children:[(0,r.jsx)("div",{className:"font-medium text-gray-800 mb-1",children:e.name}),e.services.map(e=>(0,r.jsx)("a",{href:e.href,className:"block text-sm text-gray-600 py-1",children:e.name},e.name))]},e.name))]}),(0,r.jsx)("a",{href:"/products",className:"block text-gray-700 font-medium",children:"Products"}),(0,r.jsx)("a",{href:"/projects",className:"block text-gray-700 font-medium",children:"Projects"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-gray-900 font-semibold mb-2",children:"Company"}),(0,r.jsx)("div",{className:"ml-4 space-y-1",children:R.map(e=>(0,r.jsx)("a",{href:e.href,className:"block text-sm text-gray-600 py-1",children:e.name},e.name))})]}),(0,r.jsx)("a",{href:"/pricing",className:"block text-gray-700 font-medium",children:"Pricing"}),(0,r.jsx)("a",{href:"/contact",className:"block text-gray-700 font-medium",children:"Contact"})]}),(0,r.jsx)("div",{className:"pt-6 border-t border-gray-200 space-y-3",children:(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Ready to get started? Call the number above or book online!"})})})]})})]})]})}}}]);