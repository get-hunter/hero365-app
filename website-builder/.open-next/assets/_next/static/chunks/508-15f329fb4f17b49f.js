"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[508],{796:(e,s,t)=>{t.d(s,{Ay:()=>p,Go:()=>g,Wp:()=>f});var r=t(5155),n=t(2115),a=t(7003),i=t(7354),o=t(7624),l=t(6485),c=t(9141),d=t(3664),m=t(5880),h=t(5016),u=t(3760),x=t(5704);function p(e){let{businessId:s,services:t,theme:x="light",primaryColor:p="#3b82f6",companyName:g="Professional Services",companyLogo:f,companyPhone:b,companyEmail:w,mode:j="inline",showHeader:y=!0,showFooter:v=!0,allowMinimize:N=!1,onBookingComplete:k,onBookingError:C,onWidgetClose:_,className:A}=e,[E,S]=(0,n.useState)(!1),[B,I]=(0,n.useState)(!0),P=()=>{I(!1),_&&_(),window.parent!==window&&window.parent.postMessage({type:"HERO365_WIDGET_CLOSE"},"*")};if(!B)return null;let R=(0,r.jsxs)("div",{className:(0,h.cn)("bg-white shadow-lg border rounded-lg overflow-hidden","popup"===j&&"fixed bottom-4 right-4 z-50 max-w-md w-full","sidebar"===j&&"fixed right-0 top-0 h-full w-96 z-50","inline"===j&&"w-full max-w-4xl mx-auto",E&&"h-16",A),style:{"--primary-color":p},children:[y&&(0,r.jsxs)("div",{className:"bg-gray-50 border-b px-4 py-3 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[f&&(0,r.jsx)("img",{src:f,alt:g,className:"w-8 h-8 rounded object-cover"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:g}),(0,r.jsx)("p",{className:"text-xs text-gray-600",children:"Book Your Appointment"})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[N&&(0,r.jsx)(a.$,{variant:"ghost",size:"sm",onClick:()=>{S(!E)},className:"w-8 h-8 p-0",children:E?(0,r.jsx)(i.A,{className:"w-4 h-4"}):(0,r.jsx)(o.A,{className:"w-4 h-4"})}),("popup"===j||"sidebar"===j)&&(0,r.jsx)(a.$,{variant:"ghost",size:"sm",onClick:P,className:"w-8 h-8 p-0",children:"\xd7"})]})]}),!E&&(0,r.jsx)("div",{className:(0,h.cn)("p-4","sidebar"===j&&"h-full overflow-y-auto"),children:0===t.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(l.A,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),(0,r.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Booking Unavailable"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Online booking is not currently available. Please contact us directly."}),(0,r.jsxs)("div",{className:"space-y-2",children:[b&&(0,r.jsxs)(a.$,{variant:"outline",className:"w-full flex items-center gap-2",onClick:()=>window.open("tel:".concat(b)),children:[(0,r.jsx)(c.A,{className:"w-4 h-4"}),"Call ",b]}),w&&(0,r.jsxs)(a.$,{variant:"outline",className:"w-full flex items-center gap-2",onClick:()=>window.open("mailto:".concat(w)),children:[(0,r.jsx)(d.A,{className:"w-4 h-4"}),"Email Us"]})]})]}):(0,r.jsx)(u.A,{businessId:s,services:t,onComplete:e=>{k&&k(e),window.parent!==window&&window.parent.postMessage({type:"HERO365_BOOKING_COMPLETE",data:e},"*")},className:"max-w-none"})}),v&&!E&&(0,r.jsx)("div",{className:"bg-gray-50 border-t px-4 py-2 text-center",children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 text-xs text-gray-500",children:[(0,r.jsx)("span",{children:"Powered by"}),(0,r.jsxs)("a",{href:"https://hero365.ai",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-blue-600 hover:text-blue-700 font-medium",children:["Hero365",(0,r.jsx)(m.A,{className:"w-3 h-3"})]})]})})]});return"popup"===j?(0,r.jsxs)("div",{className:"fixed inset-0 z-40",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-25",onClick:P}),R]}):R}function g(e){let{onClick:s,companyName:t="Book Appointment",primaryColor:n="#3b82f6",className:i}=e;return(0,r.jsxs)(a.$,{onClick:s,className:(0,h.cn)("fixed bottom-4 right-4 z-40 rounded-full shadow-lg",i),style:{backgroundColor:n},children:[(0,r.jsx)(l.A,{className:"w-5 h-5 mr-2"}),t]})}function f(e){let{businessId:s,mode:t="inline",theme:r="light",primaryColor:n="#3b82f6",companyName:a="Book Appointment",width:i="100%",height:o="600px"}=e,l=x.env.NEXT_PUBLIC_WIDGET_URL||"https://hero365.ai/widget",c=new URLSearchParams({businessId:s,mode:t,theme:r,primaryColor:n,companyName:a});return{iframe:'<iframe \n  src="'.concat(l,"?").concat(c.toString(),'" \n  width="').concat(i,'" \n  height="').concat(o,'"\n  frameborder="0"\n  style="border: none; border-radius: 8px;"\n  title="Book Appointment - ').concat(a,'">\n</iframe>'),script:"<script>\n  (function() {\n    var script = document.createElement('script');\n    script.src = '".concat(l,"/embed.js';\n    script.setAttribute('data-business-id', '").concat(s,"');\n    script.setAttribute('data-mode', '").concat(t,"');\n    script.setAttribute('data-theme', '").concat(r,"');\n    script.setAttribute('data-primary-color', '").concat(n,"');\n    script.setAttribute('data-company-name', '").concat(a,"');\n    document.head.appendChild(script);\n  })();\n<\/script>"),directUrl:"".concat(l,"?").concat(c.toString())}}},8127:(e,s,t)=>{t.d(s,{U:()=>w,BookingWidgetProvider:()=>b});var r=t(5155),n=t(2115),a=t(5229),i=t(3760),o=t(2056),l=t(9559),c=t(5626),d=t(9141),m=t(3664),h=t(7003),u=t(3209),x=t(7812);class p extends n.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e,errorId:"ERR-".concat(Date.now().toString().slice(-6))}}componentDidCatch(e,s){console.error("Booking Widget Error:",e,s),this.setState({error:e,errorInfo:s}),fetch("/api/v1/analytics/errors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:"booking_widget_error",properties:{error:e.message,stack:e.stack,componentStack:s.componentStack,errorId:this.state.errorId,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href}})}).catch(e=>{console.warn("Failed to send error analytics:",e)})}render(){if(this.state.hasError){let{businessName:e="our team",businessPhone:s,businessEmail:t}=this.props,{error:n,errorId:a}=this.state;return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,r.jsxs)(u.Zp,{className:"w-full max-w-2xl",children:[(0,r.jsxs)(u.aR,{className:"text-center",children:[(0,r.jsx)("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:(0,r.jsx)(o.A,{className:"w-8 h-8 text-red-600"})}),(0,r.jsx)(u.ZB,{className:"text-2xl text-gray-900",children:"Something went wrong"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"We encountered an unexpected error while processing your booking request. Don't worry - your information is safe and we're here to help."})]}),(0,r.jsxs)(u.Wu,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Error Reference"}),(0,r.jsx)(x.E,{variant:"secondary",className:"font-mono text-xs",children:a})]}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Please reference this ID when contacting support."})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:"What you can do:"}),(0,r.jsxs)("div",{className:"grid gap-3",children:[(0,r.jsxs)(h.$,{onClick:this.handleRetry,className:"w-full justify-start",variant:"outline",children:[(0,r.jsx)(l.A,{className:"w-4 h-4 mr-2"}),"Try Again"]}),(0,r.jsxs)(h.$,{onClick:this.handleGoBack,className:"w-full justify-start",variant:"outline",children:[(0,r.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Go Back to Website"]}),s&&(0,r.jsxs)(h.$,{onClick:()=>window.open("tel:".concat(s),"_self"),className:"w-full justify-start",variant:"outline",children:[(0,r.jsx)(d.A,{className:"w-4 h-4 mr-2"}),"Call ",e," - ",s]}),t&&(0,r.jsxs)(h.$,{onClick:()=>window.open("mailto:".concat(t,"?subject=Booking Error ").concat(a),"_self"),className:"w-full justify-start",variant:"outline",children:[(0,r.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Email ",e]})]})]}),(0,r.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Need immediate assistance?"}),(0,r.jsx)("p",{className:"text-sm text-blue-800",children:s?(0,r.jsxs)(r.Fragment,{children:["Call us directly at ",(0,r.jsx)("strong",{children:s})," and we'll help you schedule your service right away."]}):(0,r.jsxs)(r.Fragment,{children:["Contact ",e," directly and we'll help you schedule your service right away."]})})]}),!1]})]})})}return this.props.children}constructor(e){super(e),this.handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:""}),this.props.onReset&&this.props.onReset()},this.handleGoBack=()=>{this.props.onGoBack?this.props.onGoBack():window.location.reload()},this.state={hasError:!1,error:null,errorInfo:null,errorId:""}}}var g=t(796);let f=(0,n.createContext)(void 0);function b(e){let{children:s,businessId:t,services:o,companyName:l="Professional Services",companyLogo:c,companyPhone:d,companyEmail:m,primaryColor:h="#3b82f6",showLauncher:u=!1}=e,[x,b]=(0,n.useState)(!1),[w,j]=(0,n.useState)(),y=(0,n.useCallback)(e=>{j(e),b(!0),document.body.style.overflow="hidden",window.gtag&&window.gtag("event","booking_widget_opened",{business_id:t,service_id:e})},[t]),v=(0,n.useCallback)(()=>{b(!1),j(void 0),document.body.style.overflow="",window.gtag&&window.gtag("event","booking_widget_closed",{business_id:t})},[t]),N=w?o.filter(e=>e.id===w):o;return(0,r.jsxs)(f.Provider,{value:{isOpen:x,openBookingWidget:y,closeBookingWidget:v,selectedServiceId:w},children:[s,u&&!x&&(0,r.jsx)(g.Go,{onClick:()=>y(),companyName:"Book ".concat(l),primaryColor:h}),x&&(0,r.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity",onClick:v}),(0,r.jsx)("div",{className:"relative z-10 flex items-start md:items-center justify-center min-h-screen p-0 md:p-6",children:(0,r.jsxs)("div",{className:"w-full h-full md:h-auto md:w-full md:max-w-4xl md:max-h-[90vh] flex flex-col bg-white md:rounded-xl shadow-2xl overflow-hidden relative",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("button",{onClick:v,className:"absolute top-4 right-4 z-20 p-2 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors duration-200 shadow-sm","aria-label":"Close booking widget",children:(0,r.jsx)(a.A,{className:"w-5 h-5 text-gray-600"})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,r.jsx)(p,{businessName:l,businessPhone:d,businessEmail:m,onReset:()=>{v(),setTimeout(()=>y(),100)},onGoBack:v,children:(0,r.jsx)(i.A,{businessId:t,businessName:l,businessPhone:d,businessEmail:m,services:N,onClose:v,onComplete:e=>{window.gtag&&window.gtag("event","booking_completed",{business_id:t,service_id:e.service_id,booking_id:e.id,value:e.quoted_price||0})},className:"h-full"})})})]})})]})]})}function w(e){let{children:s,serviceId:t,variant:a="primary",size:i="default",className:o="",...l}=e,{openBookingWidget:c}=function(){let e=(0,n.useContext)(f);if(void 0===e)throw Error("useBookingWidget must be used within a BookingWidgetProvider");return e}();return(0,r.jsx)("button",{className:"".concat("inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none"," ").concat({primary:"bg-primary text-primary-foreground hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",outline:"border border-input hover:bg-accent hover:text-accent-foreground"}[a]," ").concat({sm:"h-9 px-3 text-sm",default:"h-10 py-2 px-4",lg:"h-11 px-8 text-lg"}[i]," ").concat(o),onClick:()=>c(t),...l,children:s})}}}]);