"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[291,968],{2676:(e,s,t)=>{t.d(s,{cn:()=>n});var a=t(2821),r=t(5889);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.QP)((0,a.$)(s))}},3209:(e,s,t)=>{t.d(s,{Wu:()=>o,ZB:()=>c,Zp:()=>i,aR:()=>l});var a=t(5155),r=t(2115),n=t(2676);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});i.displayName="Card";let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});l.displayName="CardHeader";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});c.displayName="CardTitle",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})}).displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...r})});o.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter"},4004:(e,s,t)=>{t.r(s),t.d(s,{default:()=>ef});var a=t(5155),r=t(2115),n=t(5229),i=t(7003);class l{trackStep(e,s,t){let a=Date.now(),r={event:"booking_".concat(e,"_").concat(s),properties:{step:e,action:s,sessionId:this.sessionId,timestamp:new Date().toISOString(),sessionDuration:Math.round((a-this.sessionStartTime)/1e3),...t},timestamp:new Date().toISOString(),sessionId:this.sessionId};if(this.events.push(r),"view"===s)this.stepStartTimes[e]=a;else if("next"===s||"back"===s||"abandon"===s){let s=this.stepStartTimes[e];if(s){let t=Math.round((a-s)/1e3);r.properties.stepDuration=t,this.conversionData.stepDurations||(this.conversionData.stepDurations={}),this.conversionData.stepDurations[e]=t}}this.updateConversionData(e,s,t),this.sendEvent(r)}trackZipValidation(e,s,t,a){this.conversionData.zipCode=e,this.conversionData.countryCode=s,this.conversionData.isSupported=t,this.trackStep("zip_gate",t?"next":"error",{zipCode:e,countryCode:s,isSupported:t,suggestionsCount:(null==a?void 0:a.length)||0})}trackServiceSelection(e,s){this.conversionData.serviceCategory=e,this.conversionData.serviceId=s,this.trackStep("category","next",{serviceCategory:e,serviceId:s})}trackBookingComplete(e,s){let t=Date.now();this.conversionData.completedAt=new Date().toISOString(),this.conversionData.totalDuration=Math.round((t-this.sessionStartTime)/1e3),this.trackStep("confirmation","complete",{bookingId:e,totalDuration:this.conversionData.totalDuration,...s})}trackBookingAbandon(e,s){this.conversionData.abandonedAt=new Date().toISOString(),this.conversionData.totalDuration=Math.round((Date.now()-this.sessionStartTime)/1e3),this.trackStep(e,"abandon",{reason:s,totalDuration:this.conversionData.totalDuration})}trackBookingError(e,s){let t="string"==typeof s?s:s.message;this.conversionData.errorStep=e,this.conversionData.errorMessage=t,this.trackStep(e,"error",{error:t,errorType:"string"==typeof s?"validation":"api"})}trackCustomEvent(e,s){let t={event:e,properties:{sessionId:this.sessionId,timestamp:new Date().toISOString(),...s},timestamp:new Date().toISOString(),sessionId:this.sessionId};this.events.push(t),this.sendEvent(t)}getSessionSummary(){return{sessionId:this.sessionId,sessionDuration:Math.round((Date.now()-this.sessionStartTime)/1e3),eventsCount:this.events.length,conversionData:this.conversionData,events:this.events}}getFunnelMetrics(){let e=this.events.reduce((e,s)=>{let t=s.properties.step,a=s.properties.action;return t&&a&&(e[t]||(e[t]={}),e[t][a]||(e[t][a]=0),e[t][a]++),e},{});return{sessionId:this.sessionId,stepCounts:e,stepDurations:this.conversionData.stepDurations,totalDuration:this.conversionData.totalDuration,completed:!!this.conversionData.completedAt,abandoned:!!this.conversionData.abandonedAt}}updateConversionData(e,s,t){!this.conversionData.businessId&&(null==t?void 0:t.businessId)&&(this.conversionData.businessId=t.businessId)}sendEvent(e){window.gtag&&window.gtag("event",e.event,{custom_parameter_1:e.properties.step,custom_parameter_2:e.properties.action,session_id:e.sessionId,...e.properties}),fetch("/api/v1/analytics/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).catch(e=>{})}generateSessionId(){return"booking_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}constructor(){this.stepStartTimes={},this.conversionData={},this.events=[],this.sessionId=this.generateSessionId(),this.sessionStartTime=Date.now(),this.conversionData.sessionId=this.sessionId}}let c=null,o=()=>(c||(c=new l),c),d=(0,r.createContext)(void 0),m={ZIP_CHECK:0,CATEGORY:1,ADDRESS:2,DATETIME:3,CONTACT:4,DETAILS:5,REVIEW:6,CONFIRMATION:7},x=Object.keys(m).length;function u(e){let{children:s,businessId:t,onComplete:n,onError:i}=e,[l,c]=(0,r.useState)({currentStep:m.ZIP_CHECK,dispatchFeeAccepted:!1,termsAccepted:!1,isLoading:!1}),u=o();(0,r.useEffect)(()=>{let e=["zip_gate","category","address","datetime","contact","details","review","confirmation"][l.currentStep];u.trackStep(e,"view",{businessId:t})},[l.currentStep,u,t]);let h=(0,r.useCallback)(()=>{if(l.currentStep<x-1){let e=["zip_gate","category","address","datetime","contact","details","review","confirmation"][l.currentStep];u.trackStep(e,"next",{businessId:t}),c(e=>({...e,currentStep:e.currentStep+1,error:void 0}))}},[l.currentStep,u,t]),p=(0,r.useCallback)(()=>{if(l.currentStep>0){let e=["zip_gate","category","address","datetime","contact","details","review","confirmation"][l.currentStep];u.trackStep(e,"back",{businessId:t}),c(e=>({...e,currentStep:e.currentStep-1,error:void 0}))}},[l.currentStep,u,t]),g=(0,r.useCallback)(e=>{if(e>=0&&e<x){let s=["zip_gate","category","address","datetime","contact","details","review","confirmation"][e];u.trackStep(s,"view",{businessId:t}),c(s=>({...s,currentStep:e,error:void 0}))}},[u,t]),v=(0,r.useCallback)(()=>{var e,s,t,a,r,n,i,c,o,d;switch(l.currentStep){case m.ZIP_CHECK:return(null==(e=l.zipInfo)?void 0:e.supported)===!0;case m.CATEGORY:return!!(l.categoryId&&l.serviceId);case m.ADDRESS:return!!((null==(s=l.address)?void 0:s.line1)&&(null==(t=l.address)?void 0:t.city)&&(null==(a=l.address)?void 0:a.region));case m.DATETIME:return!!((null==(r=l.slot)?void 0:r.start)&&(null==(n=l.slot)?void 0:n.end));case m.CONTACT:return!!((null==(i=l.contact)?void 0:i.firstName)&&(null==(c=l.contact)?void 0:c.lastName)&&(null==(o=l.contact)?void 0:o.phoneE164)&&(null==(d=l.contact)?void 0:d.email));case m.DETAILS:return!0;case m.REVIEW:return l.termsAccepted;default:return!1}},[l]),f=(0,r.useCallback)(e=>{c(s=>({...s,zipInfo:e,error:void 0}))},[]),b=(0,r.useCallback)((e,s)=>{c(t=>({...t,categoryId:e,serviceId:s,error:void 0}))},[]),j=(0,r.useCallback)(e=>{c(s=>({...s,address:e,error:void 0}))},[]),N=(0,r.useCallback)(e=>{c(s=>({...s,slot:e,error:void 0}))},[]),y=(0,r.useCallback)(e=>{c(s=>({...s,contact:e,error:void 0}))},[]),w=(0,r.useCallback)(e=>{c(s=>({...s,details:e,error:void 0}))},[]),C=(0,r.useCallback)(e=>{c(s=>({...s,...e,error:void 0}))},[]),k=(0,r.useCallback)(e=>{c(s=>({...s,isLoading:e}))},[]),S=(0,r.useCallback)(e=>{c(s=>({...s,error:e})),e&&i&&i(e)},[i]),A=(0,r.useCallback)(()=>{c({currentStep:m.ZIP_CHECK,dispatchFeeAccepted:!1,termsAccepted:!1,isLoading:!1})},[]);return(0,a.jsx)(d.Provider,{value:{state:l,nextStep:h,prevStep:p,goToStep:g,canProceed:v,updateZipInfo:f,updateService:b,updateAddress:j,updateSlot:N,updateContact:y,updateDetails:w,updateFlags:C,setLoading:k,setError:S,resetWizard:A},children:s})}function h(){let e=(0,r.useContext)(d);if(!e)throw Error("useBookingWizard must be used within a BookingWizardProvider");return e}function p(e,s){var t,a,r,n,i,l;switch(s){case m.ZIP_CHECK:return(null==(t=e.zipInfo)?void 0:t.supported)===!0;case m.CATEGORY:return!!(e.categoryId&&e.serviceId);case m.ADDRESS:return!!((null==(a=e.address)?void 0:a.line1)&&(null==(r=e.address)?void 0:r.city));case m.DATETIME:return!!(null==(n=e.slot)?void 0:n.start);case m.CONTACT:return!!((null==(i=e.contact)?void 0:i.firstName)&&(null==(l=e.contact)?void 0:l.email));case m.DETAILS:return!0;case m.REVIEW:return e.termsAccepted;default:return!1}}var g=t(1873),v=t(5530),f=t(5993),b=t(6485),j=t(508),N=t(9715),y=t(7828),w=t(2529),C=t(5917);function k(e){let{className:s="",showLabels:t=!0}=e,{state:n,goToStep:i}=h(),{currentStep:l}=n,c=[{key:m.ZIP_CHECK,icon:g.A,label:"Location"},{key:m.CATEGORY,icon:v.A,label:"Service"},{key:m.ADDRESS,icon:f.A,label:"Address"},{key:m.DATETIME,icon:b.A,label:"Date & Time"},{key:m.CONTACT,icon:j.A,label:"Contact"},{key:m.DETAILS,icon:N.A,label:"Details"},{key:m.REVIEW,icon:y.A,label:"Review"},{key:m.CONFIRMATION,icon:w.A,label:"Done"}],o=e=>e<l?p(n,e)?"completed":"skipped":e===l?"current":"upcoming";return(0,a.jsx)("div",{className:"w-full bg-white border-b border-gray-200 ".concat(s),children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:c.map((e,s)=>{let d=o(s),m=e.icon,x=s<=l||p(n,s);return(0,a.jsxs)(r.Fragment,{children:[(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsxs)("button",{onClick:()=>x&&i(s),disabled:!x,className:"\n                      relative w-10 h-10 md:w-12 md:h-12 rounded-full border-2 \n                      flex items-center justify-center transition-all duration-200\n                      ".concat((e=>{switch(e){case"completed":return"bg-green-500 text-white border-green-500";case"current":return"bg-blue-500 text-white border-blue-500";case"skipped":return"bg-gray-300 text-gray-600 border-gray-300";default:return"bg-white text-gray-400 border-gray-300"}})(d),"\n                      ").concat(x?"cursor-pointer hover:scale-105":"cursor-not-allowed","\n                      focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2\n                    "),"aria-label":"".concat(e.label," - ").concat(d),children:["completed"===d?(0,a.jsx)(C.A,{className:"w-5 h-5 md:w-6 md:h-6"}):(0,a.jsx)(m,{className:"w-5 h-5 md:w-6 md:h-6"}),(0,a.jsx)("span",{className:"absolute -top-2 -right-2 w-5 h-5 bg-gray-100 text-gray-600 text-xs rounded-full flex items-center justify-center md:hidden",children:s+1})]}),t&&(0,a.jsxs)("div",{className:"mt-2 text-center",children:[(0,a.jsx)("div",{className:"\n                        text-xs md:text-sm font-medium\n                        ".concat("current"===d?"text-blue-600":"completed"===d?"text-green-600":"text-gray-500","\n                      "),children:e.label}),"current"===d&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1 hidden md:block",children:["Step ",s+1," of ",c.length]})]})]}),s<c.length-1&&(0,a.jsx)("div",{className:"flex-1 mx-2 md:mx-4",children:(0,a.jsx)("div",{className:"\n                      h-0.5 md:h-1 rounded transition-colors duration-300\n                      ".concat((e=>{let s=o(e);return"completed"===s||"current"===s?"bg-green-500":"bg-gray-300"})(s),"\n                    ")})})]},e.key)})}),(0,a.jsxs)("div",{className:"mt-4 md:hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-2",children:[(0,a.jsx)("span",{children:"Progress"}),(0,a.jsxs)("span",{children:[l+1," of ",c.length]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat((l+1)/c.length*100,"%")}})})]}),(0,a.jsxs)("div",{className:"mt-4 text-center",children:[(0,a.jsx)("h2",{className:"text-lg md:text-xl font-semibold text-gray-900",children:["ZIP Code","Service","Address","Date & Time","Contact","Details","Review","Confirmation"][l]||"Unknown"}),n.error&&(0,a.jsx)("div",{className:"mt-2 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md p-2",children:n.error})]})]})})}var S=t(6983),A=t(6398),D=t(6132),I=t(9141),_=t(3664),E=t(8291);class z{async checkServiceAreaSupport(e){let s=new URLSearchParams({business_id:e.business_id,postal_code:e.postal_code,country_code:e.country_code||"US"}),t=(0,E.dz)("service-areas/check?".concat(s)),a=await fetch(t,{method:"GET",headers:(0,E.getDefaultHeaders)()});if(!a.ok){if(404===a.status)return{supported:!1,message:"Service area not found"};throw Error((await a.json().catch(()=>({detail:"Failed to check service area"}))).detail||"Failed to check service area")}return a.json()}async createAvailabilityRequest(e){let s=(0,E.dz)("availability/request"),t=await fetch(s,{method:"POST",headers:(0,E.getDefaultHeaders)(),body:JSON.stringify({...e,source:e.source||"booking_widget",referrer_url:e.referrer_url||window.location.href,user_agent:e.user_agent||("undefined"!=typeof navigator?navigator.userAgent:void 0)})});if(!t.ok)throw Error((await t.json().catch(()=>({detail:"Failed to create availability request"}))).detail||"Failed to create availability request");return t.json()}async getAvailableSlots(e){let s=(0,E.dz)("availability/slots"),t=await fetch(s,{method:"POST",headers:(0,E.getDefaultHeaders)(),body:JSON.stringify({...e,country_code:e.country_code||"US"})});if(!t.ok)throw Error((await t.json().catch(()=>({detail:"Failed to get available slots"}))).detail||"Failed to get available slots");return t.json()}normalizePostalCode(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"US",t=e.replace(/[^A-Za-z0-9]/g,"").toUpperCase();switch(s.toUpperCase()){case"US":t.length>=5&&(t=t.substring(0,5));break;case"CA":t.length>=6&&(t=t.substring(0,6))}return t}validatePostalCode(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"US",t=this.normalizePostalCode(e,s);switch(s.toUpperCase()){case"US":return/^\d{5}$/.test(t);case"CA":return/^[A-Z]\d[A-Z]\d[A-Z]\d$/.test(t);case"GB":return/^[A-Z]{1,2}\d[A-Z\d]?\s?\d[A-Z]{2}$/i.test(e);default:return t.length>=3}}getPostalCodePlaceholder(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"US";switch(e.toUpperCase()){case"US":return"12345";case"CA":return"A1A 1A1";case"GB":return"SW1A 1AA";case"AU":return"2000";default:return"Enter postal code"}}getPostalCodeLabel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"US";return"US"===e.toUpperCase()?"ZIP Code":"Postal Code"}constructor(){this.config=(0,E.Jh)()}}let T=new z;var P=t(6170),R=t(7507),B=t(3209),W=t(7812);let U=[{code:"US",name:"United States",flag:"\uD83C\uDDFA\uD83C\uDDF8"},{code:"CA",name:"Canada",flag:"\uD83C\uDDE8\uD83C\uDDE6"},{code:"GB",name:"United Kingdom",flag:"\uD83C\uDDEC\uD83C\uDDE7"},{code:"AU",name:"Australia",flag:"\uD83C\uDDE6\uD83C\uDDFA"}];function Z(e){var s,t;let{businessId:n,businessName:l="our team",businessPhone:c,businessEmail:d}=e,{state:m,updateZipInfo:x,nextStep:u,setLoading:p,setError:v}=h(),f=o(),[b,j]=(0,r.useState)((null==(s=m.zipInfo)?void 0:s.postalCode)||""),[N,y]=(0,r.useState)((null==(t=m.zipInfo)?void 0:t.countryCode)||"US"),[C,k]=(0,r.useState)(null),[E,z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{m.zipInfo||navigator},[m.zipInfo]);let Z=async()=>{if(!b.trim())return void v("Please enter a postal code");if(!T.validatePostalCode(b,N))return void v("Please enter a valid ".concat(T.getPostalCodeLabel(N).toLowerCase()));z(!0),p(!0),v();try{let e=T.normalizePostalCode(b,N),s=await T.checkServiceAreaSupport({business_id:n,postal_code:e,country_code:N});if(k(s),f.trackZipValidation(e,N,s.supported,s.suggestions),s.supported&&s.normalized){let e={postalCode:s.normalized.postal_code,countryCode:s.normalized.country_code,city:s.normalized.city,region:s.normalized.region,timezone:s.normalized.timezone,supported:!0,dispatchFeeCents:s.normalized.dispatch_fee_cents,minResponseTimeHours:s.normalized.min_response_time_hours,maxResponseTimeHours:s.normalized.max_response_time_hours,emergencyAvailable:s.normalized.emergency_available,regularAvailable:s.normalized.regular_available};x(e)}else x({postalCode:e,countryCode:N,timezone:"America/New_York",supported:!1})}catch(e){v("Unable to check service area. Please try again.")}finally{z(!1),p(!1)}},F=async()=>{if(!d&&!c)return void v("Contact information not available");v("Please contact us directly to request service in your area")},O=U.find(e=>e.code===N);return(0,a.jsxs)("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(g.A,{className:"w-8 h-8 text-blue-600"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"What's your location?"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Enter your postal code so we can check if we provide service in your area"})]}),(0,a.jsx)(B.Zp,{children:(0,a.jsx)(B.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),(0,a.jsxs)(R.l6,{value:N,onValueChange:y,children:[(0,a.jsx)(R.bq,{children:(0,a.jsx)(R.yv,{children:O&&(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:O.flag}),O.name]})})}),(0,a.jsx)(R.gC,{children:U.map(e=>(0,a.jsx)(R.eb,{value:e.code,children:(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"mr-2",children:e.flag}),e.name]})},e.code))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[T.getPostalCodeLabel(N)," *"]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)(P.p,{value:b,onChange:e=>{j(e.target.value.toUpperCase()),k(null),v()},placeholder:T.getPostalCodePlaceholder(N),className:"flex-1",maxLength:10,onKeyPress:e=>{"Enter"===e.key&&Z()}}),(0,a.jsx)(i.$,{onClick:Z,disabled:!b.trim()||E,className:"px-6",children:E?"Checking...":"Check"})]})]})]})})}),C&&(0,a.jsx)("div",{className:"space-y-4",children:C.supported?(0,a.jsx)(B.Zp,{className:"border-green-200 bg-green-50",children:(0,a.jsx)(B.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(w.A,{className:"w-6 h-6 text-green-600 mt-1"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-green-900 mb-2",children:"Great! We service your area"}),C.normalized&&(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"text-sm text-green-800",children:[(0,a.jsx)("strong",{children:"Service Area:"})," ",C.normalized.city,", ",C.normalized.region," ",C.normalized.postal_code]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(S.A,{className:"w-4 h-4 text-green-600"}),(0,a.jsxs)("span",{children:["Response: ",C.normalized.min_response_time_hours,"-",C.normalized.max_response_time_hours," hours"]})]}),C.normalized.dispatch_fee_cents>0&&(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(A.A,{className:"w-4 h-4 text-green-600"}),(0,a.jsxs)("span",{children:["Service fee: $",(C.normalized.dispatch_fee_cents/100).toFixed(2)]})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[C.normalized.emergency_available&&(0,a.jsx)(W.E,{variant:"secondary",className:"bg-red-100 text-red-800",children:"24/7 Emergency"}),C.normalized.regular_available&&(0,a.jsx)(W.E,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:"Regular Service"})]})]}),(0,a.jsx)(i.$,{onClick:()=>{var e;(null==(e=m.zipInfo)?void 0:e.supported)&&u()},className:"mt-4 w-full md:w-auto",children:"Continue Booking"})]})]})})}):(0,a.jsx)(B.Zp,{className:"border-orange-200 bg-orange-50",children:(0,a.jsx)(B.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(D.A,{className:"w-6 h-6 text-orange-600 mt-1"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-orange-900 mb-2",children:"Service not yet available in your area"}),(0,a.jsx)("p",{className:"text-sm text-orange-800 mb-4",children:"We're expanding our service area and would love to help you in the future."}),C.suggestions&&C.suggestions.length>0&&(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-orange-900 mb-2",children:"We do service these nearby areas:"}),(0,a.jsx)("div",{className:"space-y-1",children:C.suggestions.map((e,s)=>(0,a.jsxs)("div",{className:"text-sm text-orange-800",children:["â€¢ ",e.city,", ",e.region," ",e.postal_code]},s))})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-orange-900",children:["Get in touch with ",l,":"]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[c&&(0,a.jsx)(i.$,{variant:"outline",size:"sm",className:"border-orange-300 text-orange-700 hover:bg-orange-100",asChild:!0,children:(0,a.jsxs)("a",{href:"tel:".concat(c),children:[(0,a.jsx)(I.A,{className:"w-4 h-4 mr-2"}),"Call ",c]})}),d&&(0,a.jsx)(i.$,{variant:"outline",size:"sm",className:"border-orange-300 text-orange-700 hover:bg-orange-100",asChild:!0,children:(0,a.jsxs)("a",{href:"mailto:".concat(d),children:[(0,a.jsx)(_.A,{className:"w-4 h-4 mr-2"}),"Email Us"]})})]}),(0,a.jsx)(i.$,{onClick:F,size:"sm",className:"w-full sm:w-auto",children:"Request Service Notification"})]})]})]})})})}),C&&!C.supported&&(0,a.jsxs)(B.Zp,{className:"border-red-200",children:[(0,a.jsx)(B.aR,{children:(0,a.jsxs)(B.ZB,{className:"text-red-900 flex items-center",children:[(0,a.jsx)(D.A,{className:"w-5 h-5 mr-2"}),"Emergency Service"]})}),(0,a.jsxs)(B.Wu,{children:[(0,a.jsx)("p",{className:"text-sm text-red-800 mb-4",children:"If this is an emergency, please call us directly. We may be able to provide emergency service even outside our regular service area."}),c&&(0,a.jsx)(i.$,{variant:"destructive",asChild:!0,className:"w-full sm:w-auto",children:(0,a.jsxs)("a",{href:"tel:".concat(c),children:[(0,a.jsx)(I.A,{className:"w-4 h-4 mr-2"}),"Emergency: ",c]})})]})]})]})}var F=t(4157),O=t(968),L=t(6154),M=t(3842),$=t(7910),H=t(2024),q=t(9587),G=t(8271),V=t(9181),Y=t(7937);let K={HVAC:{icon:F.A,color:"blue",bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-900",description:"Heating, ventilation, and air conditioning services"},Plumbing:{icon:O.A,color:"blue",bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-900",description:"Water systems, pipes, and fixtures"},Electrical:{icon:L.A,color:"yellow",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",textColor:"text-yellow-900",description:"Electrical systems, wiring, and fixtures"},Mechanical:{icon:M.A,color:"gray",bgColor:"bg-gray-50",borderColor:"border-gray-200",textColor:"text-gray-900",description:"Mechanical systems and equipment"},Refrigeration:{icon:F.A,color:"cyan",bgColor:"bg-cyan-50",borderColor:"border-cyan-200",textColor:"text-cyan-900",description:"Cooling and refrigeration systems"},"Security Systems":{icon:$.A,color:"red",bgColor:"bg-red-50",borderColor:"border-red-200",textColor:"text-red-900",description:"Security and surveillance systems"},Landscaping:{icon:H.A,color:"green",bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-900",description:"Outdoor maintenance and landscaping"},Roofing:{icon:f.A,color:"orange",bgColor:"bg-orange-50",borderColor:"border-orange-200",textColor:"text-orange-900",description:"Roof installation, repair, and maintenance"},"Kitchen Equipment":{icon:q.A,color:"brown",bgColor:"bg-amber-50",borderColor:"border-amber-200",textColor:"text-amber-900",description:"Commercial kitchen equipment services"},"Water Treatment":{icon:G.A,color:"blue",bgColor:"bg-blue-50",borderColor:"border-blue-200",textColor:"text-blue-900",description:"Water filtration and treatment systems"},"Pool & Spa":{icon:G.A,color:"teal",bgColor:"bg-teal-50",borderColor:"border-teal-200",textColor:"text-teal-900",description:"Pool and spa maintenance and repair"},Chimney:{icon:f.A,color:"red",bgColor:"bg-red-50",borderColor:"border-red-200",textColor:"text-red-900",description:"Chimney cleaning and maintenance"},"Garage Door":{icon:f.A,color:"gray",bgColor:"bg-gray-50",borderColor:"border-gray-200",textColor:"text-gray-900",description:"Garage door installation and repair"},Septic:{icon:O.A,color:"brown",bgColor:"bg-amber-50",borderColor:"border-amber-200",textColor:"text-amber-900",description:"Septic system services"},"Pest Control":{icon:$.A,color:"green",bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-900",description:"Pest prevention and elimination"},Irrigation:{icon:O.A,color:"green",bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-900",description:"Irrigation system installation and maintenance"},Painting:{icon:V.A,color:"purple",bgColor:"bg-purple-50",borderColor:"border-purple-200",textColor:"text-purple-900",description:"Interior and exterior painting services"}};function J(e){let{businessId:s,services:t=[]}=e,{state:n,updateService:l,nextStep:c,setLoading:o,setError:d}=h(),[m,x]=(0,r.useState)(n.categoryId||""),[u,p]=(0,r.useState)(n.serviceId||""),[g,v]=(0,r.useState)(t),f=g.reduce((e,s)=>{let t=s.category||"Other";return e[t]||(e[t]=[]),e[t].push(s),e},{}),b=Object.keys(f);(0,r.useEffect)(()=>{0===t.length&&j()},[s]);let j=async()=>{try{o(!0),v([{id:"1",name:"HVAC Installation & Replacement",category:"HVAC",description:"Complete HVAC system installation and replacement",duration_minutes:240,price_cents:35e4,is_emergency:!1},{id:"2",name:"HVAC Repair",category:"HVAC",description:"Repair and maintenance of HVAC systems",duration_minutes:120,price_cents:15e3,is_emergency:!0},{id:"3",name:"Water Heater Installation",category:"Plumbing",description:"Water heater installation and replacement",duration_minutes:180,price_cents:12e4,is_emergency:!1},{id:"4",name:"Emergency Plumbing",category:"Plumbing",description:"24/7 emergency plumbing services",duration_minutes:60,price_cents:2e4,is_emergency:!0},{id:"5",name:"Electrical Panel Upgrade",category:"Electrical",description:"Electrical panel upgrade and installation",duration_minutes:300,price_cents:2e5,is_emergency:!1}])}catch(e){d("Failed to load available services")}finally{o(!1)}},N=g.find(e=>e.id===u),y=m&&f[m]||[];return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"What do you need help with?"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Select the type of service you need"})]}),!m&&(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:b.map(e=>{var s;let t=K[e]||K.Mechanical,r=t.icon,n=(null==(s=f[e])?void 0:s.length)||0;return(0,a.jsx)(B.Zp,{className:"cursor-pointer transition-all duration-200 hover:shadow-md ".concat(t.borderColor," hover:border-blue-400"),onClick:()=>{x(e),p("")},children:(0,a.jsx)(B.Wu,{className:"p-6 ".concat(t.bgColor),children:(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)("div",{className:"p-3 rounded-full ".concat(t.bgColor," border ").concat(t.borderColor),children:(0,a.jsx)(r,{className:"w-6 h-6 ".concat(t.textColor)})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold ".concat(t.textColor," mb-1"),children:e}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:t.description}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(W.E,{variant:"secondary",className:"text-xs",children:[n," service",1!==n?"s":""]}),(0,a.jsx)(Y.A,{className:"w-4 h-4 text-gray-400"})]})]})]})})},e)})}),m&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center space-x-3",children:(()=>{let e=K[m]||K.Mechanical,s=e.icon;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"p-2 rounded-full ".concat(e.bgColor," border ").concat(e.borderColor),children:(0,a.jsx)(s,{className:"w-5 h-5 ".concat(e.textColor)})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:m}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})]})})()}),(0,a.jsx)(i.$,{variant:"ghost",onClick:()=>{x(""),p("")},className:"text-gray-500 hover:text-gray-700",children:"Change Category"})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.map(e=>{let s=u===e.id;return(0,a.jsx)(B.Zp,{className:"cursor-pointer transition-all duration-200 hover:shadow-md ".concat(s?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"),onClick:()=>{p(e.id)},children:(0,a.jsx)(B.Wu,{className:"p-4",children:(0,a.jsx)("div",{className:"flex items-start justify-between",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900",children:e.name}),s&&(0,a.jsx)(w.A,{className:"w-5 h-5 text-blue-500"})]}),e.description&&(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.duration_minutes&&(0,a.jsxs)(W.E,{variant:"outline",className:"text-xs",children:[Math.round(e.duration_minutes/60),"h ",e.duration_minutes%60,"min"]}),e.price_cents&&(0,a.jsxs)(W.E,{variant:"outline",className:"text-xs",children:["Starting at $",(e.price_cents/100).toLocaleString()]}),e.is_emergency&&(0,a.jsx)(W.E,{variant:"destructive",className:"text-xs",children:"24/7 Emergency"})]})]})})})},e.id)})}),u&&(0,a.jsx)("div",{className:"flex justify-center pt-6",children:(0,a.jsxs)(i.$,{onClick:()=>{m&&u&&(l(m,u),c())},size:"lg",className:"px-8",children:["Continue with ",null==N?void 0:N.name,(0,a.jsx)(Y.A,{className:"w-4 h-4 ml-2"})]})})]}),0===b.length&&!n.isLoading&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(M.A,{className:"w-8 h-8 text-gray-400"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No services available"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Please contact us directly to discuss your service needs."})]})]})}var X=t(2676);let Q=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("textarea",{className:(0,X.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r})});function ee(e){var s,t,n,l,c,o,d,m,x,u,p,v,b,j,N;let{businessId:y}=e,{state:C,updateAddress:k,nextStep:S,setLoading:A,setError:I}=h(),[_,E]=(0,r.useState)({line1:(null==(s=C.address)?void 0:s.line1)||"",line2:(null==(t=C.address)?void 0:t.line2)||"",city:(null==(n=C.zipInfo)?void 0:n.city)||(null==(l=C.address)?void 0:l.city)||"",region:(null==(c=C.zipInfo)?void 0:c.region)||(null==(o=C.address)?void 0:o.region)||"",postalCode:(null==(d=C.zipInfo)?void 0:d.postalCode)||(null==(m=C.address)?void 0:m.postalCode)||"",countryCode:(null==(x=C.zipInfo)?void 0:x.countryCode)||(null==(u=C.address)?void 0:u.countryCode)||"US",accessNotes:(null==(p=C.address)?void 0:p.accessNotes)||""}),[z,T]=(0,r.useState)(!1),[R,W]=(0,r.useState)(null);(0,r.useEffect)(()=>{C.zipInfo&&!_.city&&E(e=>{var s,t,a,r;return{...e,city:(null==(s=C.zipInfo)?void 0:s.city)||"",region:(null==(t=C.zipInfo)?void 0:t.region)||"",postalCode:(null==(a=C.zipInfo)?void 0:a.postalCode)||"",countryCode:(null==(r=C.zipInfo)?void 0:r.countryCode)||"US"}})},[C.zipInfo]);let U=(e,s)=>{E(t=>({...t,[e]:s})),W(null),I()},Z=async()=>{var e,s,t,a;if(!(null==(e=_.line1)?void 0:e.trim()))return I("Street address is required"),!1;if(!(null==(s=_.city)?void 0:s.trim()))return I("City is required"),!1;if(!(null==(t=_.region)?void 0:t.trim()))return I("State/Province is required"),!1;if(!(null==(a=_.postalCode)?void 0:a.trim()))return I("Postal code is required"),!1;T(!0),A(!0);try{if(await new Promise(e=>setTimeout(e,1e3)),Math.random()>.2)return W({valid:!0,message:"Address validated successfully"}),!0;return W({valid:!1,message:"Address could not be verified. Please check and try again.",suggestions:[{line1:"".concat(_.line1," (Suggested)"),city:_.city,region:_.region,postalCode:_.postalCode}]}),!1}catch(e){return I("Unable to validate address. Please check your input."),!1}finally{T(!1),A(!1)}},F=async()=>{await Z()&&_.line1&&_.city&&_.region&&_.postalCode&&(k({line1:_.line1,line2:_.line2,city:_.city,region:_.region,postalCode:_.postalCode,countryCode:_.countryCode||"US",accessNotes:_.accessNotes}),S())},O=(null==(v=_.line1)?void 0:v.trim())&&(null==(b=_.city)?void 0:b.trim())&&(null==(j=_.region)?void 0:j.trim())&&(null==(N=_.postalCode)?void 0:N.trim());return(0,a.jsxs)("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(f.A,{className:"w-8 h-8 text-blue-600"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Where do you need service?"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Please provide the address where our technician should visit"})]}),C.zipInfo&&(0,a.jsx)(B.Zp,{className:"border-green-200 bg-green-50",children:(0,a.jsx)(B.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(w.A,{className:"w-5 h-5 text-green-600"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-green-900",children:["Service confirmed for ",C.zipInfo.city,", ",C.zipInfo.region]}),(0,a.jsxs)("p",{className:"text-xs text-green-700",children:["Response time: ",C.zipInfo.minResponseTimeHours,"-",C.zipInfo.maxResponseTimeHours," hours"]})]})]})})}),(0,a.jsxs)(B.Zp,{children:[(0,a.jsx)(B.aR,{children:(0,a.jsxs)(B.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)(g.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Service Address"})]})}),(0,a.jsxs)(B.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Street Address *"}),(0,a.jsx)(P.p,{value:_.line1||"",onChange:e=>U("line1",e.target.value),placeholder:"123 Main Street",className:"w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Apartment, Suite, etc. (Optional)"}),(0,a.jsx)(P.p,{value:_.line2||"",onChange:e=>U("line2",e.target.value),placeholder:"Apt 4B, Suite 200, etc.",className:"w-full"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City *"}),(0,a.jsx)(P.p,{value:_.city||"",onChange:e=>U("city",e.target.value),placeholder:"City",className:"w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"State/Province *"}),(0,a.jsx)(P.p,{value:_.region||"",onChange:e=>U("region",e.target.value),placeholder:"State",className:"w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ZIP/Postal Code *"}),(0,a.jsx)(P.p,{value:_.postalCode||"",onChange:e=>U("postalCode",e.target.value),placeholder:"12345",className:"w-full"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Access Instructions (Optional)"}),(0,a.jsx)(Q,{value:_.accessNotes||"",onChange:e=>U("accessNotes",e.target.value),placeholder:"Gate code, parking instructions, pet information, etc.",rows:3,className:"w-full"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Help our technician find and access your property easily"})]})]})]}),R&&(0,a.jsx)(B.Zp,{className:R.valid?"border-green-200 bg-green-50":"border-orange-200 bg-orange-50",children:(0,a.jsx)(B.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[R.valid?(0,a.jsx)(w.A,{className:"w-5 h-5 text-green-600 mt-0.5"}):(0,a.jsx)(D.A,{className:"w-5 h-5 text-orange-600 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium ".concat(R.valid?"text-green-900":"text-orange-900"),children:R.message}),R.suggestions&&R.suggestions.length>0&&(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-orange-900 mb-2",children:"Did you mean:"}),(0,a.jsx)("div",{className:"space-y-2",children:R.suggestions.map((e,s)=>(0,a.jsx)("div",{className:"p-3 bg-white border border-orange-200 rounded-md cursor-pointer hover:bg-orange-25 transition-colors",onClick:()=>{E(s=>({...s,line1:e.line1,city:e.city,region:e.region,postalCode:e.postalCode})),W(null)},children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.line1}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:[e.city,", ",e.region," ",e.postalCode]})]}),(0,a.jsx)(i.$,{variant:"outline",size:"sm",children:"Use This"})]})},s))})]})]})]})})}),(0,a.jsx)("div",{className:"flex justify-center pt-4",children:(0,a.jsx)(i.$,{onClick:F,disabled:!O||z,size:"lg",className:"px-8",children:z?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Validating Address..."]}):"Continue to Date & Time"})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"We'll validate this address to ensure our technician can reach you"})})]})}Q.displayName="Textarea";var es=t(368);function et(e){var s,t;let{businessId:n}=e,{state:l,updateSlot:c,nextStep:o,setLoading:d,setError:m}=h(),[x,u]=(0,r.useState)(""),[p,g]=(0,r.useState)(null),[v,f]=(0,r.useState)("first_available"),[j,N]=(0,r.useState)(new Date),[y,w]=(0,r.useState)({}),[C,k]=(0,r.useState)(!1);(0,r.useEffect)(()=>{A()},[n,l.serviceId,l.zipInfo]);let A=async()=>{var e;if(l.serviceId&&(null==(e=l.zipInfo)?void 0:e.postalCode)){k(!0),m();try{let e=new Date,s=new Date(e);s.setDate(e.getDate()+14);try{let t=await T.getAvailableSlots({business_id:n,service_id:l.serviceId,postal_code:l.zipInfo.postalCode,country_code:l.zipInfo.countryCode,timezone:l.zipInfo.timezone,date_range:{from:e.toISOString().split("T")[0],to:s.toISOString().split("T")[0]}}),a={};if(t.slots.forEach(e=>{let s=new Date(e.start).toISOString().split("T")[0];a[s]||(a[s]=[]),a[s].push({start:e.start,end:e.end,available:!0,price:15e3+Math.floor(5e3*Math.random()),isEmergency:!1})}),w(a),"first_available"===v&&t.first_available){let e=new Date(t.first_available.start).toISOString().split("T")[0];u(e),g({start:t.first_available.start,end:t.first_available.end,available:!0,price:15e3})}}catch(e){m("Unable to load available time slots. Please contact us directly to schedule your appointment."),w({})}}catch(e){m("Unable to load available time slots. Please try again.")}finally{k(!1)}}},I=e=>new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),_=e=>new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),E=(x&&y[x]||[]).filter(e=>e.available);return(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(b.A,{className:"w-8 h-8 text-blue-600"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"When do you need us?"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Choose your preferred appointment time"})]}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsxs)("div",{className:"bg-gray-100 rounded-lg p-1 flex",children:[(0,a.jsxs)(i.$,{variant:"first_available"===v?"default":"ghost",size:"sm",onClick:()=>f("first_available"),className:"rounded-md",children:[(0,a.jsx)(L.A,{className:"w-4 h-4 mr-2"}),"First Available"]}),(0,a.jsxs)(i.$,{variant:"calendar"===v?"default":"ghost",size:"sm",onClick:()=>f("calendar"),className:"rounded-md",children:[(0,a.jsx)(b.A,{className:"w-4 h-4 mr-2"}),"All Appointments"]})]})}),C&&(0,a.jsx)(B.Zp,{children:(0,a.jsxs)(B.Wu,{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading available time slots..."})]})}),"first_available"===v&&!C&&(0,a.jsx)("div",{className:"space-y-4",children:p&&x?(0,a.jsxs)(B.Zp,{className:"border-green-200 bg-green-50",children:[(0,a.jsx)(B.aR,{children:(0,a.jsxs)(B.ZB,{className:"text-green-900 flex items-center",children:[(0,a.jsx)(L.A,{className:"w-5 h-5 mr-2"}),"Next Available Appointment"]})}),(0,a.jsx)(B.Wu,{children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-green-900",children:I(x)}),(0,a.jsxs)("p",{className:"text-green-700",children:[_(p.start)," - ",_(p.end)]})]}),p.price&&(0,a.jsxs)(W.E,{variant:"secondary",className:"bg-green-100 text-green-800",children:["$",(p.price/100).toFixed(0)," starting"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-green-700",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(S.A,{className:"w-4 h-4 mr-1"}),"2 hours estimated"]}),(null==(s=l.zipInfo)?void 0:s.emergencyAvailable)&&(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(L.A,{className:"w-4 h-4 mr-1"}),"Emergency available"]})]})]})})]}):(0,a.jsx)(B.Zp,{className:"border-orange-200 bg-orange-50",children:(0,a.jsxs)(B.Wu,{className:"p-6 text-center",children:[(0,a.jsx)(D.A,{className:"w-8 h-8 text-orange-600 mx-auto mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-orange-900 mb-2",children:"No immediate availability"}),(0,a.jsx)("p",{className:"text-orange-700 mb-4",children:'Switch to "All Appointments" to see available times'}),(0,a.jsx)(i.$,{variant:"outline",onClick:()=>f("calendar"),className:"border-orange-300 text-orange-700 hover:bg-orange-100",children:"View Calendar"})]})})}),"calendar"===v&&!C&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)(B.Zp,{children:[(0,a.jsx)(B.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(B.ZB,{children:j.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>N(new Date(j.getFullYear(),j.getMonth()-1)),children:(0,a.jsx)(es.A,{className:"w-4 h-4"})}),(0,a.jsx)(i.$,{variant:"outline",size:"sm",onClick:()=>N(new Date(j.getFullYear(),j.getMonth()+1)),children:(0,a.jsx)(Y.A,{className:"w-4 h-4"})})]})]})}),(0,a.jsxs)(B.Wu,{children:[(0,a.jsx)("div",{className:"grid grid-cols-7 gap-1 mb-4",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,a.jsx)("div",{className:"p-2 text-center text-sm font-medium text-gray-500",children:e},e))}),(0,a.jsx)("div",{className:"grid grid-cols-7 gap-1",children:(e=>{let s=e.getFullYear(),t=e.getMonth(),a=new Date(s,t,1),r=new Date(s,t+1,0).getDate(),n=a.getDay(),i=[];for(let e=0;e<n;e++)i.push(null);for(let e=1;e<=r;e++)i.push(new Date(s,t,e));return i})(j).map((e,s)=>{if(!e)return(0,a.jsx)("div",{className:"p-2"},s);let t=e.toISOString().split("T")[0],r=(y[e.toISOString().split("T")[0]]||[]).some(e=>e.available),n=x===t,i=(e=>{let s=new Date;return s.setHours(0,0,0,0),e<s})(e)||!r;return(0,a.jsxs)("button",{onClick:()=>!i&&void(u(t),g(null)),disabled:i,className:"\n                        p-2 text-sm rounded-md transition-colors relative\n                        ".concat(i?"text-gray-300 cursor-not-allowed":"text-gray-900 hover:bg-blue-50 cursor-pointer","\n                        ").concat(n?"bg-blue-500 text-white hover:bg-blue-600":"","\n                        ").concat((e=>{let s=new Date;return e.toDateString()===s.toDateString()})(e)&&!n?"bg-blue-100 font-semibold":"","\n                      "),children:[e.getDate(),r&&!n&&(0,a.jsx)("div",{className:"absolute bottom-1 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-green-500 rounded-full"})]},s)})})]})]}),(0,a.jsxs)(B.Zp,{children:[(0,a.jsx)(B.aR,{children:(0,a.jsxs)(B.ZB,{className:"flex items-center",children:[(0,a.jsx)(S.A,{className:"w-5 h-5 mr-2"}),"Available Times"]})}),(0,a.jsx)(B.Wu,{children:x?E.length>0?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:I(x)}),E.map((e,s)=>(0,a.jsx)("button",{onClick:()=>{g(e)},className:"\n                          w-full p-3 rounded-md border text-left transition-colors\n                          ".concat(p===e?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-blue-25","\n                        "),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium",children:[_(e.start)," - ",_(e.end)]}),e.isEmergency&&(0,a.jsx)(W.E,{variant:"destructive",className:"text-xs mt-1",children:"After Hours"})]}),e.price&&(0,a.jsxs)(W.E,{variant:"outline",className:"text-xs",children:["$",(e.price/100).toFixed(0)]})]})},s))]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(S.A,{className:"w-8 h-8 text-gray-400 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No available times on this date"})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(b.A,{className:"w-8 h-8 text-gray-400 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-gray-500",children:"Select a date to see available times"})]})})]})]}),p&&x&&(0,a.jsx)("div",{className:"flex justify-center pt-4",children:(0,a.jsx)(i.$,{onClick:()=>{if(p&&x){var e;c({start:p.start,end:p.end,timezone:(null==(e=l.zipInfo)?void 0:e.timezone)||"America/New_York"}),o()}},size:"lg",className:"px-8",children:"Continue to Contact Info"})}),(null==(t=l.zipInfo)?void 0:t.emergencyAvailable)&&(0,a.jsx)(B.Zp,{className:"border-red-200 bg-red-50",children:(0,a.jsx)(B.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(L.A,{className:"w-5 h-5 text-red-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-red-900",children:"Need emergency service?"}),(0,a.jsxs)("p",{className:"text-xs text-red-700",children:["Call us directly for immediate assistance: ",l.zipInfo.emergencyAvailable?"Available 24/7":"Available during business hours"]})]})]})})})]})}var ea=t(7586),er=t(7804);let en=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(er.bL,{ref:s,className:(0,X.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...r,children:(0,a.jsx)(er.C1,{className:(0,X.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(C.A,{className:"h-4 w-4"})})})});function ei(e){var s,t,n,l,c,o,d,m,x,u,p,g;let{businessId:v,businessName:f="our team"}=e,{state:b,updateContact:N,nextStep:y,setError:C}=h(),[k,S]=(0,r.useState)({firstName:(null==(s=b.contact)?void 0:s.firstName)||"",lastName:(null==(t=b.contact)?void 0:t.lastName)||"",phoneE164:(null==(n=b.contact)?void 0:n.phoneE164)||"",email:(null==(l=b.contact)?void 0:l.email)||"",smsConsent:(null==(c=b.contact)?void 0:c.smsConsent)||!1,marketingConsent:(null==(o=b.contact)?void 0:o.marketingConsent)||!1}),[A,D]=(0,r.useState)(""),[E,z]=(0,r.useState)({}),T=(e,s)=>{S(t=>({...t,[e]:s})),E[e]&&z(s=>({...s,[e]:""})),C()},R=(null==(d=k.firstName)?void 0:d.trim())&&(null==(m=k.lastName)?void 0:m.trim())&&k.phoneE164&&(null==(x=k.email)?void 0:x.trim());return(0,a.jsxs)("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(j.A,{className:"w-8 h-8 text-blue-600"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"How can we reach you?"}),(0,a.jsx)("p",{className:"text-gray-600",children:"We'll use this information to confirm your appointment and send updates"})]}),(0,a.jsxs)(B.Zp,{children:[(0,a.jsx)(B.aR,{children:(0,a.jsxs)(B.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)(j.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Contact Information"})]})}),(0,a.jsxs)(B.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),(0,a.jsx)(P.p,{value:k.firstName||"",onChange:e=>T("firstName",e.target.value),placeholder:"John",className:E.firstName?"border-red-500":""}),E.firstName&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:E.firstName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),(0,a.jsx)(P.p,{value:k.lastName||"",onChange:e=>T("lastName",e.target.value),placeholder:"Doe",className:E.lastName?"border-red-500":""}),E.lastName&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:E.lastName})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(I.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,a.jsx)(P.p,{value:A,onChange:e=>(e=>{D((e=>{let s=e.replace(/\D/g,"");return s.length<=3?s:s.length<=6?"(".concat(s.slice(0,3),") ").concat(s.slice(3)):"(".concat(s.slice(0,3),") ").concat(s.slice(3,6),"-").concat(s.slice(6,10))})(e));let s=e.replace(/\D/g,"");10===s.length?T("phoneE164","+1".concat(s)):11===s.length&&s.startsWith("1")?T("phoneE164","+".concat(s)):T("phoneE164","")})(e.target.value),placeholder:"(555) 123-4567",className:"pl-10 ".concat(E.phoneE164?"border-red-500":""),maxLength:14})]}),E.phoneE164&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:E.phoneE164}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"We'll use this to confirm your appointment and provide updates"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(_.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),(0,a.jsx)(P.p,{type:"email",value:k.email||"",onChange:e=>T("email",e.target.value),placeholder:"john.doe@example.com",className:"pl-10 ".concat(E.email?"border-red-500":"")})]}),E.email&&(0,a.jsx)("p",{className:"text-sm text-red-600 mt-1",children:E.email}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"For appointment confirmations and service receipts"})]})]})]}),(0,a.jsxs)(B.Zp,{children:[(0,a.jsx)(B.aR,{children:(0,a.jsxs)(B.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)(ea.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Communication Preferences"})]})}),(0,a.jsxs)(B.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(en,{id:"sms-consent",checked:k.smsConsent,onCheckedChange:e=>T("smsConsent",e),className:"mt-1"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{htmlFor:"sms-consent",className:"text-sm font-medium text-gray-900 cursor-pointer",children:"Send me text message updates about my appointment"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Get real-time updates about your technician's arrival time and service status. Standard message rates may apply. You can opt out anytime."})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(en,{id:"marketing-consent",checked:k.marketingConsent,onCheckedChange:e=>T("marketingConsent",e),className:"mt-1"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("label",{htmlFor:"marketing-consent",className:"text-sm font-medium text-gray-900 cursor-pointer",children:"Send me promotional offers and maintenance reminders"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Receive seasonal maintenance tips, special offers, and service reminders from ",f,". You can unsubscribe anytime."]})]})]}),(0,a.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-3",children:(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)($.A,{className:"w-4 h-4 text-gray-500 mt-0.5"}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:[(0,a.jsx)("strong",{children:"Privacy Notice:"})," Your information is secure and will only be used to provide service and communicate about your appointment. We never sell or share your data with third parties."]})})]})})]})]}),b.zipInfo&&b.slot&&(0,a.jsx)(B.Zp,{className:"border-blue-200 bg-blue-50",children:(0,a.jsx)(B.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(w.A,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Appointment Summary"}),(0,a.jsxs)("div",{className:"text-xs text-blue-700 space-y-1",children:[(0,a.jsxs)("p",{children:["\uD83D\uDCCD ",null==(u=b.address)?void 0:u.line1,", ",null==(p=b.address)?void 0:p.city,", ",null==(g=b.address)?void 0:g.region]}),(0,a.jsxs)("p",{children:["\uD83D\uDCC5 ",new Date(b.slot.start).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),(0,a.jsxs)("p",{children:["\uD83D\uDD50 ",new Date(b.slot.start).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})," - ",new Date(b.slot.end).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})]})]})]})]})})}),(0,a.jsx)("div",{className:"flex justify-center pt-4",children:(0,a.jsx)(i.$,{onClick:()=>{(()=>{var e,s,t;let a={};return(null==(e=k.firstName)?void 0:e.trim())||(a.firstName="First name is required"),(null==(s=k.lastName)?void 0:s.trim())||(a.lastName="Last name is required"),k.phoneE164?k.phoneE164.match(/^\+1\d{10}$/)||(a.phoneE164="Please enter a valid US phone number"):a.phoneE164="Phone number is required",(null==(t=k.email)?void 0:t.trim())?k.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)||(a.email="Please enter a valid email address"):a.email="Email address is required",z(a),0===Object.keys(a).length})()&&(N({firstName:k.firstName,lastName:k.lastName,phoneE164:k.phoneE164,email:k.email,smsConsent:k.smsConsent,marketingConsent:k.marketingConsent}),y())},disabled:!R,size:"lg",className:"px-8",children:"Continue to Details"})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"All fields marked with * are required to complete your booking"})})]})}en.displayName=er.bL.displayName;var el=t(5664),ec=t(1786);function eo(e){var s,t,l;let{businessId:c,businessName:o="our team"}=e,{state:d,updateDetails:m,nextStep:x,setError:u}=h(),[p,g]=(0,r.useState)({notes:(null==(s=d.details)?void 0:s.notes)||"",attachments:(null==(t=d.details)?void 0:t.attachments)||[],urgencyLevel:(null==(l=d.details)?void 0:l.urgencyLevel)||"normal"}),v=(0,r.useRef)(null),[f,b]=(0,r.useState)(!1),[j,y]=(0,r.useState)([]),C=[{value:"flexible",label:"Flexible",description:"No rush, schedule when convenient",color:"bg-green-50 border-green-200 text-green-900",icon:"\uD83D\uDCC5"},{value:"normal",label:"Normal",description:"Standard service timing",color:"bg-blue-50 border-blue-200 text-blue-900",icon:"\uD83D\uDD27"},{value:"urgent",label:"Urgent",description:"Need service soon, willing to pay priority fee",color:"bg-orange-50 border-orange-200 text-orange-900",icon:"âš¡"},{value:"emergency",label:"Emergency",description:"Immediate attention required",color:"bg-red-50 border-red-200 text-red-900",icon:"\uD83D\uDEA8"}],k=async e=>{let s=Array.from(e.target.files||[]);if(0===s.length)return;b(!0),y([]);let t=["image/jpeg","image/png","image/gif","video/mp4","video/quicktime"],a=p.attachments||[],r=[],n=[];for(let e of s){if(a.length+n.length>=5){r.push("Maximum ".concat(5," files allowed"));break}if(e.size>0xa00000){r.push("".concat(e.name," is too large (max 10MB)"));continue}if(!t.includes(e.type)){r.push("".concat(e.name," is not a supported file type"));continue}n.push(e)}r.length>0&&y(r),n.length>0&&(await new Promise(e=>setTimeout(e,1e3)),g(e=>({...e,attachments:[...e.attachments||[],...n]}))),b(!1),v.current&&(v.current.value="")},S=C.find(e=>e.value===p.urgencyLevel);return(0,a.jsxs)("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(N.A,{className:"w-8 h-8 text-blue-600"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Tell us about the problem"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Help our technician prepare by describing the issue and sharing photos if helpful"})]}),(0,a.jsxs)(B.Zp,{children:[(0,a.jsx)(B.aR,{children:(0,a.jsxs)(B.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)(N.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Problem Description"})]})}),(0,a.jsx)(B.Wu,{className:"space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Describe the issue (Optional)"}),(0,a.jsx)(Q,{value:p.notes||"",onChange:e=>{var s;return s=e.target.value,void(g(e=>({...e,notes:s})),u())},placeholder:"Tell us what's happening... For example: 'Air conditioner not cooling', 'Strange noise from water heater', 'Electrical outlet not working', etc.",rows:4,className:"w-full"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"The more details you provide, the better we can prepare for your service call"})]})})]}),(0,a.jsxs)(B.Zp,{children:[(0,a.jsx)(B.aR,{children:(0,a.jsxs)(B.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)(L.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"How urgent is this?"})]})}),(0,a.jsxs)(B.Wu,{children:[(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:C.map(e=>(0,a.jsx)("button",{onClick:()=>{var s;return s=e.value,void g(e=>({...e,urgencyLevel:s}))},className:"\n                  p-4 rounded-lg border-2 text-left transition-all duration-200\n                  ".concat(p.urgencyLevel===e.value?e.color+" border-current":"bg-white border-gray-200 hover:border-gray-300","\n                "),children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:e.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-sm mb-1",children:e.label}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:e.description})]})]})},e.value))}),"emergency"===p.urgencyLevel&&(0,a.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)(D.A,{className:"w-4 h-4 text-red-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-red-900",children:"Emergency Service"}),(0,a.jsx)("p",{className:"text-xs text-red-700 mt-1",children:"Emergency calls may include additional fees and will be prioritized for immediate response."})]})]})})]})]}),(0,a.jsxs)(B.Zp,{children:[(0,a.jsx)(B.aR,{children:(0,a.jsxs)(B.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)(el.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Photos & Videos (Optional)"})]})}),(0,a.jsx)(B.Wu,{className:"space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Share photos or videos to help our technician understand the problem better"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[(0,a.jsx)("input",{ref:v,type:"file",multiple:!0,accept:"image/*,video/*",onChange:k,className:"hidden"}),(0,a.jsx)(ec.A,{className:"w-8 h-8 text-gray-400 mx-auto mb-3"}),(0,a.jsx)(i.$,{onClick:()=>{var e;null==(e=v.current)||e.click()},disabled:f,variant:"outline",className:"mb-2",children:f?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin mr-2"}),"Uploading..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(el.A,{className:"w-4 h-4 mr-2"}),"Choose Files"]})}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Images and videos up to 10MB each â€¢ Max 5 files"})]}),j.length>0&&(0,a.jsx)("div",{className:"mt-3 space-y-1",children:j.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-red-600",children:[(0,a.jsx)(D.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:e})]},s))}),p.attachments&&p.attachments.length>0&&(0,a.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:["Uploaded Files (",p.attachments.length,"/5)"]}),p.attachments.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-lg",children:e.type.startsWith("image/")?"\uD83D\uDDBCï¸":e.type.startsWith("video/")?"\uD83C\uDFA5":"\uD83D\uDCC4"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:(e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]})(e.size)})]})]}),(0,a.jsx)(i.$,{onClick:()=>{g(e=>{var t;return{...e,attachments:(null==(t=e.attachments)?void 0:t.filter((e,t)=>t!==s))||[]}})},variant:"ghost",size:"sm",className:"text-gray-400 hover:text-red-600",children:(0,a.jsx)(n.A,{className:"w-4 h-4"})})]},s))]})]})})]}),d.contact&&d.slot&&(0,a.jsx)(B.Zp,{className:"border-blue-200 bg-blue-50",children:(0,a.jsx)(B.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(w.A,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Ready to Review"}),(0,a.jsxs)("div",{className:"text-xs text-blue-700 space-y-1",children:[(0,a.jsxs)("p",{children:["\uD83D\uDC64 ",d.contact.firstName," ",d.contact.lastName]}),(0,a.jsxs)("p",{children:["\uD83D\uDCDE ",d.contact.phoneE164]}),(0,a.jsxs)("p",{children:["\uD83D\uDCE7 ",d.contact.email]}),S&&(0,a.jsxs)("div",{className:"flex items-center space-x-1 mt-2",children:[(0,a.jsx)("span",{children:S.icon}),(0,a.jsxs)(W.E,{variant:"outline",className:"text-xs",children:[S.label," Priority"]})]})]})]})]})})}),(0,a.jsx)("div",{className:"flex justify-center pt-4",children:(0,a.jsx)(i.$,{onClick:()=>{m({notes:p.notes||"",attachments:p.attachments||[],urgencyLevel:p.urgencyLevel||"normal"}),x()},size:"lg",className:"px-8",children:"Review Booking"})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Photos and descriptions help our technicians come prepared with the right tools and parts"})})]})}var ed=t(8519);class em{async getAvailability(e){let s=(0,E.M7)("bookings/availability"),t=await fetch(s,{method:"POST",headers:(0,E.getDefaultHeaders)(),body:JSON.stringify(e)});if(!t.ok)throw Error((await t.json().catch(()=>({detail:"Failed to get availability"}))).detail||"Failed to get availability");return t.json()}async getNextAvailableSlot(e,s,t){let a=new URLSearchParams({business_id:e,service_id:s});t&&a.append("preferred_date",t);let r=(0,E.M7)("bookings/availability/next-slot?".concat(a)),n=await fetch(r,{method:"GET",headers:(0,E.getDefaultHeaders)()});if(!n.ok)throw Error((await n.json().catch(()=>({detail:"No available slots found"}))).detail||"No available slots found");return n.json()}async createBooking(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=new URLSearchParams;s&&t.append("auto_confirm","true");let a="bookings".concat(t.toString()?"?"+t.toString():""),r=(0,E.M7)(a),n=await fetch(r,{method:"POST",headers:(0,E.getDefaultHeaders)(),body:JSON.stringify(e)});if(!n.ok)throw Error((await n.json().catch(()=>({detail:"Failed to create booking"}))).detail||"Failed to create booking");return n.json()}async getBooking(e){let s=(0,E.M7)("bookings/".concat(e)),t=await fetch(s,{method:"GET",headers:(0,E.getDefaultHeaders)()});if(!t.ok)throw Error((await t.json().catch(()=>({detail:"Booking not found"}))).detail||"Booking not found");return t.json()}async rescheduleBooking(e,s,t){let a=!(arguments.length>3)||void 0===arguments[3]||arguments[3],r=(0,E.M7)("bookings/".concat(e,"/reschedule")),n=await fetch(r,{method:"PATCH",headers:(0,E.getDefaultHeaders)(),body:JSON.stringify({booking_id:e,new_scheduled_at:s,reason:t,notify_customer:a})});if(!n.ok)throw Error((await n.json().catch(()=>({detail:"Failed to reschedule booking"}))).detail||"Failed to reschedule booking");return n.json()}async cancelBooking(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"customer",a=arguments.length>3?arguments[3]:void 0,r=!(arguments.length>4)||void 0===arguments[4]||arguments[4],n=(0,E.M7)("bookings/".concat(e,"/cancel")),i=await fetch(n,{method:"PATCH",headers:(0,E.getDefaultHeaders)(),body:JSON.stringify({booking_id:e,reason:s,cancelled_by:t,refund_amount:a,notify_customer:r})});if(!i.ok)throw Error((await i.json().catch(()=>({detail:"Failed to cancel booking"}))).detail||"Failed to cancel booking");return i.json()}generateIdempotencyKey(){return"booking_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}formatDate(e){return e.toISOString().split("T")[0]}formatDateTime(e){return e.toISOString()}parseDateTime(e){return new Date(e)}async getUserIpAddress(){try{let e=await fetch("https://api.ipify.org?format=json");return(await e.json()).ip}catch(e){return}}getUserAgent(){return"undefined"!=typeof navigator?navigator.userAgent:""}constructor(){this.config=(0,E.Jh)()}}let ex=new em;function eu(e){var s,t,n,l,c;let{businessId:o,businessName:d="Professional Services",businessPhone:m,businessEmail:x}=e,{state:u,updateFlags:p,nextStep:v,setLoading:f,setError:C}=h(),[k,A]=(0,r.useState)(!1),D=async()=>{var e,s,t,a,r,n,i,l,c,d,m,x,h,p,g,b;if(!u.termsAccepted)return void C("Please accept the terms of service to continue");if((null==(e=u.zipInfo)?void 0:e.dispatchFeeCents)&&u.zipInfo.dispatchFeeCents>0&&!u.dispatchFeeAccepted)return void C("Please accept the dispatch fee to continue");A(!0),f(!0),C();try{let e={business_id:o,service_id:u.serviceId,requested_at:new Date().toISOString(),customer_name:"".concat((null==(s=u.contact)?void 0:s.firstName)||""," ").concat((null==(t=u.contact)?void 0:t.lastName)||"").trim(),customer_email:(null==(a=u.contact)?void 0:a.email)||"",customer_phone:(null==(r=u.contact)?void 0:r.phoneE164)||"",service_address:[(null==(n=u.address)?void 0:n.line1)||"",null==(i=u.address)?void 0:i.line2,"".concat((null==(l=u.address)?void 0:l.city)||"",", ").concat((null==(c=u.address)?void 0:c.region)||""," ").concat((null==(d=u.address)?void 0:d.postalCode)||"")].filter(Boolean).join(", "),service_city:null==(m=u.address)?void 0:m.city,service_state:null==(x=u.address)?void 0:x.region,service_zip:null==(h=u.address)?void 0:h.postalCode,problem_description:(null==(p=u.details)?void 0:p.notes)||"",special_instructions:void 0,access_instructions:null==(g=u.address)?void 0:g.accessNotes,preferred_contact_method:"phone",sms_consent:!!(null==(b=u.contact)?void 0:b.smsConsent),email_consent:!0,source:"website",user_agent:"undefined"!=typeof navigator?navigator.userAgent:void 0,ip_address:void 0,idempotency_key:ex.generateIdempotencyKey()};try{await ex.createBooking(e,!0)}catch(e){Date.now().toString().slice(-6)}v()}catch(e){C("Failed to submit booking. Please try again.")}finally{A(!1),f(!1)}},E=e=>new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),z=(e=>{let s={flexible:{label:"Flexible",icon:"\uD83D\uDCC5",color:"bg-green-100 text-green-800"},normal:{label:"Normal",icon:"\uD83D\uDD27",color:"bg-blue-100 text-blue-800"},urgent:{label:"Urgent",icon:"âš¡",color:"bg-orange-100 text-orange-800"},emergency:{label:"Emergency",icon:"\uD83D\uDEA8",color:"bg-red-100 text-red-800"}};return s[e]||s.normal})((null==(s=u.details)?void 0:s.urgencyLevel)||"normal"),T=(null==(t=u.zipInfo)?void 0:t.dispatchFeeCents)||0;return(0,a.jsxs)("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(y.A,{className:"w-8 h-8 text-blue-600"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Review Your Booking"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Please review all details before confirming your service appointment"})]}),(0,a.jsxs)(B.Zp,{children:[(0,a.jsx)(B.aR,{children:(0,a.jsxs)(B.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)(b.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Service Details"})]})}),(0,a.jsxs)(B.Wu,{className:"space-y-4",children:[u.slot&&(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(S.A,{className:"w-5 h-5 text-gray-500 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:new Date(u.slot.start).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[E(u.slot.start)," - ",E(u.slot.end)]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:u.slot.timezone})]})]}),u.address&&(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(g.A,{className:"w-5 h-5 text-gray-500 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Service Address"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[u.address.line1,u.address.line2&&", ".concat(u.address.line2)]}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[u.address.city,", ",u.address.region," ",u.address.postalCode]}),u.address.accessNotes&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[(0,a.jsx)("strong",{children:"Access Notes:"})," ",u.address.accessNotes]})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(N.A,{className:"w-5 h-5 text-gray-500 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Service Category"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:u.categoryId}),(null==(n=u.details)?void 0:n.notes)&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[(0,a.jsx)("strong",{children:"Notes:"})," ",u.details.notes]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(L.A,{className:"w-5 h-5 text-gray-500"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"Priority:"}),(0,a.jsxs)(W.E,{className:z.color,children:[z.icon," ",z.label]})]})]}),(null==(l=u.details)?void 0:l.attachments)&&u.details.attachments.length>0&&(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(N.A,{className:"w-5 h-5 text-gray-500 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Attachments"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[u.details.attachments.length," file",1!==u.details.attachments.length?"s":""," uploaded"]})]})]})]})]}),(0,a.jsxs)(B.Zp,{children:[(0,a.jsx)(B.aR,{children:(0,a.jsxs)(B.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)(j.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Contact Information"})]})}),(0,a.jsx)(B.Wu,{className:"space-y-3",children:u.contact&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(j.A,{className:"w-4 h-4 text-gray-500"}),(0,a.jsxs)("span",{className:"text-sm",children:[u.contact.firstName," ",u.contact.lastName]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(I.A,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm",children:u.contact.phoneE164}),u.contact.smsConsent&&(0,a.jsx)(W.E,{variant:"outline",className:"text-xs",children:"SMS Updates"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(_.A,{className:"w-4 h-4 text-gray-500"}),(0,a.jsx)("span",{className:"text-sm",children:u.contact.email})]})]})})]}),(0,a.jsxs)(B.Zp,{children:[(0,a.jsx)(B.aR,{children:(0,a.jsxs)(B.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)(ed.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Service Fees"})]})}),(0,a.jsxs)(B.Wu,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Service Call"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Quoted on-site"})]}),T>0&&(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"Dispatch Fee"}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:["$",(T/100).toFixed(2)]})]}),(0,a.jsxs)("div",{className:"border-t pt-2",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"font-medium",children:"Total Due Today"}),(0,a.jsxs)("span",{className:"font-bold text-lg",children:["$",T>0?(T/100).toFixed(2):"0.00"]})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Service charges will be quoted after diagnosis"})]})]})]}),(0,a.jsxs)(B.Zp,{children:[(0,a.jsx)(B.aR,{children:(0,a.jsxs)(B.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)($.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Confirmations"})]})}),(0,a.jsxs)(B.Wu,{className:"space-y-4",children:[T>0&&(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(en,{id:"dispatch-fee",checked:u.dispatchFeeAccepted,onCheckedChange:e=>{p({dispatchFeeAccepted:e})},className:"mt-1"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"dispatch-fee",className:"text-sm font-medium text-gray-900 cursor-pointer",children:["I agree to pay the $",(T/100).toFixed(2)," dispatch fee"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This fee covers the cost of sending a technician to your location and may be applied toward service charges."})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(en,{id:"terms",checked:u.termsAccepted,onCheckedChange:e=>{p({termsAccepted:e})},className:"mt-1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"terms",className:"text-sm font-medium text-gray-900 cursor-pointer",children:"I accept the terms of service and privacy policy"}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["By booking this service, you agree to our"," ",(0,a.jsx)("a",{href:"#",className:"text-blue-600 hover:underline",children:"terms of service"})," and"," ",(0,a.jsx)("a",{href:"#",className:"text-blue-600 hover:underline",children:"privacy policy"}),"."]})]})]})]})]}),(0,a.jsx)(B.Zp,{className:"border-blue-200 bg-blue-50",children:(0,a.jsx)(B.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(w.A,{className:"w-5 h-5 text-blue-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Questions about your booking?"}),(0,a.jsxs)("div",{className:"text-xs text-blue-700 space-y-1",children:[m&&(0,a.jsxs)("p",{children:["\uD83D\uDCDE Call us: ",m]}),x&&(0,a.jsxs)("p",{children:["\uD83D\uDCE7 Email: ",x]}),(0,a.jsxs)("p",{children:["We'll send confirmation details to ",null==(c=u.contact)?void 0:c.email]})]})]})]})})}),(0,a.jsx)("div",{className:"flex justify-center pt-4",children:(0,a.jsx)(i.$,{onClick:D,disabled:!u.termsAccepted||k||T>0&&!u.dispatchFeeAccepted,size:"lg",className:"px-8",children:k?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Confirming Booking..."]}):"Confirm Booking"})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"\uD83D\uDD12 Your information is secure and encrypted. We never store payment details."})})]})}var eh=t(9347),ep=t(5022);function eg(e){var s,t,n;let{businessId:l,businessName:c="Professional Services",businessPhone:o,businessEmail:d,onClose:m}=e,{state:x,resetWizard:u}=h(),[p]=(0,r.useState)(()=>"BK-"+Math.random().toString(36).substr(2,9).toUpperCase()),[v,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=setTimeout(()=>{},3e4);return()=>clearTimeout(e)},[]);let N=e=>new Date(e).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),y=e=>new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),C=async()=>{var e,s;let t={title:"".concat(c," Service Appointment"),text:"I have a service appointment scheduled for ".concat(N((null==(e=x.slot)?void 0:e.start)||"")," at ").concat(y((null==(s=x.slot)?void 0:s.start)||"")),url:window.location.href};if(navigator.share)try{await navigator.share(t)}catch(e){}else navigator.clipboard.writeText("".concat(t.title,"\n").concat(t.text,"\nBooking ID: ").concat(p)),alert("Booking details copied to clipboard!")};return(0,a.jsxs)("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(w.A,{className:"w-12 h-12 text-green-600"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Booking Confirmed!"}),(0,a.jsx)("p",{className:"text-lg text-gray-600 mb-4",children:"Your service appointment has been scheduled"}),(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 inline-block",children:(0,a.jsxs)("p",{className:"text-sm font-medium text-green-900",children:["Booking ID: ",(0,a.jsx)("span",{className:"font-mono",children:p})]})})]}),(0,a.jsxs)(B.Zp,{className:"border-green-200",children:[(0,a.jsx)(B.aR,{className:"bg-green-50",children:(0,a.jsxs)(B.ZB,{className:"flex items-center space-x-2 text-green-900",children:[(0,a.jsx)(b.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Your Appointment"})]})}),(0,a.jsxs)(B.Wu,{className:"p-6 space-y-4",children:[x.slot&&(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(S.A,{className:"w-5 h-5 text-gray-500 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-semibold text-gray-900 text-lg",children:N(x.slot.start)}),(0,a.jsxs)("p",{className:"text-gray-600",children:[y(x.slot.start)," - ",y(x.slot.end)]}),(0,a.jsx)(W.E,{variant:"outline",className:"mt-1",children:x.slot.timezone})]})]}),x.address&&(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(g.A,{className:"w-5 h-5 text-gray-500 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-medium text-gray-900",children:[x.address.line1,x.address.line2&&", ".concat(x.address.line2)]}),(0,a.jsxs)("p",{className:"text-gray-600",children:[x.address.city,", ",x.address.region," ",x.address.postalCode]})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)(eh.A,{className:"w-5 h-5 text-gray-500 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Service Type"}),(0,a.jsx)("p",{className:"text-gray-600",children:x.categoryId}),(null==(s=x.details)?void 0:s.urgencyLevel)&&"normal"!==x.details.urgencyLevel&&(0,a.jsxs)(W.E,{variant:"outline",className:"mt-1 capitalize",children:[x.details.urgencyLevel," Priority"]})]})]})]})]}),(0,a.jsxs)(B.Zp,{children:[(0,a.jsx)(B.aR,{children:(0,a.jsxs)(B.ZB,{className:"flex items-center space-x-2",children:[(0,a.jsx)(ea.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"What Happens Next"})]})}),(0,a.jsx)(B.Wu,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,a.jsx)("span",{className:"text-xs font-bold text-blue-600",children:"1"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Confirmation Email"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["We've sent confirmation details to ",null==(t=x.contact)?void 0:t.email]})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,a.jsx)("span",{className:"text-xs font-bold text-blue-600",children:"2"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Technician Assignment"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["A qualified technician will be assigned ",x.zipInfo?"".concat(x.zipInfo.minResponseTimeHours,"-").concat(x.zipInfo.maxResponseTimeHours," hours"):"within 24 hours"]})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,a.jsx)("span",{className:"text-xs font-bold text-blue-600",children:"3"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Pre-Arrival Contact"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:(null==(n=x.contact)?void 0:n.smsConsent)?"You'll receive SMS updates and a call 30 minutes before arrival":"You'll receive a call 30 minutes before arrival"})]})]}),(0,a.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,a.jsx)("span",{className:"text-xs font-bold text-blue-600",children:"4"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:"Service Completion"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"After service, you'll receive a detailed report and invoice"})]})]})]})})]}),(0,a.jsx)(B.Zp,{className:"border-blue-200 bg-blue-50",children:(0,a.jsx)(B.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Need to make changes or have questions?"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-2 sm:space-y-0 sm:space-x-4 text-sm text-blue-700",children:[o&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(I.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:o})]}),d&&(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)(_.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:d})]})]}),(0,a.jsxs)("p",{className:"text-xs text-blue-600 mt-2",children:["Reference Booking ID: ",p]})]})})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[(0,a.jsxs)(i.$,{onClick:()=>{let e=(()=>{var e,s,t,a,r,n,i;if(!x.slot)return"";let l=new Date(x.slot.start),m=new Date(x.slot.end),u=e=>e.toISOString().replace(/[-:]/g,"").split(".")[0]+"Z",h=encodeURIComponent("".concat(c," Service Appointment")),g=encodeURIComponent("Service: ".concat(x.categoryId,"\n")+"Address: ".concat(null==(e=x.address)?void 0:e.line1,", ").concat(null==(s=x.address)?void 0:s.city,", ").concat(null==(t=x.address)?void 0:t.region,"\n")+"Booking ID: ".concat(p,"\n")+"Contact: ".concat(o||d||"")),v=encodeURIComponent("".concat(null==(a=x.address)?void 0:a.line1,", ").concat(null==(r=x.address)?void 0:r.city,", ").concat(null==(n=x.address)?void 0:n.region," ").concat(null==(i=x.address)?void 0:i.postalCode));return"https://calendar.google.com/calendar/render?action=TEMPLATE&text=".concat(h,"&dates=").concat(u(l),"/").concat(u(m),"&details=").concat(g,"&location=").concat(v)})();window.open(e,"_blank")},variant:"outline",className:"flex-1",children:[(0,a.jsx)(b.A,{className:"w-4 h-4 mr-2"}),"Add to Calendar"]}),(0,a.jsxs)(i.$,{onClick:C,variant:"outline",className:"flex-1",children:[(0,a.jsx)(ep.A,{className:"w-4 h-4 mr-2"}),"Share Details"]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsx)(i.$,{onClick:()=>{u()},variant:"outline",className:"flex-1",children:"Book Another Service"}),(0,a.jsxs)(i.$,{onClick:()=>{u(),null==m||m()},className:"flex-1",children:[(0,a.jsx)(f.A,{className:"w-4 h-4 mr-2"}),"Back to Website"]})]}),(0,a.jsxs)("div",{className:"text-center pt-6 border-t",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Thank you for choosing ",c,"!"]}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"We look forward to serving you."})]})]})}function ev(e){let{businessId:s,businessName:t,businessPhone:r,businessEmail:l,services:c,onClose:o,onComplete:d}=e,{state:x,prevStep:u,canProceed:p,resetWizard:g}=h(),{currentStep:v,isLoading:f}=x;return(0,a.jsxs)("div",{className:"flex flex-col h-full bg-white",children:[(0,a.jsxs)("div",{className:"flex-shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"Book Service"}),t&&(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["with ",t]})]}),(0,a.jsx)(i.$,{variant:"ghost",size:"sm",onClick:()=>{g(),null==o||o()},className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)(n.A,{className:"w-5 h-5"})})]}),(0,a.jsx)(k,{showLabels:!1})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:(()=>{switch(v){case m.ZIP_CHECK:return(0,a.jsx)(Z,{businessId:s,businessName:t,businessPhone:r,businessEmail:l});case m.CATEGORY:return(0,a.jsx)(J,{businessId:s,services:null==c?void 0:c.map(e=>{var s;return{id:e.id,name:e.name,category:null!=(s=e.category)?s:"General",description:e.description,duration_minutes:e.estimated_duration_minutes,price_cents:"number"==typeof e.base_price?Math.round(100*e.base_price):void 0,is_emergency:!1}})});case m.ADDRESS:return(0,a.jsx)(ee,{businessId:s});case m.DATETIME:return(0,a.jsx)(et,{businessId:s});case m.CONTACT:return(0,a.jsx)(ei,{businessId:s,businessName:t});case m.DETAILS:return(0,a.jsx)(eo,{businessId:s,businessName:t});case m.REVIEW:return(0,a.jsx)(eu,{businessId:s,businessName:t,businessPhone:r,businessEmail:l});case m.CONFIRMATION:return(0,a.jsx)(eg,{businessId:s,businessName:t,businessPhone:r,businessEmail:l,onClose:o});default:return(0,a.jsx)("div",{className:"p-6 text-center",children:"Unknown step"})}})()}),(0,a.jsx)("div",{className:"flex-shrink-0 border-t border-gray-200 p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{children:v>m.ZIP_CHECK&&(0,a.jsx)(i.$,{variant:"outline",onClick:u,disabled:f,children:"Back"})}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[f&&(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,a.jsx)("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-blue-500 rounded-full animate-spin"}),(0,a.jsx)("span",{children:"Loading..."})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Step ",v+1," of ",Object.keys(m).length]})]})]})})]})}function ef(e){let{businessId:s,onComplete:t,onClose:r,className:n=""}=e;return(0,a.jsx)("div",{className:"w-full h-full ".concat(n),children:(0,a.jsx)(u,{businessId:s,onComplete:e=>{null==t||t(e)},onError:e=>{},children:(0,a.jsx)(ev,{...e})})})}},6170:(e,s,t)=>{t.d(s,{p:()=>i});var a=t(5155),r=t(2115),n=t(2676);let i=r.forwardRef((e,s)=>{let{className:t,type:r,...i}=e;return(0,a.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...i})});i.displayName="Input"},7003:(e,s,t)=>{t.d(s,{$:()=>o});var a=t(5155),r=t(2115),n=t(2467),i=t(3101),l=t(2676);let c=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,s)=>{let{className:t,variant:r,size:i,asChild:o=!1,...d}=e,m=o?n.DX:"button";return(0,a.jsx)(m,{className:(0,l.cn)(c({variant:r,size:i,className:t})),ref:s,...d})});o.displayName="Button"},7507:(e,s,t)=>{t.d(s,{bq:()=>x,eb:()=>g,gC:()=>p,l6:()=>d,yv:()=>m});var a=t(5155),r=t(2115),n=t(1499),i=t(4033),l=t(2108),c=t(5917),o=t(2676);let d=n.bL;n.YJ;let m=n.WT,x=r.forwardRef((e,s)=>{let{className:t,children:r,...l}=e;return(0,a.jsxs)(n.l9,{ref:s,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...l,children:[r,(0,a.jsx)(n.In,{asChild:!0,children:(0,a.jsx)(i.A,{className:"h-4 w-4 opacity-50"})})]})});x.displayName=n.l9.displayName;let u=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.PP,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(l.A,{className:"h-4 w-4"})})});u.displayName=n.PP.displayName;let h=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.wn,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(i.A,{className:"h-4 w-4"})})});h.displayName=n.wn.displayName;let p=r.forwardRef((e,s)=>{let{className:t,children:r,position:i="popper",...l}=e;return(0,a.jsx)(n.ZL,{children:(0,a.jsxs)(n.UC,{ref:s,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...l,children:[(0,a.jsx)(u,{}),(0,a.jsx)(n.LM,{className:(0,o.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,a.jsx)(h,{})]})})});p.displayName=n.UC.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.JU,{ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r})}).displayName=n.JU.displayName;let g=r.forwardRef((e,s)=>{let{className:t,children:r,...i}=e;return(0,a.jsxs)(n.q7,{ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.VF,{children:(0,a.jsx)(c.A,{className:"h-4 w-4"})})}),(0,a.jsx)(n.p4,{children:r})]})});g.displayName=n.q7.displayName,r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.wv,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",t),...r})}).displayName=n.wv.displayName},7812:(e,s,t)=>{t.d(s,{E:()=>l});var a=t(5155);t(2115);var r=t(3101),n=t(2676);let i=(0,r.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:s,variant:t,...r}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:t}),s),...r})}},8291:(e,s,t)=>{t.d(s,{Jh:()=>c,M7:()=>m,dz:()=>d,getBackendUrl:()=>x,getDefaultHeaders:()=>u});var a=t(5704);function r(){if(void 0!==a&&a.env.NEXT_PUBLIC_ENVIRONMENT)return a.env.NEXT_PUBLIC_ENVIRONMENT;let e=window.location.hostname;return"localhost"===e||"127.0.0.1"===e||e.startsWith("192.168.")?"development":e.includes("staging")||e.includes("dev")||e.includes("preview")?"staging":"production"}function n(e){return"http://localhost:8000"}let i=null;function l(){return i||(i=function(){let e=r(),s=n(e);return{api:{baseUrl:s.includes("/api/v1")?s:"".concat(s,"/api/v1"),apiVersion:"v1",timeout:"development"===e?3e4:15e3,retries:"development"===e?1:3,environment:e},features:{analytics:!1,voiceAgent:"true"===a.env.NEXT_PUBLIC_VOICE_AGENT_ENABLED,bookingWidget:"false"!==a.env.NEXT_PUBLIC_BOOKING_WIDGET_ENABLED,errorReporting:"production"===e},business:{defaultBusinessId:(()=>{let s="550e8400-e29b-41d4-a716-446655440010";if("development"===e&&!s)throw Error("NEXT_PUBLIC_BUSINESS_ID is required in development");return s})(),defaultBusinessName:"Elite HVAC Austin",defaultBusinessPhone:"(512) 555-0100",defaultBusinessEmail:"info@elitehvac.com"}}}()),i}function c(){return l().api}function o(e){let s=c(),t=e.startsWith("/")?e.slice(1):e;return"".concat(s.baseUrl,"/").concat(t)}function d(e){let s=e.startsWith("/")?e.slice(1):e;return o("public/".concat(s))}function m(e){return o(e.startsWith("/")?e.slice(1):e)}function x(){return n(r())}function u(){let e={"Content-Type":"application/json"};return"development"===l().api.environment&&(e["X-Environment"]="development"),e["X-API-Version"]=c().apiVersion,c().baseUrl.includes("ngrok")&&(e["ngrok-skip-browser-warning"]="true"),e}},9968:(e,s,t)=>{t.d(s,{Hero365BookingProvider:()=>j});var a=t(5155),r=t(2115),n=t(5229),i=t(4004),l=t(2056),c=t(9559),o=t(5626),d=t(9141),m=t(3664),x=t(7003),u=t(3209),h=t(7812);class p extends r.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e,errorId:"ERR-".concat(Date.now().toString().slice(-6))}}componentDidCatch(e,s){this.setState({error:e,errorInfo:s}),fetch("/api/v1/analytics/errors",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:"booking_widget_error",properties:{error:e.message,stack:e.stack,componentStack:s.componentStack,errorId:this.state.errorId,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href}})}).catch(e=>{})}render(){if(this.state.hasError){let{businessName:e="our team",businessPhone:s,businessEmail:t}=this.props,{error:r,errorId:n}=this.state;return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:(0,a.jsxs)(u.Zp,{className:"w-full max-w-2xl",children:[(0,a.jsxs)(u.aR,{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)(l.A,{className:"w-8 h-8 text-red-600"})}),(0,a.jsx)(u.ZB,{className:"text-2xl text-gray-900",children:"Something went wrong"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"We encountered an unexpected error while processing your booking request. Don't worry - your information is safe and we're here to help."})]}),(0,a.jsxs)(u.Wu,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Error Reference"}),(0,a.jsx)(h.E,{variant:"secondary",className:"font-mono text-xs",children:n})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Please reference this ID when contacting support."})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:"What you can do:"}),(0,a.jsxs)("div",{className:"grid gap-3",children:[(0,a.jsxs)(x.$,{onClick:this.handleRetry,className:"w-full justify-start",variant:"outline",children:[(0,a.jsx)(c.A,{className:"w-4 h-4 mr-2"}),"Try Again"]}),(0,a.jsxs)(x.$,{onClick:this.handleGoBack,className:"w-full justify-start",variant:"outline",children:[(0,a.jsx)(o.A,{className:"w-4 h-4 mr-2"}),"Go Back to Website"]}),s&&(0,a.jsxs)(x.$,{onClick:()=>window.open("tel:".concat(s),"_self"),className:"w-full justify-start",variant:"outline",children:[(0,a.jsx)(d.A,{className:"w-4 h-4 mr-2"}),"Call ",e," - ",s]}),t&&(0,a.jsxs)(x.$,{onClick:()=>window.open("mailto:".concat(t,"?subject=Booking Error ").concat(n),"_self"),className:"w-full justify-start",variant:"outline",children:[(0,a.jsx)(m.A,{className:"w-4 h-4 mr-2"}),"Email ",e]})]})]}),(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Need immediate assistance?"}),(0,a.jsx)("p",{className:"text-sm text-blue-800",children:s?(0,a.jsxs)(a.Fragment,{children:["Call us directly at ",(0,a.jsx)("strong",{children:s})," and we'll help you schedule your service right away."]}):(0,a.jsxs)(a.Fragment,{children:["Contact ",e," directly and we'll help you schedule your service right away."]})})]}),!1]})]})})}return this.props.children}constructor(e){super(e),this.handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null,errorId:""}),this.props.onReset&&this.props.onReset()},this.handleGoBack=()=>{this.props.onGoBack?this.props.onGoBack():window.location.reload()},this.state={hasError:!1,error:null,errorInfo:null,errorId:""}}}var g=t(6485),v=t(2676);function f(e){let{onClick:s,companyName:t="Book Appointment",primaryColor:r="#3b82f6",className:n}=e;return(0,a.jsxs)(x.$,{onClick:s,className:(0,v.cn)("fixed bottom-4 right-4 z-40 rounded-full shadow-lg",n),style:{backgroundColor:r},children:[(0,a.jsx)(g.A,{className:"w-5 h-5 mr-2"}),t]})}t(5704);let b=(0,r.createContext)(void 0);function j(e){let{children:s,businessId:t,services:l,companyName:c="Professional Services",companyLogo:o,companyPhone:d,companyEmail:m,primaryColor:x="#3b82f6",showLauncher:u=!1}=e,[h,g]=(0,r.useState)(!1),[v,j]=(0,r.useState)(),N=(0,r.useCallback)(e=>{j(e),g(!0),document.body.style.overflow="hidden",window.gtag&&window.gtag("event","booking_widget_opened",{business_id:t,service_id:e})},[t]),y=(0,r.useCallback)(()=>{g(!1),j(void 0),document.body.style.overflow="",window.gtag&&window.gtag("event","booking_widget_closed",{business_id:t})},[t]),w=v?l.filter(e=>e.id===v):l;return(0,a.jsxs)(b.Provider,{value:{isOpen:h,openBookingWidget:N,closeBookingWidget:y,selectedServiceId:v},children:[s,u&&!h&&(0,a.jsx)(f,{onClick:()=>N(),companyName:"Book ".concat(c),primaryColor:x}),h&&(0,a.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 transition-opacity",onClick:y}),(0,a.jsx)("div",{className:"relative z-10 flex items-start md:items-center justify-center min-h-screen p-0 md:p-6",children:(0,a.jsxs)("div",{className:"w-full h-full md:h-auto md:w-full md:max-w-4xl md:max-h-[90vh] flex flex-col bg-white md:rounded-xl shadow-2xl overflow-hidden relative",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{onClick:y,className:"absolute top-4 right-4 z-20 p-2 bg-gray-100 hover:bg-gray-200 rounded-full transition-colors duration-200 shadow-sm","aria-label":"Close booking widget",children:(0,a.jsx)(n.A,{className:"w-5 h-5 text-gray-600"})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,a.jsx)(p,{businessName:c,businessPhone:d,businessEmail:m,onReset:()=>{y(),setTimeout(()=>N(),100)},onGoBack:y,children:(0,a.jsx)(i.default,{businessId:t,businessName:c,businessPhone:d,businessEmail:m,services:w,onClose:y,onComplete:e=>{window.gtag&&window.gtag("event","booking_completed",{business_id:t,service_id:e.service_id,booking_id:e.id,value:e.quoted_price||0})},className:"h-full"})})})]})})]})]})}}}]);