<!DOCTYPE html>
<html>
<head>
    <title>API Fetch Test</title>
</head>
<body>
    <h1>API Fetch Test</h1>
    <div id="results"></div>
    <div id="debug"></div>

    <script>
        const results = document.getElementById('results');
        const debug = document.getElementById('debug');
        
        async function testApiCall() {
            try {
                debug.innerHTML += '<p>üîç Starting API test...</p>';
                
                // Test the exact same configuration as the frontend
                const baseUrl = 'http://127.0.0.1:8000';
                const businessId = 'a1b2c3d4-e5f6-7890-1234-567890abcdef';
                const url = `${baseUrl}/api/v1/public/professional/profile/${businessId}`;
                
                debug.innerHTML += `<p>üì° URL: ${url}</p>`;
                debug.innerHTML += '<p>‚è≥ Making fetch request...</p>';
                
                const response = await fetch(url, {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    }
                });
                
                debug.innerHTML += `<p>‚úÖ Response Status: ${response.status} ${response.statusText}</p>`;
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                debug.innerHTML += `<p>‚úÖ Data received: ${data.business_name}</p>`;
                results.innerHTML = `<h2>SUCCESS!</h2><p>Business: ${data.business_name}</p><p>Phone: ${data.phone}</p>`;
                
            } catch (error) {
                debug.innerHTML += `<p>‚ùå Error Type: ${error.constructor.name}</p>`;
                debug.innerHTML += `<p>‚ùå Error Message: ${error.message}</p>`;
                debug.innerHTML += `<p>‚ùå Full Error: ${error.toString()}</p>`;
                results.innerHTML = `<h2>ERROR!</h2><p>${error.message}</p>`;
                
                // Additional debugging for fetch errors
                if (error.message === 'Failed to fetch') {
                    debug.innerHTML += '<p>üîç This is a "Failed to fetch" error, typically caused by:</p>';
                    debug.innerHTML += '<p>1. CORS blocking the request</p>';
                    debug.innerHTML += '<p>2. Network connectivity issues</p>';
                    debug.innerHTML += '<p>3. Backend server not running</p>';
                    debug.innerHTML += '<p>4. Browser security policy</p>';
                }
            }
        }
        
        // Run the test when page loads
        testApiCall();
    </script>
</body>
</html>
