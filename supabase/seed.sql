-- Hero365 Complete Demo Data Seed
-- Creates one complete business with realistic demo data for all tables

-- Clear all existing data first (in reverse dependency order)
TRUNCATE TABLE 
    activity_reminders,
    activity_participants,
    activity_templates,
    calendar_preferences,
    calendar_events,
    job_attachments,
    job_notes,
    job_activities,
    job_templates,
    contact_notes,
    contact_activities,
    contact_segment_memberships,
    contact_segments,
    activities,
    payments,
    invoice_line_items,
    invoices,
    estimate_line_items,
    estimates,
    document_templates,
    jobs,
    projects,
    project_templates,
    contacts,
    user_capabilities,
    working_hours_templates,
    business_invitations,
    business_memberships,
    departments,
    businesses,
    users
CASCADE;

-- 1. Create Users (using proper UUIDs)
INSERT INTO public.users (
    id,
    email,
    full_name,
    display_name,
    phone,
    is_active,
    created_at
) VALUES 
-- Business Owner
(
    '550e8400-e29b-41d4-a716-446655440001'::uuid,
    'mike@eliteplumbing.com',
    'Mike Johnson',
    'Mike Johnson',
    '+1-512-555-1000',
    true,
    now() - interval '1 year'
),
-- Field Manager
(
    '550e8400-e29b-41d4-a716-446655440002'::uuid,
    'sarah@eliteplumbing.com',
    'Sarah Wilson',
    'Sarah Wilson',
    '+1-512-555-1001',
    true,
    now() - interval '6 months'
),
-- Senior Technician
(
    '550e8400-e29b-41d4-a716-446655440003'::uuid,
    'david@eliteplumbing.com',
    'David Chen',
    'David Chen',
    '+1-512-555-1002',
    true,
    now() - interval '3 months'
),
-- Office Administrator
(
    '550e8400-e29b-41d4-a716-446655440004'::uuid,
    'jennifer@eliteplumbing.com',
    'Jennifer Garcia',
    'Jennifer Garcia',
    '+1-512-555-1003',
    true,
    now() - interval '8 months'
),
-- Junior Technician
(
    '550e8400-e29b-41d4-a716-446655440005'::uuid,
    'alex@eliteplumbing.com',
    'Alex Thompson',
    'Alex Thompson',
    '+1-512-555-1004',
    true,
    now() - interval '2 months'
);

-- 2. Create Business
INSERT INTO businesses (
    id,
    name,
    display_name,
    description,
    industry,
    company_size,
    owner_id,
    phone_number,
    business_email,
    business_address,
    city,
    state,
    postal_code,
    country,
    timezone,
    onboarding_completed,
    is_active,
    trade_category,
    commercial_trades,
    residential_trades,
    service_areas
) VALUES (
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'Elite Plumbing Services',
    'Elite Plumbing',
    'Premier residential and commercial plumbing services with 24/7 emergency support',
    'plumbing',
    'small',
    '550e8400-e29b-41d4-a716-446655440001'::uuid,
    '+1-512-555-PIPE',
    'contact@eliteplumbing.com',
    '123 Main St',
    'Austin',
    'TX',
    '78701',
    'US',
    'America/Chicago',
    true,
    true,
    'residential',
    '{}',
    '{"plumbing"}',
    '{"Austin", "Round Rock", "Cedar Park", "Leander"}'
);

-- 3. Create Departments
INSERT INTO departments (
    id,
    business_id,
    name,
    description,
    manager_id,
    is_active
) VALUES 
(
    '770e8400-e29b-41d4-a716-446655440001'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'Field Operations',
    'On-site plumbing services and installations',
    '550e8400-e29b-41d4-a716-446655440002'::uuid,
    true
),
(
    '770e8400-e29b-41d4-a716-446655440002'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'Emergency Services',
    '24/7 emergency plumbing response team',
    '550e8400-e29b-41d4-a716-446655440003'::uuid,
    true
),
(
    '770e8400-e29b-41d4-a716-446655440003'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'Administration',
    'Office management and customer service',
    '550e8400-e29b-41d4-a716-446655440004'::uuid,
    true
);

-- 4. Create Business Memberships
INSERT INTO business_memberships (
    id,
    business_id,
    user_id,
    role,
    permissions,
    joined_date,
    department_id,
    job_title,
    is_active
) VALUES 
-- Owner
(
    '880e8400-e29b-41d4-a716-446655440001'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    '550e8400-e29b-41d4-a716-446655440001'::uuid,
    'owner',
    '["*"]'::jsonb,
    now() - interval '1 year',
    '770e8400-e29b-41d4-a716-446655440003'::uuid,
    'CEO & Founder',
    true
),
-- Field Manager
(
    '880e8400-e29b-41d4-a716-446655440002'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    '550e8400-e29b-41d4-a716-446655440002'::uuid,
    'manager',
    '["view_team_members", "manage_contacts", "view_contacts", "manage_jobs", "view_jobs", "manage_activities", "view_activities"]'::jsonb,
    now() - interval '6 months',
    '770e8400-e29b-41d4-a716-446655440001'::uuid,
    'Field Operations Manager',
    true
),
-- Senior Technician
(
    '880e8400-e29b-41d4-a716-446655440003'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    '550e8400-e29b-41d4-a716-446655440003'::uuid,
    'employee',
    '["view_contacts", "manage_own_jobs", "view_jobs", "manage_own_activities", "view_activities"]'::jsonb,
    now() - interval '3 months',
    '770e8400-e29b-41d4-a716-446655440002'::uuid,
    'Senior Plumbing Technician',
    true
),
-- Office Administrator
(
    '880e8400-e29b-41d4-a716-446655440004'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    '550e8400-e29b-41d4-a716-446655440004'::uuid,
    'admin',
    '["manage_team", "view_team_members", "invite_team_members", "manage_contacts", "view_contacts", "manage_jobs", "view_jobs", "manage_activities", "view_activities"]'::jsonb,
    now() - interval '8 months',
    '770e8400-e29b-41d4-a716-446655440003'::uuid,
    'Office Administrator',
    true
),
-- Junior Technician
(
    '880e8400-e29b-41d4-a716-446655440005'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    '550e8400-e29b-41d4-a716-446655440005'::uuid,
    'employee',
    '["view_contacts", "manage_own_jobs", "view_jobs", "manage_own_activities", "view_activities"]'::jsonb,
    now() - interval '2 months',
    '770e8400-e29b-41d4-a716-446655440001'::uuid,
    'Junior Plumbing Technician',
    true
);

-- 5. Create Working Hours Templates
INSERT INTO working_hours_templates (
    id,
    name,
    description,
    monday_start, monday_end,
    tuesday_start, tuesday_end,
    wednesday_start, wednesday_end,
    thursday_start, thursday_end,
    friday_start, friday_end,
    saturday_start, saturday_end,
    sunday_start, sunday_end,
    break_duration_minutes,
    is_active
) VALUES 
(
    '990e8400-e29b-41d4-a716-446655440001'::uuid,
    'Standard Business Hours',
    'Monday-Friday 8AM-5PM',
    '08:00', '17:00',
    '08:00', '17:00',
    '08:00', '17:00',
    '08:00', '17:00',
    '08:00', '17:00',
    NULL, NULL,
    NULL, NULL,
    60,
    true
),
(
    '990e8400-e29b-41d4-a716-446655440002'::uuid,
    'Emergency Schedule',
    '24/7 emergency coverage with rotating shifts',
    '00:00', '23:59',
    '00:00', '23:59',
    '00:00', '23:59',
    '00:00', '23:59',
    '00:00', '23:59',
    '00:00', '23:59',
    '00:00', '23:59',
    30,
    true
);

-- 6. Create User Capabilities
INSERT INTO user_capabilities (
    id,
    business_id,
    user_id,
    home_base_address,
    home_base_latitude,
    home_base_longitude,
    vehicle_type,
    has_vehicle,
    preferred_start_time,
    preferred_end_time,
    min_time_between_jobs_minutes,
    max_commute_time_minutes,
    average_job_rating,
    completion_rate,
    punctuality_score,
    working_hours_template_id,
    is_active
) VALUES 
-- Mike (Owner)
(
    'aa0e8400-e29b-41d4-a716-446655440001'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    '550e8400-e29b-41d4-a716-446655440001'::uuid,
    '123 Main St, Austin, TX 78701',
    30.266667,
    -97.733330,
    'Pickup Truck',
    true,
    '08:00',
    '17:00',
    30,
    45,
    4.8,
    98.5,
    95.2,
    '990e8400-e29b-41d4-a716-446655440001'::uuid,
    true
),
-- Sarah (Manager)
(
    'aa0e8400-e29b-41d4-a716-446655440002'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    '550e8400-e29b-41d4-a716-446655440002'::uuid,
    '456 Oak Ave, Austin, TX 78704',
    30.250000,
    -97.750000,
    'Van',
    true,
    '07:00',
    '16:00',
    45,
    60,
    4.9,
    97.8,
    98.1,
    '990e8400-e29b-41d4-a716-446655440001'::uuid,
    true
),
-- David (Senior Tech)
(
    'aa0e8400-e29b-41d4-a716-446655440003'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    '550e8400-e29b-41d4-a716-446655440003'::uuid,
    '789 Pine St, Austin, TX 78702',
    30.280000,
    -97.720000,
    'Pickup Truck',
    true,
    '06:00',
    '18:00',
    30,
    90,
    4.7,
    96.5,
    92.3,
    '990e8400-e29b-41d4-a716-446655440002'::uuid,
    true
);

-- 7. Create Contacts
INSERT INTO contacts (
    id,
    business_id,
    first_name,
    last_name,
    company_name,
    email,
    phone,
    mobile_phone,
    address,
    contact_type,
    source,
    status,
    lifecycle_stage,
    priority,
    relationship_status,
    tags,
    notes,
    created_by,
    assigned_to,
    next_contact_date,
    is_active
) VALUES 
-- Residential Customers
(
    'bb0e8400-e29b-41d4-a716-446655440001'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'John',
    'Smith',
    NULL,
    'john.smith@email.com',
    '+1-512-555-2001',
    '+1-512-555-2001',
    '{"street_address": "1234 Elm Street", "city": "Austin", "state": "TX", "postal_code": "78701", "country": "US"}',
    'customer',
    'referral',
    'active',
    'customer',
    'medium',
    'active_client',
    '["residential", "repeat_customer"]'::jsonb,
    'Great customer, always pays on time. Kitchen sink repair completed last month.',
    '550e8400-e29b-41d4-a716-446655440004'::uuid,
    '550e8400-e29b-41d4-a716-446655440003'::uuid,
    (current_date + interval '30 days')::date,
    true
),
(
    'bb0e8400-e29b-41d4-a716-446655440002'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'Mary',
    'Johnson',
    NULL,
    'mary.johnson@email.com',
    '+1-512-555-2002',
    '+1-512-555-2002',
    '{"street_address": "5678 Oak Avenue", "city": "Austin", "state": "TX", "postal_code": "78704", "country": "US"}',
    'lead',
    'website',
    'active',
    'interest',
    'high',
    'qualified_lead',
    '["residential", "emergency"]'::jsonb,
    'Emergency call for burst pipe. Potential for bathroom renovation project.',
    '550e8400-e29b-41d4-a716-446655440004'::uuid,
    '550e8400-e29b-41d4-a716-446655440002'::uuid,
    (current_date + interval '7 days')::date,
    true
),
-- Commercial Customers
(
    'bb0e8400-e29b-41d4-a716-446655440003'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'Robert',
    'Davis',
    'Austin Property Management',
    'robert@austinpm.com',
    '+1-512-555-2003',
    '+1-512-555-2003',
    '{"street_address": "999 Business Park Dr", "city": "Austin", "state": "TX", "postal_code": "78759", "country": "US"}',
    'customer',
    'referral',
    'active',
    'customer',
    'high',
    'active_client',
    '["commercial", "property_management", "recurring"]'::jsonb,
    'Property management company with 50+ units. Monthly maintenance contract.',
    '550e8400-e29b-41d4-a716-446655440001'::uuid,
    '550e8400-e29b-41d4-a716-446655440002'::uuid,
    (current_date + interval '14 days')::date,
    true
),
(
    'bb0e8400-e29b-41d4-a716-446655440004'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'Lisa',
    'Anderson',
    'Sunshine Restaurant',
    'lisa@sunshinerestaurant.com',
    '+1-512-555-2004',
    '+1-512-555-2004',
    '{"street_address": "246 Restaurant Row", "city": "Austin", "state": "TX", "postal_code": "78701", "country": "US"}',
    'prospect',
    'google_ads',
    'active',
    'consideration',
    'medium',
    'opportunity',
    '["commercial", "restaurant", "potential_contract"]'::jsonb,
    'Restaurant interested in grease trap maintenance contract. Follow up next week.',
    '550e8400-e29b-41d4-a716-446655440004'::uuid,
    '550e8400-e29b-41d4-a716-446655440005'::uuid,
    (current_date + interval '3 days')::date,
    true
);

-- 8. Create Contact Segments
INSERT INTO contact_segments (
    id,
    business_id,
    name,
    description,
    segment_type,
    criteria,
    created_by,
    is_active
) VALUES 
(
    'cc0e8400-e29b-41d4-a716-446655440001'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'VIP Customers',
    'High-value repeat customers',
    'manual',
    '{"min_jobs": 5, "min_revenue": 2000}'::jsonb,
    '550e8400-e29b-41d4-a716-446655440001'::uuid,
    true
),
(
    'cc0e8400-e29b-41d4-a716-446655440002'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'Emergency Prospects',
    'Leads from emergency calls',
    'automatic',
    '{"source": "emergency", "created_days": 30}'::jsonb,
    '550e8400-e29b-41d4-a716-446655440002'::uuid,
    true
);

-- 9. Create Contact Segment Memberships
INSERT INTO contact_segment_memberships (
    id,
    business_id,
    contact_id,
    segment_id,
    added_by
) VALUES 
(
    'dd0e8400-e29b-41d4-a716-446655440001'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'bb0e8400-e29b-41d4-a716-446655440001'::uuid,
    'cc0e8400-e29b-41d4-a716-446655440001'::uuid,
    '550e8400-e29b-41d4-a716-446655440001'::uuid
),
(
    'dd0e8400-e29b-41d4-a716-446655440002'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'bb0e8400-e29b-41d4-a716-446655440002'::uuid,
    'cc0e8400-e29b-41d4-a716-446655440002'::uuid,
    '550e8400-e29b-41d4-a716-446655440002'::uuid
);

-- 10. Create Jobs
INSERT INTO jobs (
    id,
    business_id,
    job_number,
    title,
    description,
    job_type,
    status,
    priority,
    source,
    contact_id,
    assigned_to,
    job_address,
    time_tracking,
    cost_estimate,
    scheduled_start,
    scheduled_end,
    actual_start,
    actual_end,
    notes,
    created_by,
    is_active
) VALUES 
-- Completed Job
(
    'ee0e8400-e29b-41d4-a716-446655440001'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'JOB-2024-001',
    'Kitchen Sink Repair',
    'Repair leaky kitchen sink faucet and replace worn gaskets',
    'repair',
    'completed',
    'medium',
    'phone',
    'bb0e8400-e29b-41d4-a716-446655440001'::uuid,
    ARRAY['550e8400-e29b-41d4-a716-446655440003'::uuid],
    '{"street_address": "1234 Elm Street", "city": "Austin", "state": "TX", "postal_code": "78701", "country": "US", "latitude": 30.266667, "longitude": -97.733330, "access_notes": "Customer prefers morning appointments. Use side entrance."}'::jsonb,
    '{"estimated_hours": 2.0, "actual_hours": 1.5, "billable_hours": 1.5, "start_time": null, "end_time": null, "break_time_minutes": 0}'::jsonb,
    '{"labor_cost": 150.00, "material_cost": 0, "equipment_cost": 0, "overhead_cost": 0, "markup_percentage": 20, "tax_percentage": 0, "discount_amount": 0}'::jsonb,
    (now() - interval '7 days'),
    (now() - interval '7 days' + interval '2 hours'),
    (now() - interval '7 days'),
    (now() - interval '7 days' + interval '1.5 hours'),
    'Customer very satisfied. Mentioned potential bathroom project.',
    '550e8400-e29b-41d4-a716-446655440004',
    true
),
-- Scheduled Job
(
    'ee0e8400-e29b-41d4-a716-446655440002'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'JOB-2024-002',
    'Emergency Pipe Repair',
    'Emergency repair of burst pipe in basement',
    'emergency',
    'scheduled',
    'high',
    'emergency',
    'bb0e8400-e29b-41d4-a716-446655440002'::uuid,
    ARRAY['550e8400-e29b-41d4-a716-446655440003'::uuid, '550e8400-e29b-41d4-a716-446655440005'::uuid],
    '{"street_address": "5678 Oak Avenue", "city": "Austin", "state": "TX", "postal_code": "78704", "country": "US", "latitude": 30.250000, "longitude": -97.750000, "access_notes": "Emergency access code: 1234. Water shut off at main."}'::jsonb,
    '{"estimated_hours": 4.0, "actual_hours": null, "billable_hours": null, "start_time": null, "end_time": null, "break_time_minutes": 0}'::jsonb,
    '{"labor_cost": 350.00, "material_cost": 0, "equipment_cost": 0, "overhead_cost": 0, "markup_percentage": 20, "tax_percentage": 0, "discount_amount": 0}'::jsonb,
    (now() + interval '2 hours'),
    (now() + interval '6 hours'),
    NULL,
    NULL,
    'High priority - customer has flooded basement.',
    '550e8400-e29b-41d4-a716-446655440002',
    true
),
-- In Progress Job
(
    'ee0e8400-e29b-41d4-a716-446655440003'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'JOB-2024-003',
    'Monthly Maintenance Check',
    'Routine maintenance check for commercial property',
    'maintenance',
    'in_progress',
    'low',
    'contract',
    'bb0e8400-e29b-41d4-a716-446655440003'::uuid,
    ARRAY['550e8400-e29b-41d4-a716-446655440002'::uuid],
    '{"street_address": "999 Business Park Dr", "city": "Austin", "state": "TX", "postal_code": "78759", "country": "US", "latitude": 30.400000, "longitude": -97.700000, "access_notes": "Check all units. Property manager available until 4 PM."}'::jsonb,
    '{"estimated_hours": 3.0, "actual_hours": null, "billable_hours": null, "start_time": null, "end_time": null, "break_time_minutes": 0}'::jsonb,
    '{"labor_cost": 200.00, "material_cost": 0, "equipment_cost": 0, "overhead_cost": 0, "markup_percentage": 20, "tax_percentage": 0, "discount_amount": 0}'::jsonb,
    (now() - interval '1 hour'),
    (now() + interval '2 hours'),
    (now() - interval '1 hour'),
    NULL,
    'Monthly contract work. Building has 12 units to check.',
    '550e8400-e29b-41d4-a716-446655440001',
    true
);

-- 11. Create Job Templates
INSERT INTO job_templates (
    id,
    business_id,
    name,
    description,
    job_type,
    estimated_cost,
    checklist,
    required_skills,
    instructions,
    is_active
) VALUES 
(
    'ff0e8400-e29b-41d4-a716-446655440001'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'Standard Sink Repair',
    'Template for common sink repairs',
    'repair',
    150.00,
    '["Check faucet connections", "Inspect under-sink plumbing", "Test water pressure", "Replace worn parts", "Test for leaks"]'::jsonb,
    ARRAY['basic_plumbing', 'hand_tools'],
    'Standard procedure for sink repairs. Always turn off water supply first.',
    true
),
(
    'ff0e8400-e29b-41d4-a716-446655440002'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'Emergency Pipe Repair',
    'Template for emergency pipe repairs',
    'emergency',
    350.00,
    '["Assess damage", "Turn off water supply", "Remove damaged section", "Install replacement", "Test system", "Clean up area"]'::jsonb,
    ARRAY['pipe_fitting', 'emergency_response', 'power_tools'],
    'Emergency protocol. Safety first. Document all damage with photos.',
    true
);

-- 12. Create Activities
INSERT INTO activities (
    id,
    business_id,
    title,
    description,
    activity_type,
    status,
    priority,
    contact_id,
    assigned_to,
    due_date,
    completed_date,
    estimated_duration_minutes,
    actual_duration_minutes,
    outcome,
    notes,
    is_active
) VALUES 
-- Completed Activity
(
    '110e8400-e29b-41d4-a716-446655440001'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'Follow up on kitchen project',
    'Call John Smith about potential kitchen renovation project mentioned during last visit',
    'task',
    'completed',
    'medium',
    'bb0e8400-e29b-41d4-a716-446655440001'::uuid,
    ARRAY['550e8400-e29b-41d4-a716-446655440004'::uuid],
    (now() - interval '2 days'),
    (now() - interval '1 day'),
    30,
    25,
    'scheduled_estimate',
    'Customer interested. Scheduled estimate for next week.',
    true
),
-- Pending Activity
(
    '110e8400-e29b-41d4-a716-446655440002'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'Prepare quote for restaurant',
    'Create detailed quote for grease trap maintenance contract',
    'task',
    'pending',
    'high',
    'bb0e8400-e29b-41d4-a716-446655440004'::uuid,
    ARRAY['550e8400-e29b-41d4-a716-446655440001'::uuid],
    (now() + interval '1 day'),
    NULL,
    120,
    NULL,
    NULL,
    'Need to include monthly maintenance and emergency response options.',
    true
);

-- 13. Create Activity Templates
INSERT INTO activity_templates (
    id,
    business_id,
    name,
    description,
    activity_type,
    estimated_duration_minutes,
    checklist,
    instructions,
    is_active
) VALUES 
(
    '120e8400-e29b-41d4-a716-446655440001'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'Customer Follow-up Call',
    'Standard follow-up call template',
    'task',
    30,
    '["Review previous job details", "Ask about satisfaction", "Inquire about future needs", "Update contact preferences"]'::jsonb,
    'Call within 48 hours of job completion. Be friendly and professional.',
    true
),
(
    '120e8400-e29b-41d4-a716-446655440002'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'Quote Preparation',
    'Standard quote preparation process',
    'task',
    90,
    '["Review job requirements", "Calculate materials", "Estimate labor", "Add markup", "Format quote", "Schedule delivery"]'::jsonb,
    'Use standard pricing guidelines. Include all materials and labor.',
    true
);

-- 14. Create Contact Activities
INSERT INTO contact_activities (
    id,
    business_id,
    contact_id,
    activity_type,
    description,
    activity_date,
    performed_by,
    outcome,
    notes,
    metadata
) VALUES 
(
    '130e8400-e29b-41d4-a716-446655440001'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'bb0e8400-e29b-41d4-a716-446655440001'::uuid,
    'interaction',
    'Phone call about kitchen sink repair',
    (now() - interval '8 days'),
    '550e8400-e29b-41d4-a716-446655440004'::uuid,
    'job_scheduled',
    'Customer reported leaky faucet. Scheduled repair for tomorrow.',
    '{"call_duration": "5 minutes", "urgency": "medium"}'::jsonb
),
(
    '130e8400-e29b-41d4-a716-446655440002'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'bb0e8400-e29b-41d4-a716-446655440002'::uuid,
    'interaction',
    'Emergency call - burst pipe',
    (now() - interval '3 hours'),
    '550e8400-e29b-41d4-a716-446655440002'::uuid,
    'emergency_scheduled',
    'Customer has flooding in basement. Scheduled emergency response.',
    '{"call_duration": "8 minutes", "urgency": "high", "emergency": true}'::jsonb
);

-- 15. Create Contact Notes
INSERT INTO contact_notes (
    id,
    business_id,
    contact_id,
    note_type,
    content,
    is_private,
    created_by
) VALUES 
(
    '140e8400-e29b-41d4-a716-446655440001'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'bb0e8400-e29b-41d4-a716-446655440001'::uuid,
    'general',
    'Excellent customer. Always pays promptly. Mentioned interest in bathroom renovation during last visit.',
    false,
    '550e8400-e29b-41d4-a716-446655440003'::uuid
),
(
    '140e8400-e29b-41d4-a716-446655440002'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'bb0e8400-e29b-41d4-a716-446655440003'::uuid,
    'business',
    'Property management company with 50+ rental units. Good potential for ongoing maintenance contract.',
    false,
    '550e8400-e29b-41d4-a716-446655440001'::uuid
);

-- 16. Create Job Activities
INSERT INTO job_activities (
    id,
    business_id,
    job_id,
    activity_type,
    description,
    performed_date,
    user_id,
    old_status,
    new_status,
    metadata
) VALUES 
(
    '150e8400-e29b-41d4-a716-446655440001'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'ee0e8400-e29b-41d4-a716-446655440001'::uuid,
    'status_change',
    'Job completed successfully',
    (now() - interval '7 days' + interval '1.5 hours'),
    '550e8400-e29b-41d4-a716-446655440003'::uuid,
    'in_progress',
    'completed',
    '{"completion_notes": "All work completed to customer satisfaction"}'::jsonb
),
(
    '150e8400-e29b-41d4-a716-446655440002'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'ee0e8400-e29b-41d4-a716-446655440003'::uuid,
    'status_change',
    'Started monthly maintenance check',
    (now() - interval '1 hour'),
    '550e8400-e29b-41d4-a716-446655440002'::uuid,
    'scheduled',
    'in_progress',
    '{"start_notes": "Beginning routine inspection of all units"}'::jsonb
);

-- 17. Create Job Notes
INSERT INTO job_notes (
    id,
    business_id,
    job_id,
    note_type,
    content,
    is_internal,
    user_id
) VALUES 
(
    '160e8400-e29b-41d4-a716-446655440001'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'ee0e8400-e29b-41d4-a716-446655440001'::uuid,
    'completion',
    'Faucet repaired and new gaskets installed. Customer very happy with the work. No issues found.',
    false,
    '550e8400-e29b-41d4-a716-446655440003'::uuid
),
(
    '160e8400-e29b-41d4-a716-446655440002'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'ee0e8400-e29b-41d4-a716-446655440002'::uuid,
    'preparation',
    'Emergency kit loaded in truck. Customer called ahead - basement is flooded.',
    true,
    '550e8400-e29b-41d4-a716-446655440003'::uuid
);

-- 18. Create Job Attachments
INSERT INTO job_attachments (
    id,
    business_id,
    job_id,
    file_name,
    file_url,
    file_type,
    file_size,
    uploaded_by
) VALUES 
(
    '170e8400-e29b-41d4-a716-446655440001'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'ee0e8400-e29b-41d4-a716-446655440001'::uuid,
    'before_photo.jpg',
    'https://storage.example.com/jobs/before_photo.jpg',
    'image/jpeg',
    245760,
    '550e8400-e29b-41d4-a716-446655440003'::uuid
),
(
    '170e8400-e29b-41d4-a716-446655440002'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'ee0e8400-e29b-41d4-a716-446655440001'::uuid,
    'after_photo.jpg',
    'https://storage.example.com/jobs/after_photo.jpg',
    'image/jpeg',
    198432,
    '550e8400-e29b-41d4-a716-446655440003'::uuid
);

-- 19. Create Calendar Events
INSERT INTO calendar_events (
    id,
    user_id,
    business_id,
    title,
    description,
    event_type,
    start_datetime,
    end_datetime,
    is_all_day,
    timezone,
    blocks_scheduling,
    is_active
) VALUES 
(
    '180e8400-e29b-41d4-a716-446655440001'::uuid,
    '550e8400-e29b-41d4-a716-446655440003'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'Emergency Response Shift',
    'On-call for emergency plumbing responses',
    'work_schedule',
    (now() + interval '18 hours'),
    (now() + interval '42 hours'),
    false,
    'America/Chicago',
    true,
    true
),
(
    '180e8400-e29b-41d4-a716-446655440002'::uuid,
    '550e8400-e29b-41d4-a716-446655440002'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'Team Meeting',
    'Weekly team coordination meeting',
    'meeting',
    (now() + interval '3 days' + interval '9 hours'),
    (now() + interval '3 days' + interval '10 hours'),
    false,
    'America/Chicago',
    false,
    true
);

-- 20. Create Calendar Preferences
INSERT INTO calendar_preferences (
    user_id,
    business_id,
    timezone,
    preferred_working_hours_template_id,
    min_time_between_jobs_minutes,
    max_commute_time_minutes,
    allows_back_to_back_jobs,
    weekend_availability,
    emergency_availability_outside_hours
) VALUES 
(
    '550e8400-e29b-41d4-a716-446655440002'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'America/Chicago',
    '990e8400-e29b-41d4-a716-446655440001'::uuid,
    45,
    60,
    false,
    false,
    true
),
(
    '550e8400-e29b-41d4-a716-446655440003'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'America/Chicago',
    '990e8400-e29b-41d4-a716-446655440002'::uuid,
    30,
    90,
    true,
    true,
    true
);

-- 21. Create Activity Participants
INSERT INTO activity_participants (
    id,
    activity_id,
    user_id,
    role
) VALUES 
(
    '190e8400-e29b-41d4-a716-446655440001'::uuid,
    '110e8400-e29b-41d4-a716-446655440001'::uuid,
    '550e8400-e29b-41d4-a716-446655440004'::uuid,
    'primary'
),
(
    '190e8400-e29b-41d4-a716-446655440002'::uuid,
    '110e8400-e29b-41d4-a716-446655440002'::uuid,
    '550e8400-e29b-41d4-a716-446655440001'::uuid,
    'primary'
);

-- 22. Create Activity Reminders
INSERT INTO activity_reminders (
    id,
    activity_id,
    reminder_type,
    reminder_time,
    message,
    is_sent
) VALUES 
(
    '200e8400-e29b-41d4-a716-446655440001'::uuid,
    '110e8400-e29b-41d4-a716-446655440002'::uuid,
    'email',
    (now() + interval '12 hours'),
    'Reminder: Prepare quote for Sunshine Restaurant grease trap maintenance',
    false
);

-- 23. Create Business Invitation (optional demo)
INSERT INTO business_invitations (
    id,
    business_id,
    business_name,
    invited_email,
    invited_by,
    invited_by_name,
    role,
    permissions,
    invitation_date,
    expiry_date,
    status,
    message
) VALUES 
(
    '210e8400-e29b-41d4-a716-446655440001'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'Elite Plumbing Services',
    'newtech@example.com',
    '550e8400-e29b-41d4-a716-446655440001'::uuid,
    'Mike Johnson',
    'employee',
    '["view_contacts", "manage_own_jobs", "view_jobs", "manage_own_activities", "view_activities"]'::jsonb,
    now(),
    (now() + interval '7 days'),
    'pending',
    'Welcome to Elite Plumbing! Please join our team to start managing jobs and customers.'
);

-- 24. Create Project Templates (before projects)
INSERT INTO project_templates (
    id,
    business_id,
    name,
    description,
    project_type,
    priority,
    estimated_budget,
    estimated_duration,
    tags,
    is_system_template
) VALUES 
-- Business-specific templates
(
    '550e8400-e29b-41d4-a716-446655440050'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'Complete Plumbing System Installation',
    'Full residential plumbing system installation including main lines, fixtures, and testing',
    'installation',
    'high',
    8500.00,
    14,
    ARRAY['plumbing', 'residential', 'new_construction'],
    false
),
(
    '550e8400-e29b-41d4-a716-446655440051'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'Bathroom Renovation Project',
    'Complete bathroom renovation including plumbing fixtures, tile work, and vanity installation',
    'renovation',
    'medium',
    12000.00,
    21,
    ARRAY['bathroom', 'renovation', 'residential'],
    false
),
(
    '550e8400-e29b-41d4-a716-446655440052'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'Commercial Maintenance Contract',
    'Monthly maintenance contract for commercial properties',
    'maintenance',
    'low',
    2400.00,
    365,
    ARRAY['commercial', 'maintenance', 'contract'],
    false
);

-- 25. Create Projects
INSERT INTO projects (
    id,
    business_id,
    project_number,
    name,
    description,
    created_by,
    client_id,
    client_name,
    project_type,
    status,
    priority,
    start_date,
    end_date,
    estimated_budget,
    actual_cost,
    manager,
    manager_id,
    team_members,
    tags,
    notes
) VALUES 
-- Completed Project
(
    '550e8400-e29b-41d4-a716-446655440120'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'PROJ-2024-001',
    'Smith Kitchen Renovation',
    'Complete kitchen plumbing renovation including new fixtures, dishwasher connection, and garbage disposal installation',
    '550e8400-e29b-41d4-a716-446655440001',
    'bb0e8400-e29b-41d4-a716-446655440001'::uuid,
    'John Smith',
    'renovation',
    'completed',
    'medium',
    (now() - interval '2 months'),
    (now() - interval '1 month'),
    4500.00,
    4250.00,
    'David Chen',
    '550e8400-e29b-41d4-a716-446655440003'::uuid,
    ARRAY['550e8400-e29b-41d4-a716-446655440003'::uuid, '550e8400-e29b-41d4-a716-446655440005'::uuid],
    ARRAY['kitchen', 'renovation', 'residential', 'completed'],
    'Project completed successfully. Customer very satisfied with new fixtures and layout improvements.'
),
-- Active Project
(
    '550e8400-e29b-41d4-a716-446655440121'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'PROJ-2024-002',
    'Austin Property Management - Quarterly Maintenance',
    'Quarterly maintenance project covering all 50+ rental units with comprehensive plumbing inspections and repairs',
    '550e8400-e29b-41d4-a716-446655440001',
    'bb0e8400-e29b-41d4-a716-446655440003'::uuid,
    'Robert Davis - Austin Property Management',
    'maintenance',
    'active',
    'high',
    (now() - interval '2 weeks'),
    (now() + interval '4 weeks'),
    15000.00,
    8750.00,
    'Sarah Wilson',
    '550e8400-e29b-41d4-a716-446655440002'::uuid,
    ARRAY['550e8400-e29b-41d4-a716-446655440002'::uuid, '550e8400-e29b-41d4-a716-446655440003'::uuid],
    ARRAY['commercial', 'maintenance', 'property_management', 'recurring'],
    'Large maintenance contract. 60% complete. All units scheduled, 30 units completed so far.'
),
-- Planned Project
(
    '550e8400-e29b-41d4-a716-446655440122'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'PROJ-2024-003',
    'Sunshine Restaurant Grease Trap Installation',
    'Installation of new commercial grease trap system with maintenance agreement setup',
    '550e8400-e29b-41d4-a716-446655440004',
    'bb0e8400-e29b-41d4-a716-446655440004'::uuid,
    'Lisa Anderson - Sunshine Restaurant',
    'installation',
    'planning',
    'medium',
    (now() + interval '1 week'),
    (now() + interval '3 weeks'),
    6500.00,
    0.00,
    'Mike Johnson',
    '550e8400-e29b-41d4-a716-446655440001'::uuid,
    ARRAY['550e8400-e29b-41d4-a716-446655440001'::uuid, '550e8400-e29b-41d4-a716-446655440003'::uuid],
    ARRAY['commercial', 'restaurant', 'installation', 'grease_trap'],
    'Waiting for permits. Customer approved quote. Installation scheduled for next week.'
),
-- Emergency Project  
(
    '550e8400-e29b-41d4-a716-446655440123'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'PROJ-2024-004',
    'Johnson Emergency Water Damage Restoration',
    'Emergency plumbing repair and water damage mitigation for burst pipe in basement',
    '550e8400-e29b-41d4-a716-446655440002',
    'bb0e8400-e29b-41d4-a716-446655440002'::uuid,
    'Mary Johnson',
    'emergency',
    'active',
    'critical',
    (now() - interval '6 hours'),
    (now() + interval '3 days'),
    3500.00,
    1200.00,
    'David Chen',
    '550e8400-e29b-41d4-a716-446655440003'::uuid,
    ARRAY['550e8400-e29b-41d4-a716-446655440003'::uuid, '550e8400-e29b-41d4-a716-446655440005'::uuid],
    ARRAY['emergency', 'water_damage', 'residential', 'urgent'],
    'Emergency response in progress. Initial pipe repair completed. Continuing with water damage assessment and repairs.'
);

-- Update Jobs to link to projects
UPDATE jobs SET project_id = NULL 
WHERE id = 'ee0e8400-e29b-41d4-a716-446655440001'::uuid;

UPDATE jobs SET project_id = NULL 
WHERE id = 'ee0e8400-e29b-41d4-a716-446655440002'::uuid;

UPDATE jobs SET project_id = NULL 
WHERE id = 'ee0e8400-e29b-41d4-a716-446655440003'::uuid;

-- Update sequence counters to continue from our demo data
-- (This ensures future records don't conflict with our demo UUIDs)

-- =====================================
-- ESTIMATES, QUOTES & INVOICES SEED DATA
-- =====================================

-- 26. Create Document Templates
INSERT INTO document_templates (
    id,
    business_id,
    name,
    description,
    document_type,
    template_type,
    is_active,
    is_default,
    color_overrides,
    font_overrides,
    sections,
    header_text,
    footer_text,
    terms_text,
    created_by,
    created_date,
    last_modified
) VALUES 
-- Professional Estimate Template (Default)
(
    '550e8400-e29b-41d4-a716-446655440020'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'Professional Plumbing Estimate',
    'Clean, professional template for residential and commercial estimates',
    'estimate',
    'professional',
    true,
    true,
    '{"primary": "#1f2937", "secondary": "#3b82f6", "accent": "#10b981"}'::jsonb,
    '{"font_family": "Inter", "header_size": "24px", "body_size": "14px"}'::jsonb,
    '{"show_header": true, "show_footer": true, "show_business_info": true, "show_client_info": true, "show_line_items": true, "show_totals": true, "show_terms_conditions": true}'::jsonb,
    'Elite Plumbing Services - Professional Estimates',
    'Thank you for choosing Elite Plumbing Services. We appreciate your business!',
    'All work performed according to local plumbing codes. Estimates valid for 30 days. Payment due upon completion unless otherwise arranged.',
    '550e8400-e29b-41d4-a716-446655440001',
    now() - interval '3 months',
    now() - interval '3 months'
),
-- Emergency Service Template
(
    '550e8400-e29b-41d4-a716-446655440021'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'Emergency Service Quote',
    'Streamlined template for emergency and quick service quotes',
    'estimate',
    'service_focused',
    true,
    false,
    '{"primary": "#dc2626", "secondary": "#fbbf24", "accent": "#059669"}'::jsonb,
    '{"font_family": "Arial", "header_size": "22px", "body_size": "13px"}'::jsonb,
    '{"show_header": true, "show_footer": true, "show_business_info": true, "show_client_info": true, "show_line_items": true, "show_totals": true, "show_terms_conditions": false}'::jsonb,
    '24/7 Emergency Plumbing Services',
    'Emergency service available 24/7. Call us anytime!',
    'Emergency service rates apply. Immediate response guaranteed.',
    '550e8400-e29b-41d4-a716-446655440002',
    now() - interval '2 months',
    now() - interval '2 months'
);

-- 27. Create Estimates
INSERT INTO estimates (
    id,
    business_id,
    estimate_number,
    title,
    description,
    status,
    contact_id,
    project_id,
    job_id,
    template_id,
    assigned_to,
    assigned_user_id,
    client_name,
    client_email,
    client_phone,
    client_address,
    currency,
    subtotal,
    discount_type,
    discount_value,
    discount_amount,
    tax_type,
    tax_rate,
    tax_amount,
    total_amount,
    advance_payment_type,
    advance_payment_value,
    advance_payment_amount,
    advance_payment_due_date,
    advance_payment_received,
    valid_until,
    terms_and_conditions,
    notes,
    created_by,
    created_date,
    last_modified
) VALUES 
-- Approved Estimate (Smith Kitchen Renovation)
(
    '550e8400-e29b-41d4-a716-446655440030'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'EST-0000001',
    'Kitchen Plumbing Renovation - Complete Package',
    'Comprehensive kitchen plumbing renovation including new fixtures, dishwasher hookup, garbage disposal installation, and pipe upgrades',
    'approved',
    'bb0e8400-e29b-41d4-a716-446655440001'::uuid,
    NULL,
    NULL,
    '550e8400-e29b-41d4-a716-446655440020'::uuid,
    'David Chen',
    '550e8400-e29b-41d4-a716-446655440003'::uuid,
    'John Smith',
    'john.smith@email.com',
    '+1-512-555-2001',
    '{"street_address": "1234 Elm Street", "city": "Austin", "state": "TX", "postal_code": "78701", "country": "US"}'::jsonb,
    'USD',
    4100.00,
    'percentage',
    5.00,
    205.00,
    'percentage',
    8.25,
    321.34,
    4216.34,
    'percentage',
    25.00,
    1054.09,
    (now() - interval '2 months' + interval '3 days'),
    true,
    (now() - interval '2 months' + interval '30 days'),
    'All work performed according to local plumbing codes. Fixtures include standard warranty. Additional charges may apply for unforeseen complications.',
    'Customer approved estimate. Advance payment received. Project scheduled to begin next week.',
    '550e8400-e29b-41d4-a716-446655440003',
    now() - interval '2 months',
    now() - interval '2 months' + interval '1 day'
),
-- Sent Estimate (Austin Property Management)
(
    '550e8400-e29b-41d4-a716-446655440031'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'EST-0000002',
    'Quarterly Maintenance Contract - 50+ Units',
    'Comprehensive quarterly maintenance contract covering all rental units with inspections, repairs, and emergency response',
    'sent',
    'bb0e8400-e29b-41d4-a716-446655440003'::uuid,
    NULL,
    NULL,
    '550e8400-e29b-41d4-a716-446655440020'::uuid,
    'Sarah Wilson',
    '550e8400-e29b-41d4-a716-446655440002'::uuid,
    'Robert Davis - Austin Property Management',
    'robert@austinpm.com',
    '+1-512-555-2003',
    '{"street_address": "999 Business Park Dr", "city": "Austin", "state": "TX", "postal_code": "78759", "country": "US"}'::jsonb,
    'USD',
    14500.00,
    'fixed_amount',
    500.00,
    500.00,
    'percentage',
    8.25,
    1155.00,
    15155.00,
    'none',
    0.00,
    0.00,
    NULL,
    false,
    (now() + interval '20 days'),
    'Contract includes quarterly inspections and maintenance. Emergency response available 24/7. Additional repairs billed separately.',
    'Large commercial maintenance contract. Waiting for client approval.',
    '550e8400-e29b-41d4-a716-446655440002',
    now() - interval '10 days',
    now() - interval '10 days'
),
-- Draft Estimate (Sunshine Restaurant)
(
    '550e8400-e29b-41d4-a716-446655440032'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'EST-0000003',
    'Commercial Grease Trap Installation',
    'Installation of new commercial grease trap system including permits, installation, testing, and maintenance setup',
    'draft',
    'bb0e8400-e29b-41d4-a716-446655440004'::uuid,
    NULL,
    NULL,
    '550e8400-e29b-41d4-a716-446655440020'::uuid,
    'Mike Johnson',
    '550e8400-e29b-41d4-a716-446655440001'::uuid,
    NULL,
    NULL,
    NULL,
    NULL,
    'USD',
    6200.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    511.50,
    6711.50,
    'fixed_amount',
    1500.00,
    1500.00,
    (now() + interval '7 days'),
    false,
    (now() + interval '30 days'),
    'Installation includes permits and city inspection. Maintenance agreement available separately.',
    'Still working on final pricing. Need to confirm permit costs.',
    '550e8400-e29b-41d4-a716-446655440001',
    now() - interval '3 days',
    now() - interval '1 day'
),
-- Emergency Quote (Johnson Emergency)
(
    '550e8400-e29b-41d4-a716-446655440033'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'EST-0000004',
    'Emergency Water Damage Restoration',
    'Emergency plumbing repair and water damage mitigation for burst pipe in basement including extraction, drying, and repairs',
    'approved',
    'bb0e8400-e29b-41d4-a716-446655440002'::uuid,
    NULL,
    'ee0e8400-e29b-41d4-a716-446655440002'::uuid,
    '550e8400-e29b-41d4-a716-446655440021'::uuid,
    'David Chen',
    '550e8400-e29b-41d4-a716-446655440003'::uuid,
    'Mary Johnson',
    'mary.johnson@email.com',
    '+1-512-555-2002',
    '{"street_address": "5678 Oak Avenue", "city": "Austin", "state": "TX", "postal_code": "78704", "country": "US"}'::jsonb,
    'USD',
    3200.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    264.00,
    3464.00,
    'none',
    0.00,
    0.00,
    NULL,
    false,
    (now() + interval '25 days'),
    'Emergency service rates apply. Additional charges may apply based on extent of damage discovered.',
    'Emergency approved by customer. Work in progress.',
    '550e8400-e29b-41d4-a716-446655440003',
    now() - interval '8 hours',
    now() - interval '6 hours'
),
-- Viewed Estimate (potential bathroom renovation)
(
    '550e8400-e29b-41d4-a716-446655440034'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'EST-0000005',
    'Master Bathroom Renovation',
    'Complete master bathroom renovation including new fixtures, vanity, shower, and plumbing updates',
    'viewed',
    'bb0e8400-e29b-41d4-a716-446655440001'::uuid,
    NULL,
    NULL,
    '550e8400-e29b-41d4-a716-446655440020'::uuid,
    'David Chen',
    '550e8400-e29b-41d4-a716-446655440003'::uuid,
    'John Smith',
    'john.smith@email.com',
    '+1-512-555-2001',
    '{"street_address": "1234 Elm Street", "city": "Austin", "state": "TX", "postal_code": "78701", "country": "US"}'::jsonb,
    'USD',
    11800.00,
    'percentage',
    10.00,
    1180.00,
    'percentage',
    8.25,
    875.70,
    11495.70,
    'percentage',
    30.00,
    3448.71,
    (now() + interval '5 days'),
    false,
    (now() + interval '22 days'),
    'Estimate includes high-quality fixtures and professional installation. Timeline approximately 2 weeks.',
    'Follow-up needed. Customer mentioned they are still deciding.',
    '550e8400-e29b-41d4-a716-446655440003',
    now() - interval '5 days',
    now() - interval '5 days'
);

-- 28. Create Estimate Line Items
INSERT INTO estimate_line_items (
    id,
    estimate_id,
    sort_order,
    name,
    description,
    quantity,
    unit,
    unit_price,
    discount_type,
    discount_value,
    discount_amount,
    tax_type,
    tax_rate,
    tax_amount,
    total_amount,
    is_taxable,
    notes,
    created_date,
    last_modified
) VALUES 
-- Kitchen Renovation Estimate Line Items
(
    '550e8400-e29b-41d4-a716-446655440061'::uuid,
    '550e8400-e29b-41d4-a716-446655440030'::uuid,
    1,
    'Kitchen Sink & Faucet Installation',
    'Remove old sink and faucet, install new stainless steel sink with modern faucet including supply lines',
    1.00,
    'each',
    750.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    61.88,
    811.88,
    true,
    'Includes disposal of old fixtures',
    now() - interval '2 months',
    now() - interval '2 months'
),
(
    '550e8400-e29b-41d4-a716-446655440062'::uuid,
    '550e8400-e29b-41d4-a716-446655440030'::uuid,
    2,
    'Dishwasher Connection',
    'Install new water supply and drain connections for dishwasher including shut-off valve',
    1.00,
    'each',
    425.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    35.06,
    460.06,
    true,
    'Includes code-compliant air gap',
    now() - interval '2 months',
    now() - interval '2 months'
),
(
    '550e8400-e29b-41d4-a716-446655440063'::uuid,
    '550e8400-e29b-41d4-a716-446655440030'::uuid,
    3,
    'Garbage Disposal Installation',
    'Install new 3/4 HP garbage disposal with electrical connection and proper mounting',
    1.00,
    'each',
    350.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    28.88,
    378.88,
    true,
    'Includes electrical work and testing',
    now() - interval '2 months',
    now() - interval '2 months'
),
(
    '550e8400-e29b-41d4-a716-446655440064'::uuid,
    '550e8400-e29b-41d4-a716-446655440030'::uuid,
    4,
    'Water Line Upgrades',
    'Replace old galvanized pipes with PEX piping for improved water flow and pressure',
    150.00,
    'linear feet',
    8.50,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    105.19,
    1380.19,
    true,
    'Includes fittings and connections',
    now() - interval '2 months',
    now() - interval '2 months'
),
(
    '550e8400-e29b-41d4-a716-446655440065'::uuid,
    '550e8400-e29b-41d4-a716-446655440030'::uuid,
    5,
    'Labor & Installation',
    'Professional installation and project management including cleanup',
    24.00,
    'hours',
    95.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    188.10,
    2468.10,
    true,
    'Includes all labor and supervision',
    now() - interval '2 months',
    now() - interval '2 months'
),

-- Maintenance Contract Estimate Line Items
(
    '550e8400-e29b-41d4-a716-446655440066'::uuid,
    '550e8400-e29b-41d4-a716-446655440031'::uuid,
    1,
    'Quarterly Inspections - All Units',
    'Comprehensive plumbing inspections for all 50+ rental units including fixtures, pipes, and water pressure',
    4.00,
    'quarters',
    1200.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    396.00,
    5196.00,
    true,
    'Quarterly service schedule',
    now() - interval '10 days',
    now() - interval '10 days'
),
(
    '550e8400-e29b-41d4-a716-446655440067'::uuid,
    '550e8400-e29b-41d4-a716-446655440031'::uuid,
    2,
    'Preventive Maintenance',
    'Preventive maintenance including drain cleaning, fixture adjustments, and minor repairs',
    4.00,
    'quarters',
    850.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    280.50,
    3680.50,
    true,
    'Includes basic supplies and materials',
    now() - interval '10 days',
    now() - interval '10 days'
),
(
    '550e8400-e29b-41d4-a716-446655440068'::uuid,
    '550e8400-e29b-41d4-a716-446655440031'::uuid,
    3,
    '24/7 Emergency Response',
    'Emergency plumbing response service available 24/7 for urgent issues',
    4.00,
    'quarters',
    625.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    206.25,
    2706.25,
    true,
    'Emergency calls billed separately at standard rates',
    now() - interval '10 days',
    now() - interval '10 days'
),
(
    '550e8400-e29b-41d4-a716-446655440069'::uuid,
    '550e8400-e29b-41d4-a716-446655440031'::uuid,
    4,
    'Reporting & Documentation',
    'Detailed quarterly reports and maintenance documentation for property management',
    4.00,
    'quarters',
    175.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    57.75,
    757.75,
    true,
    'Digital reports with photos and recommendations',
    now() - interval '10 days',
    now() - interval '10 days'
),

-- Grease Trap Installation Estimate Line Items
(
    '550e8400-e29b-41d4-a716-446655440070'::uuid,
    '550e8400-e29b-41d4-a716-446655440032'::uuid,
    1,
    'Commercial Grease Trap System',
    '500-gallon commercial grease trap system with all necessary fittings and connections',
    1.00,
    'each',
    3200.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    264.00,
    3464.00,
    true,
    'NSF certified for commercial use',
    now() - interval '3 days',
    now() - interval '1 day'
),
(
    '550e8400-e29b-41d4-a716-446655440071'::uuid,
    '550e8400-e29b-41d4-a716-446655440032'::uuid,
    2,
    'Installation & Connection',
    'Professional installation including excavation, connection to existing plumbing, and backfill',
    1.00,
    'each',
    1800.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    148.50,
    1948.50,
    true,
    'Includes excavation and site restoration',
    now() - interval '3 days',
    now() - interval '1 day'
),
(
    '550e8400-e29b-41d4-a716-446655440072'::uuid,
    '550e8400-e29b-41d4-a716-446655440032'::uuid,
    3,
    'Permits & Inspections',
    'City permits and required inspections for commercial grease trap installation',
    1.00,
    'each',
    450.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    37.13,
    487.13,
    true,
    'All permits and inspection fees included',
    now() - interval '3 days',
    now() - interval '1 day'
),
(
    '550e8400-e29b-41d4-a716-446655440073'::uuid,
    '550e8400-e29b-41d4-a716-446655440032'::uuid,
    4,
    'Testing & Commissioning',
    'System testing, commissioning, and staff training on proper operation and maintenance',
    1.00,
    'each',
    350.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    28.88,
    378.88,
    true,
    'Includes operator training and documentation',
    now() - interval '3 days',
    now() - interval '1 day'
),

-- Emergency Water Damage Estimate Line Items
(
    '550e8400-e29b-41d4-a716-446655440074'::uuid,
    '550e8400-e29b-41d4-a716-446655440033'::uuid,
    1,
    'Emergency Pipe Repair',
    'Emergency repair of burst pipe including replacement of damaged section and fittings',
    1.00,
    'each',
    450.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    37.13,
    487.13,
    true,
    'Emergency service rates apply',
    now() - interval '8 hours',
    now() - interval '6 hours'
),
(
    '550e8400-e29b-41d4-a716-446655440075'::uuid,
    '550e8400-e29b-41d4-a716-446655440033'::uuid,
    2,
    'Water Extraction',
    'Professional water extraction using commercial-grade equipment',
    1.00,
    'each',
    850.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    70.13,
    920.13,
    true,
    'Includes equipment setup and operation',
    now() - interval '8 hours',
    now() - interval '6 hours'
),
(
    '550e8400-e29b-41d4-a716-446655440076'::uuid,
    '550e8400-e29b-41d4-a716-446655440033'::uuid,
    3,
    'Drying & Dehumidification',
    'Industrial drying equipment and dehumidification for 3-day period',
    3.00,
    'days',
    350.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    86.63,
    1136.63,
    true,
    'Equipment rental and monitoring included',
    now() - interval '8 hours',
    now() - interval '6 hours'
),
(
    '550e8400-e29b-41d4-a716-446655440077'::uuid,
    '550e8400-e29b-41d4-a716-446655440033'::uuid,
    4,
    'Damage Assessment & Repairs',
    'Assessment of water damage and minor repairs to affected areas',
    1.00,
    'each',
    650.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    53.63,
    703.63,
    true,
    'Major repairs quoted separately if needed',
    now() - interval '8 hours',
    now() - interval '6 hours'
),

-- Bathroom Renovation Estimate Line Items
(
    '550e8400-e29b-41d4-a716-446655440078'::uuid,
    '550e8400-e29b-41d4-a716-446655440034'::uuid,
    1,
    'Bathroom Fixture Package',
    'Complete bathroom fixture package including toilet, vanity with sink, and shower/tub combo',
    1.00,
    'package',
    2800.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    231.00,
    3031.00,
    true,
    'Mid-range quality fixtures included',
    now() - interval '5 days',
    now() - interval '5 days'
),
(
    '550e8400-e29b-41d4-a716-446655440079'::uuid,
    '550e8400-e29b-41d4-a716-446655440034'::uuid,
    2,
    'Plumbing Rough-In',
    'Complete plumbing rough-in for new bathroom layout including water and waste lines',
    1.00,
    'each',
    1800.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    148.50,
    1948.50,
    true,
    'Includes permit and inspection',
    now() - interval '5 days',
    now() - interval '5 days'
),
(
    '550e8400-e29b-41d4-a716-446655440080'::uuid,
    '550e8400-e29b-41d4-a716-446655440034'::uuid,
    3,
    'Fixture Installation',
    'Professional installation of all bathroom fixtures including connections and testing',
    1.00,
    'each',
    1200.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    99.00,
    1299.00,
    true,
    'All fixtures properly installed and tested',
    now() - interval '5 days',
    now() - interval '5 days'
),
(
    '550e8400-e29b-41d4-a716-446655440081'::uuid,
    '550e8400-e29b-41d4-a716-446655440034'::uuid,
    4,
    'Tile Work Coordination',
    'Coordination with tile contractor and waterproofing for shower area',
    1.00,
    'each',
    450.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    37.13,
    487.13,
    true,
    'Coordination only - tile work by others',
    now() - interval '5 days',
    now() - interval '5 days'
),
(
    '550e8400-e29b-41d4-a716-446655440082'::uuid,
    '550e8400-e29b-41d4-a716-446655440034'::uuid,
    5,
    'Project Management & Cleanup',
    'Project management, coordination, and final cleanup',
    32.00,
    'hours',
    85.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    224.40,
    2944.40,
    true,
    'Includes all project coordination and cleanup',
    now() - interval '5 days',
    now() - interval '5 days'
);

-- 29. Create Invoices
INSERT INTO invoices (
    id,
    business_id,
    invoice_number,
    title,
    description,
    status,
    contact_id,
    project_id,
    job_id,
    estimate_id,
    template_id,
    assigned_to,
    assigned_user_id,
    client_name,
    client_email,
    client_phone,
    client_address,
    currency,
    subtotal,
    discount_type,
    discount_value,
    discount_amount,
    tax_type,
    tax_rate,
    tax_amount,
    total_amount,
    amount_paid,
    amount_due,
    amount_refunded,
    issue_date,
    due_date,
    payment_terms,
    late_fee_percentage,
    late_fee_amount,
    late_fee_applied,
    payment_instructions,
    terms_and_conditions,
    notes,
    created_by,
    created_date,
    last_modified
) VALUES 
-- Completed Kitchen Renovation Invoice (from approved estimate)
(
    '550e8400-e29b-41d4-a716-446655440040'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'INV-2024-001',
    'Kitchen Plumbing Renovation - Completed',
    'Completed kitchen plumbing renovation including new fixtures, dishwasher hookup, garbage disposal installation, and pipe upgrades',
    'paid',
    'bb0e8400-e29b-41d4-a716-446655440001'::uuid,
    NULL,
    'ee0e8400-e29b-41d4-a716-446655440001'::uuid,
    '550e8400-e29b-41d4-a716-446655440030'::uuid,
    '550e8400-e29b-41d4-a716-446655440020'::uuid,
    'David Chen',
    '550e8400-e29b-41d4-a716-446655440003'::uuid,
    'USD',
    4100.00,
    'percentage', 
    5.00,
    205.00,
    'percentage',
    8.25,
    321.34,
    5918.22,
    4216.34,
    1701.88,
    0.00,
    (now() - interval '1 month'),
    (now() - interval '1 month' + interval '30 days'),
    'Net 30',
    1.50,
    0.00,
    false,
    'Payment accepted by check, cash, or credit card. Thank you for your business!',
    'All work performed according to local plumbing codes. All fixtures include manufacturer warranty.',
    'Project completed successfully. Final invoice matches approved estimate.',
    '550e8400-e29b-41d4-a716-446655440003',
    now() - interval '1 month',
    now() - interval '1 month'
),
-- Emergency Water Damage Invoice (partially paid)
(
    '550e8400-e29b-41d4-a716-446655440041'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'INV-2024-002',
    'Emergency Water Damage Restoration',
    'Emergency plumbing repair and water damage mitigation for burst pipe in basement including extraction, drying, and repairs',
    'partially_paid',
    'bb0e8400-e29b-41d4-a716-446655440002'::uuid,
    NULL,
    'ee0e8400-e29b-41d4-a716-446655440002'::uuid,
    '550e8400-e29b-41d4-a716-446655440033'::uuid,
    '550e8400-e29b-41d4-a716-446655440021'::uuid,
    'David Chen',
    '550e8400-e29b-41d4-a716-446655440003'::uuid,
    'USD',
    3247.52,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    247.52,
    3495.04,
    2000.00,
    1495.04,
    0.00,
    (now() - interval '5 days'),
    (now() + interval '25 days'),
    'Net 30',
    1.50,
    0.00,
    false,
    'Payment accepted by check, cash, or credit card. Insurance claims welcome.',
    'Emergency service rates applied. All work guaranteed.',
    'Emergency work completed. Customer insurance covering majority of cost.',
    '550e8400-e29b-41d4-a716-446655440003',
    now() - interval '5 days',
    now() - interval '4 days'
),
-- Monthly Maintenance Invoice (sent, awaiting payment)
(
    '550e8400-e29b-41d4-a716-446655440042'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'INV-2024-003',
    'Monthly Maintenance - December 2024',
    'Monthly maintenance service for commercial property including inspections, minor repairs, and preventive maintenance',
    'sent',
    'bb0e8400-e29b-41d4-a716-446655440003'::uuid,
    NULL,
    'ee0e8400-e29b-41d4-a716-446655440003'::uuid,
    NULL,
    '550e8400-e29b-41d4-a716-446655440020'::uuid,
    'Sarah Wilson',
    '550e8400-e29b-41d4-a716-446655440002'::uuid,
    'USD',
    2018.87,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    153.87,
    2172.74,
    0.00,
    2172.74,
    0.00,
    (now() - interval '15 days'),
    (now() + interval '15 days'),
    'Net 30',
    1.50,
    0.00,
    false,
    'Payment due within 30 days. Monthly contract rate applies.',
    'Monthly maintenance contract. Service performed as scheduled.',
    'Regular monthly maintenance completed. All units serviced.',
    '550e8400-e29b-41d4-a716-446655440002',
    now() - interval '15 days',
    now() - interval '15 days'
),
-- Overdue Invoice (small repair job)
(
    '550e8400-e29b-41d4-a716-446655440043'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'INV-2024-004',
    'Sink Repair & Faucet Replacement',
    'Kitchen sink repair with new faucet installation and minor plumbing adjustments',
    'overdue',
    'bb0e8400-e29b-41d4-a716-446655440001'::uuid,
    NULL,
    NULL,
    NULL,
    '550e8400-e29b-41d4-a716-446655440020'::uuid,
    'Alex Thompson',
    '550e8400-e29b-41d4-a716-446655440005'::uuid,
    'USD',
    597.01,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    45.51,
    642.52,
    0.00,
    650.40,
    0.00,
    (now() - interval '45 days'),
    (now() - interval '15 days'),
    'Net 30',
    1.50,
    7.88,
    true,
    'Payment due immediately. Late fees applied.',
    'Work completed as requested. Payment overdue.',
    'Small repair job. Customer needs follow-up for payment.',
    '550e8400-e29b-41d4-a716-446655440005',
    now() - interval '45 days',
    now() - interval '10 days'
),
-- Draft Invoice (upcoming bathroom project)
(
    '550e8400-e29b-41d4-a716-446655440044'::uuid,
    '660e8400-e29b-41d4-a716-446655440000'::uuid,
    'INV-2024-005',
    'Bathroom Renovation Project - Phase 1',
    'First phase of bathroom renovation including plumbing rough-in and fixture preparation',
    'draft',
    'bb0e8400-e29b-41d4-a716-446655440001'::uuid,
    NULL,
    NULL,
    '550e8400-e29b-41d4-a716-446655440034'::uuid,
    '550e8400-e29b-41d4-a716-446655440020'::uuid,
    'David Chen',
    '550e8400-e29b-41d4-a716-446655440003'::uuid,
    'USD',
    5087.76,
    'percentage',
    10.00,
    0.00,
    'percentage',
    8.25,
    387.76,
    5475.52,
    0.00,
    5475.52,
    0.00,
    now(),
    (now() + interval '30 days'),
    'Net 30',
    1.50,
    0.00,
    false,
    'Payment due within 30 days of invoice date.',
    'First phase of bathroom renovation project. Additional phases to be invoiced separately.',
    'Draft invoice for Phase 1. Waiting for customer to approve bathroom estimate.',
    '550e8400-e29b-41d4-a716-446655440003',
    now() - interval '2 days',
    now() - interval '1 day'
);

-- 30. Create Invoice Line Items
INSERT INTO invoice_line_items (
    id,
    invoice_id,
    sort_order,
    name,
    description,
    quantity,
    unit,
    unit_price,
    discount_type,
    discount_value,
    discount_amount,
    tax_type,
    tax_rate,
    tax_amount,
    total_amount,
    is_taxable,
    notes,
    created_date,
    last_modified
) VALUES 
-- Kitchen Renovation Invoice Line Items (matches estimate)
(
    '550e8400-e29b-41d4-a716-446655440090'::uuid,
    '550e8400-e29b-41d4-a716-446655440040'::uuid,
    1,
    'Kitchen Sink & Faucet Installation',
    'Remove old sink and faucet, install new stainless steel sink with modern faucet including supply lines',
    1.00,
    'each',
    750.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    61.88,
    811.88,
    true,
    'Completed as specified in estimate',
    now() - interval '1 month',
    now() - interval '1 month'
),
(
    '550e8400-e29b-41d4-a716-446655440091'::uuid,
    '550e8400-e29b-41d4-a716-446655440040'::uuid,
    2,
    'Dishwasher Connection',
    'Install new water supply and drain connections for dishwasher including shut-off valve',
    1.00,
    'each',
    425.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    35.06,
    460.06,
    true,
    'Code-compliant installation with air gap',
    now() - interval '1 month',
    now() - interval '1 month'
),
(
    '550e8400-e29b-41d4-a716-446655440092'::uuid,
    '550e8400-e29b-41d4-a716-446655440040'::uuid,
    3,
    'Garbage Disposal Installation',
    'Install new 3/4 HP garbage disposal with electrical connection and proper mounting',
    1.00,
    'each',
    350.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    28.88,
    378.88,
    true,
    'Installation completed and tested',
    now() - interval '1 month',
    now() - interval '1 month'
),
(
    '550e8400-e29b-41d4-a716-446655440093'::uuid,
    '550e8400-e29b-41d4-a716-446655440040'::uuid,
    4,
    'Water Line Upgrades',
    'Replace old galvanized pipes with PEX piping for improved water flow and pressure',
    150.00,
    'linear feet',
    8.50,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    105.19,
    1380.19,
    true,
    'All connections properly installed',
    now() - interval '1 month',
    now() - interval '1 month'
),
(
    '550e8400-e29b-41d4-a716-446655440094'::uuid,
    '550e8400-e29b-41d4-a716-446655440040'::uuid,
    5,
    'Labor & Installation',
    'Professional installation and project management including cleanup',
    24.00,
    'hours',
    95.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    188.10,
    2468.10,
    true,
    'Project completed on schedule',
    now() - interval '1 month',
    now() - interval '1 month'
),

-- Emergency Water Damage Invoice Line Items (matches estimate)
(
    '550e8400-e29b-41d4-a716-446655440095'::uuid,
    '550e8400-e29b-41d4-a716-446655440041'::uuid,
    1,
    'Emergency Pipe Repair',
    'Emergency repair of burst pipe including replacement of damaged section and fittings',
    1.00,
    'each',
    450.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    37.13,
    487.13,
    true,
    'Emergency repair completed',
    now() - interval '5 days',
    now() - interval '4 days'
),
(
    '550e8400-e29b-41d4-a716-446655440096'::uuid,
    '550e8400-e29b-41d4-a716-446655440041'::uuid,
    2,
    'Water Extraction',
    'Professional water extraction using commercial-grade equipment',
    1.00,
    'each',
    850.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    70.13,
    920.13,
    true,
    'Water fully extracted from basement',
    now() - interval '5 days',
    now() - interval '4 days'
),
(
    '550e8400-e29b-41d4-a716-446655440097'::uuid,
    '550e8400-e29b-41d4-a716-446655440041'::uuid,
    3,
    'Drying & Dehumidification',
    'Industrial drying equipment and dehumidification for 3-day period',
    3.00,
    'days',
    350.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    86.63,
    1136.63,
    true,
    'Moisture levels normalized',
    now() - interval '5 days',
    now() - interval '4 days'
),
(
    '550e8400-e29b-41d4-a716-446655440098'::uuid,
    '550e8400-e29b-41d4-a716-446655440041'::uuid,
    4,
    'Damage Assessment & Repairs',
    'Assessment of water damage and minor repairs to affected areas',
    1.00,
    'each',
    650.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    53.63,
    703.63,
    true,
    'Minor repairs completed',
    now() - interval '5 days',
    now() - interval '4 days'
),

-- Monthly Maintenance Invoice Line Items
(
    '550e8400-e29b-41d4-a716-446655440099'::uuid,
    '550e8400-e29b-41d4-a716-446655440042'::uuid,
    1,
    'Unit Inspections',
    'Comprehensive plumbing inspections for 52 rental units including fixtures and water pressure',
    52.00,
    'units',
    15.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    64.35,
    844.35,
    true,
    'All units inspected and documented',
    now() - interval '15 days',
    now() - interval '15 days'
),
(
    '550e8400-e29b-41d4-a716-446655440100'::uuid,
    '550e8400-e29b-41d4-a716-446655440042'::uuid,
    2,
    'Preventive Maintenance',
    'Drain cleaning, fixture adjustments, and minor repairs across all units',
    1.00,
    'month',
    650.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    53.63,
    703.63,
    true,
    'Preventive maintenance completed',
    now() - interval '15 days',
    now() - interval '15 days'
),
(
    '550e8400-e29b-41d4-a716-446655440101'::uuid,
    '550e8400-e29b-41d4-a716-446655440042'::uuid,
    3,
    'Repair Materials & Supplies',
    'Materials and supplies used for minor repairs and adjustments',
    1.00,
    'lot',
    285.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    23.51,
    308.51,
    true,
    'Faucet parts, gaskets, and other supplies',
    now() - interval '15 days',
    now() - interval '15 days'
),
(
    '550e8400-e29b-41d4-a716-446655440102'::uuid,
    '550e8400-e29b-41d4-a716-446655440042'::uuid,
    4,
    'Reporting & Documentation',
    'Detailed monthly report with photos and maintenance recommendations',
    1.00,
    'report',
    150.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    12.38,
    162.38,
    true,
    'Digital report delivered to property manager',
    now() - interval '15 days',
    now() - interval '15 days'
),

-- Overdue Sink Repair Invoice Line Items
(
    '550e8400-e29b-41d4-a716-446655440103'::uuid,
    '550e8400-e29b-41d4-a716-446655440043'::uuid,
    1,
    'Kitchen Faucet Replacement',
    'Remove old faucet and install new single-handle kitchen faucet with spray function',
    1.00,
    'each',
    285.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    23.51,
    308.51,
    true,
    'New faucet installed and tested',
    now() - interval '45 days',
    now() - interval '10 days'
),
(
    '550e8400-e29b-41d4-a716-446655440104'::uuid,
    '550e8400-e29b-41d4-a716-446655440043'::uuid,
    2,
    'Sink Drain Repair',
    'Repair sink drain assembly and replace worn gaskets',
    1.00,
    'each',
    125.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    10.31,
    135.31,
    true,
    'Drain assembly repaired',
    now() - interval '45 days',
    now() - interval '10 days'
),
(
    '550e8400-e29b-41d4-a716-446655440105'::uuid,
    '550e8400-e29b-41d4-a716-446655440043'::uuid,
    3,
    'Service Call & Labor',
    'Service call and labor for sink repair and faucet replacement',
    1.50,
    'hours',
    95.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    11.69,
    153.19,
    true,
    'Quick repair completed',
    now() - interval '45 days',
    now() - interval '10 days'
),

-- Draft Bathroom Invoice Line Items
(
    '550e8400-e29b-41d4-a716-446655440106'::uuid,
    '550e8400-e29b-41d4-a716-446655440044'::uuid,
    1,
    'Bathroom Rough-In Plumbing',
    'Complete plumbing rough-in for new bathroom layout including water and waste lines',
    1.00,
    'each',
    2200.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    181.50,
    2381.50,
    true,
    'Phase 1 - Rough-in plumbing',
    now() - interval '2 days',
    now() - interval '1 day'
),
(
    '550e8400-e29b-41d4-a716-446655440107'::uuid,
    '550e8400-e29b-41d4-a716-446655440044'::uuid,
    2,
    'Permit & Inspection Fees',
    'City permits and required inspections for bathroom renovation',
    1.00,
    'each',
    350.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    28.88,
    378.88,
    true,
    'All permits and inspections included',
    now() - interval '2 days',
    now() - interval '1 day'
),
(
    '550e8400-e29b-41d4-a716-446655440108'::uuid,
    '550e8400-e29b-41d4-a716-446655440044'::uuid,
    3,
    'Fixture Preparation',
    'Preparation work for fixture installation including connections and mounting',
    1.00,
    'each',
    450.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    37.13,
    487.13,
    true,
    'Prep work for fixtures',
    now() - interval '2 days',
    now() - interval '1 day'
),
(
    '550e8400-e29b-41d4-a716-446655440109'::uuid,
    '550e8400-e29b-41d4-a716-446655440044'::uuid,
    4,
    'Project Management - Phase 1',
    'Project management and coordination for Phase 1 of bathroom renovation',
    20.00,
    'hours',
    85.00,
    'none',
    0.00,
    0.00,
    'percentage',
    8.25,
    140.25,
    1840.25,
    true,
    'Phase 1 project management',
    now() - interval '2 days',
    now() - interval '1 day'
);

-- 31. Create Payments
INSERT INTO payments (
    id,
    invoice_id,
    payment_date,
    amount,
    payment_method,
    payment_status,
    transaction_id,
    gateway,
    gateway_response,
    reference_number,
    notes,
    refund_amount,
    refund_date,
    refund_reason,
    created_by,
    created_date,
    last_modified
) VALUES 
-- Kitchen Renovation Invoice - Full Payment
(
    '550e8400-e29b-41d4-a716-446655440110'::uuid,
    '550e8400-e29b-41d4-a716-446655440040'::uuid,
    (now() - interval '3 weeks'),
    4216.34,
    'check',
    'completed',
    NULL,
    NULL,
    NULL,
    'CHECK-001234',
    'Full payment by check. Customer very satisfied with work.',
    0.00,
    NULL,
    NULL,
    '550e8400-e29b-41d4-a716-446655440004',
    now() - interval '3 weeks',
    now() - interval '3 weeks'
),
-- Emergency Water Damage Invoice - Insurance Payment (Partial)
(
    '550e8400-e29b-41d4-a716-446655440111'::uuid,
    '550e8400-e29b-41d4-a716-446655440041'::uuid,
    (now() - interval '3 days'),
    2000.00,
    'check',
    'completed',
    NULL,
    NULL,
    NULL,
    'INS-78945',
    'Insurance payment. Customer responsible for remaining balance.',
    0.00,
    NULL,
    NULL,
    '550e8400-e29b-41d4-a716-446655440004',
    now() - interval '3 days',
    now() - interval '3 days'
);

-- 32. Update converted estimates to reflect conversion
UPDATE estimates 
SET converted_to_invoice_id = '550e8400-e29b-41d4-a716-446655440040'::uuid,
    status = 'converted'
WHERE id = '550e8400-e29b-41d4-a716-446655440030'::uuid;

UPDATE estimates 
SET converted_to_invoice_id = '550e8400-e29b-41d4-a716-446655440041'::uuid,
    status = 'converted'
WHERE id = '550e8400-e29b-41d4-a716-446655440033'::uuid;

-- 33. Add some estimate status history examples
UPDATE estimates 
SET status_history = jsonb_build_array(
    jsonb_build_object(
        'id', 'hist-001',
        'from_status', null,
        'to_status', 'draft',
        'timestamp', (now() - interval '2 months')::text,
        'changed_by', '550e8400-e29b-41d4-a716-446655440003',
        'reason', 'Initial estimate creation'
    ),
    jsonb_build_object(
        'id', 'hist-002',
        'from_status', 'draft',
        'to_status', 'sent',
        'timestamp', (now() - interval '2 months' + interval '1 day')::text,
        'changed_by', '550e8400-e29b-41d4-a716-446655440003',
        'reason', 'Estimate sent to client'
    ),
    jsonb_build_object(
        'id', 'hist-003',
        'from_status', 'sent',
        'to_status', 'approved',
        'timestamp', (now() - interval '2 months' + interval '4 days')::text,
        'changed_by', '550e8400-e29b-41d4-a716-446655440003',
        'reason', 'Client approved estimate'
    )
)
WHERE id = '550e8400-e29b-41d4-a716-446655440030'::uuid;

-- Update some advance payment information
UPDATE estimates 
SET advance_payment_received = true,
    advance_payment_received_date = (now() - interval '2 months' + interval '2 days')
WHERE id = '550e8400-e29b-41d4-a716-446655440030'::uuid;

COMMENT ON DATABASE postgres IS 'Hero365 Demo Database - Complete with realistic plumbing business data including projects, estimates, quotes, and invoices with payments';

-- Force seed refresh - updated 2025-06-30 - Fixed UUIDs 