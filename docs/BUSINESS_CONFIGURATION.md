# 🏢 Business-Specific Website Generation

Hero365 supports generating websites for multiple businesses/contractors. This document explains how to configure and generate business-specific websites.

## 🎯 Overview

The system eliminates hardcoded business IDs by using:
- **Environment variables** for dynamic configuration
- **Business-specific generation scripts** 
- **API-driven business data loading**
- **Template-based configuration files**

## 🚀 Quick Start

### Generate a Website for a Business

```bash
# Basic usage
./scripts/generate-business-website.sh \
  "a1b2c3d4-e5f6-7890-1234-567890abcdef" \
  "Austin Elite HVAC" \
  "info@austinelitehvac.com" \
  "(512) 555-COOL"

# Another example - Miami Plumbing
./scripts/generate-business-website.sh \
  "b2c3d4e5-f6a7-1234-5678-90abcdef1234" \
  "Miami Pro Plumbing" \
  "service@miamiplumbing.com" \
  "(305) 555-PIPE"
```

## 📋 Configuration Hierarchy

The system checks configuration in this order:

1. **Environment Variables** (highest priority)
   - `NEXT_PUBLIC_BUSINESS_ID`
   - `NEXT_PUBLIC_BUSINESS_NAME`
   - `NEXT_PUBLIC_BUSINESS_PHONE`
   - `NEXT_PUBLIC_BUSINESS_EMAIL`

2. **Business Config File**
   - `website-builder/config/business-config.json`

3. **API Data Loading**
   - Fetches from: `GET /api/v1/public/professional/profile/{business_id}`

4. **Default Fallback**
   - Austin Elite HVAC (development business)

## 🔧 Backend Configuration

### Environment Variables

Create `environments/.env`:

```bash
# Business Configuration
BUSINESS_ID=your-business-uuid-here
BUSINESS_NAME=Your Business Name
BUSINESS_EMAIL=contact@yourbusiness.com
BUSINESS_PHONE=+1-555-123-4567

# API Configuration
SUPABASE_URL=your-supabase-url
SUPABASE_KEY=your-supabase-key
```

### Code Implementation

The backend automatically uses environment variables:

```python
# backend/app/api/public/routes/professional.py
business_id = os.getenv("BUSINESS_ID", "fallback-default-id")
```

## 🌐 Frontend Configuration

### Environment Variables

The generation script creates `.env.local`:

```bash
# Auto-generated by generate-business-website.sh
NEXT_PUBLIC_BUSINESS_ID=a1b2c3d4-e5f6-7890-1234-567890abcdef
NEXT_PUBLIC_BUSINESS_NAME=Austin Elite HVAC
NEXT_PUBLIC_BUSINESS_EMAIL=info@austinelitehvac.com
NEXT_PUBLIC_BUSINESS_PHONE=(512) 555-COOL
```

### API Integration

The system automatically uses the configured business ID:

```typescript
// Automatically uses NEXT_PUBLIC_BUSINESS_ID
const businessConfig = getBusinessConfig();
const businessId = businessConfig.defaultBusinessId;
```

## 📁 Generated Files

When you run the generation script, it creates:

```
website-builder/
├── .env.local                    # Environment variables
├── config/
│   └── business-config.json     # Business-specific config
└── .next/                       # Built website
```

## 🎨 Multi-Business Deployment

### Scenario: Deploying for Multiple Contractors

```bash
# Generate Austin HVAC website
./scripts/generate-business-website.sh \
  "a1b2c3d4-e5f6-7890-1234-567890abcdef" \
  "Austin Elite HVAC" \
  "info@austinelitehvac.com" \
  "(512) 555-COOL"

# Deploy to austin-hvac.hero365.ai
npm run deploy

# Generate Miami Plumbing website  
./scripts/generate-business-website.sh \
  "b2c3d4e5-f6a7-1234-5678-90abcdef1234" \
  "Miami Pro Plumbing" \
  "service@miamiplumbing.com" \
  "(305) 555-PIPE"

# Deploy to miami-plumbing.hero365.ai
npm run deploy
```

## 🔍 Troubleshooting

### Business ID Not Found

If the business ID doesn't exist in the database:

1. **Check Database**: Verify the business exists in the `businesses` table
2. **API Response**: Test the API endpoint manually:
   ```bash
   curl "http://localhost:8000/api/v1/public/professional/profile/{business_id}"
   ```
3. **Fallback Mode**: The script will use provided data if API fails

### Environment Variables Not Working

1. **Check File**: Ensure `.env.local` exists and has correct format
2. **Restart**: Restart the Next.js development server
3. **Verify**: Check browser console for loaded config

### Build Failures

1. **Dependencies**: Run `npm install` first
2. **TypeScript**: Check for type errors in business data
3. **API**: Ensure backend is running if fetching business data

## 🚀 Production Deployment

### Single Business (White Label)

```bash
# Set production environment variables
export NEXT_PUBLIC_BUSINESS_ID="client-business-uuid"
export NEXT_PUBLIC_BUSINESS_NAME="Client Business Name"

# Build and deploy
npm run build
npm run deploy
```

### Multi-Tenant Platform

```bash
# Generate multiple websites
for business in austin-hvac miami-plumbing dallas-electric; do
  ./scripts/generate-business-website.sh \
    "${business}_uuid" \
    "${business}_name" \
    "${business}_email" \
    "${business}_phone"
  
  # Deploy to business-specific subdomain
  deploy-to-subdomain "${business}.hero365.ai"
done
```

## 📋 Migration from Hardcoded Values

If you have existing hardcoded business IDs:

1. **Search**: Find all hardcoded references
   ```bash
   grep -r "a1b2c3d4-e5f6-7890-1234-567890abcdef" .
   ```

2. **Replace**: Use environment variables instead
   ```typescript
   // Before
   const businessId = "a1b2c3d4-e5f6-7890-1234-567890abcdef";
   
   // After  
   const businessId = getCurrentBusinessId();
   ```

3. **Test**: Verify all functionality works with new configuration

---

## 🎯 Summary

The business configuration system provides:
- ✅ **Dynamic Business ID** management
- ✅ **Environment-based** configuration  
- ✅ **API-driven** data loading
- ✅ **Multi-tenant** support
- ✅ **Production-ready** deployment

No more hardcoded business IDs! 🎉
